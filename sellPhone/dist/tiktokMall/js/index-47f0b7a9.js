import{ar as g,bw as oe,bJ as Te,bK as ke,bB as Ie,ac as Re,aq as L,as as z,aD as ie,ax as N,e as E,r as R,p as le,m as I,bb as re,aw as se,bL as Be,f as A,b as m,bC as ce,av as U,aG as Z,b7 as K,bM as $e,b9 as j,q as _e,ay as X,by as Pe,s as O,a1 as Ae,bA as ze,au as ee,bN as Oe,bn as Ne,bO as te,az as Le,aA as Ee,bP as De,bQ as Me,bi as He,at as We,br as Ze,g as Fe,bD as Ve}from"./index-55507c28.js";import{u as de}from"./use-id-acc627d9.js";import{T as je}from"./index-748d9839.js";import{a as qe,S as Ke}from"./index-dc8f9730.js";import{u as Ue}from"./use-refs-de0c4b83.js";function Xe(e,i,l){let d=0;const n=e.scrollLeft,a=l===0?1:Math.round(l*1e3/16);function r(){e.scrollLeft+=(i-n)/a,++d<a&&g.raf(r)}r()}function Ye(e,i,l,d){let n=oe(e);const a=n<i,r=l===0?1:Math.round(l*1e3/16),b=(i-n)/r;function u(){n+=b,(a&&n>i||!a&&n<i)&&(n=i),Te(e,n),a&&n<i||!a&&n>i?g.raf(u):d&&g.raf(d)}u()}function Ge(e,i){if(!ke||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{i(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};Ie(n),Re(n),g.onMountedOrActivated(d)}const[Je,Qe]=L("sticky"),pe={zIndex:z,position:ie("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var et=E({name:Je,props:pe,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const d=R(),n=g.useScrollParent(d),a=le({fixed:!1,width:0,height:0,transform:0}),r=I(()=>re(e.position==="top"?e.offsetTop:e.offsetBottom)),b=I(()=>{const{fixed:f,height:S,width:C}=a;if(f)return{width:"".concat(C,"px"),height:"".concat(S,"px")}}),u=I(()=>{if(!a.fixed)return;const f=se(Be(e.zIndex),{width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),[e.position]:"".concat(r.value,"px")});return a.transform&&(f.transform="translate3d(0, ".concat(a.transform,"px, 0)")),f}),k=f=>i("scroll",{scrollTop:f,isFixed:a.fixed}),h=()=>{if(!d.value||ce(d))return;const{container:f,position:S}=e,C=g.useRect(d),v=oe(window);if(a.width=C.width,a.height=C.height,S==="top")if(f){const T=g.useRect(f),s=T.bottom-r.value-a.height;a.fixed=r.value>C.top&&T.bottom>0,a.transform=s<0?s:0}else a.fixed=r.value>C.top;else{const{clientHeight:T}=document.documentElement;if(f){const s=g.useRect(f),B=T-s.top-r.value-a.height;a.fixed=T-r.value<C.bottom&&T>s.top,a.transform=B<0?-B:0}else a.fixed=T-r.value<C.bottom}k(v)};return A(()=>a.fixed,f=>i("change",f)),g.useEventListener("scroll",h,{target:n,passive:!0}),Ge(d,h),()=>{var f;return m("div",{ref:d,style:b.value},[m("div",{class:Qe({fixed:a.fixed}),style:u.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const tt=U(et),[nt,ne]=L("tab");var at=E({name:nt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Z},setup(e,{slots:i}){const l=I(()=>{const n={},{type:a,color:r,disabled:b,isActive:u,activeColor:k,inactiveColor:h}=e;r&&a==="card"&&(n.borderColor=r,b||(u?n.backgroundColor=r:n.color=r));const S=u?k:h;return S&&(n.color=S),n}),d=()=>{const n=m("span",{class:ne("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||K(e.badge)&&e.badge!==""?m($e,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>m("div",{id:e.id,role:"tab",class:[ne([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[ot,ae]=L("tabs");var it=E({name:ot,props:{count:j(Number),inited:Boolean,animated:Boolean,duration:j(z),swipeable:Boolean,lazyRender:Boolean,currentIndex:j(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const d=R(),n=b=>i("change",b),a=()=>{var b;const u=(b=l.default)==null?void 0:b.call(l);return e.animated||e.swipeable?m(qe,{ref:d,loop:!1,class:ae("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[u]}):u},r=b=>{const u=d.value;u&&u.state.active!==b&&u.swipeTo(b,{immediate:!e.inited})};return A(()=>e.currentIndex,r),_e(()=>{r(e.currentIndex)}),X({swipeRef:d}),()=>m("div",{class:ae("content",{animated:e.animated||e.swipeable})},[a()])}});const[ue,W]=L("tabs"),lt={type:ie("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:Z,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:Z,lineWidth:z,lineHeight:z,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},fe=Symbol(ue);var rt=E({name:ue,props:lt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:l}){let d,n,a;const r=R(),b=R(),u=R(),k=R(),h=de(),f=g.useScrollParent(r),[S,C]=Ue(),{children:v,linkChildren:T}=g.useChildren(fe),s=le({inited:!1,position:"",lineStyle:{},currentIndex:-1}),B=I(()=>v.length>e.swipeThreshold||!e.ellipsis||e.shrink),F=I(()=>({borderColor:e.color,background:e.background})),$=(t,o)=>{var c;return(c=t.name)!=null?c:o},Y=I(()=>{const t=v[s.currentIndex];if(t)return $(t,s.currentIndex)}),V=I(()=>re(e.offsetTop)),G=I(()=>e.sticky?V.value+d:0),D=t=>{const o=b.value,c=S.value;if(!B.value||!o||!c||!c[s.currentIndex])return;const y=c[s.currentIndex].$el,w=y.offsetLeft-(o.offsetWidth-y.offsetWidth)/2;Xe(o,w,t?0:+e.duration)},_=()=>{const t=s.inited;O(()=>{const o=S.value;if(!o||!o[s.currentIndex]||e.type!=="line"||ce(r.value))return;const c=o[s.currentIndex].$el,{lineWidth:y,lineHeight:w}=e,x=c.offsetLeft+c.offsetWidth/2,P={width:ee(y),backgroundColor:e.color,transform:"translateX(".concat(x,"px) translateX(-50%)")};if(t&&(P.transitionDuration="".concat(e.duration,"s")),K(w)){const p=ee(w);P.height=p,P.borderRadius=p}s.lineStyle=P})},ve=t=>{const o=t<s.currentIndex?-1:1;for(;t>=0&&t<v.length;){if(!v[t].disabled)return t;t+=o}},M=(t,o)=>{const c=ve(t);if(!K(c))return;const y=v[c],w=$(y,c),x=s.currentIndex!==null;s.currentIndex!==c&&(s.currentIndex=c,o||D(),_()),w!==e.active&&(i("update:active",w),x&&i("change",w,y.title)),a&&!e.scrollspy&&Ne(Math.ceil(te(r.value)-V.value))},H=(t,o)=>{const c=v.find((w,x)=>$(w,x)===t),y=c?v.indexOf(c):0;M(y,o)},J=(t=!1)=>{if(e.scrollspy){const o=v[s.currentIndex].$el;if(o&&f.value){const c=te(o,f.value)-G.value;n=!0,Ye(f.value,c,t?0:+e.duration,()=>{n=!1})}}},be=(t,o,c)=>{const{title:y,disabled:w}=v[o],x=$(v[o],o);w?i("disabled",x,y):(De(e.beforeChange,{args:[x],done:()=>{M(o),J()}}),i("click",x,y),Me(t)),i("click-tab",{name:x,title:y,event:c,disabled:w})},he=t=>{a=t.isFixed,i("scroll",t)},me=t=>{O(()=>{H(t),J(!0)})},ge=()=>{for(let t=0;t<v.length;t++){const{top:o}=g.useRect(v[t].$el);if(o>G.value)return t===0?0:t-1}return v.length-1},ye=()=>{if(e.scrollspy&&!n){const t=ge();M(t)}},we=()=>v.map((t,o)=>m(at,Le({key:t.id,id:"".concat(h,"-").concat(o),ref:C(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===s.currentIndex,controls:t.id,scrollable:B.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>be(t,o,c)},Ee(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),xe=()=>{if(e.type==="line"&&v.length)return m("div",{class:W("line"),style:s.lineStyle},null)},Q=()=>{var t,o,c;const{type:y,border:w,sticky:x}=e,P=[m("div",{ref:x?void 0:u,class:[W("wrap"),{[Oe]:y==="line"&&w}]},[m("div",{ref:b,role:"tablist",class:W("nav",[y,{shrink:e.shrink,complete:B.value}]),style:F.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),we(),xe(),(o=l["nav-right"])==null?void 0:o.call(l)])]),(c=l["nav-bottom"])==null?void 0:c.call(l)];return x?m("div",{ref:u},[P]):P};A([()=>e.color,Pe],_),A(()=>e.active,t=>{t!==Y.value&&H(t)}),A(()=>v.length,()=>{s.inited&&(H(e.active),_(),O(()=>{D(!0)}))});const Se=()=>{H(e.active,!0),O(()=>{s.inited=!0,u.value&&(d=g.useRect(u.value).height),D(!0)})},Ce=(t,o)=>i("rendered",t,o);return X({resize:()=>{_(),O(()=>{var t,o;return(o=(t=k.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:me}),Ae(_),ze(_),g.onMountedOrActivated(Se),g.useEventListener("scroll",ye,{target:f,passive:!0}),T({id:h,props:e,setLine:_,onRendered:Ce,currentName:Y,scrollIntoView:D}),()=>m("div",{ref:r,class:W([e.type])},[e.sticky?m(tt,{container:r.value,offsetTop:V.value,onScroll:he},{default:()=>[Q()]}):Q(),m(it,{ref:k,count:v.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:M},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[st,q]=L("tab"),ct=se({},He,{dot:Boolean,name:z,badge:z,title:String,disabled:Boolean,titleClass:We,titleStyle:[String,Object],showZeroBadge:Z});var dt=E({name:st,props:ct,setup(e,{slots:i}){const l=de(),d=R(!1),{parent:n,index:a}=g.useParent(fe);if(!n)return;const r=()=>{var h;return(h=e.name)!=null?h:a.value},b=()=>{d.value=!0,n.props.lazyRender&&O(()=>{n.onRendered(r(),e.title)})},u=I(()=>{const h=r()===n.currentName.value;return h&&!d.value&&b(),h}),k=R(!u.value);return A(u,h=>{h?k.value=!1:g.doubleRaf(()=>{k.value=!0})}),A(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Ze(je,u),()=>{var h;const f="".concat(n.id,"-").concat(a.value),{animated:S,swipeable:C,scrollspy:v,lazyRender:T}=n.props;if(!i.default&&!S)return;const s=v||u.value;if(S||C)return m(Ke,{id:l,role:"tabpanel",class:q("panel-wrapper",{inactive:k.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":f},{default:()=>{var $;return[m("div",{class:q("panel")},[($=i.default)==null?void 0:$.call(i)])]}});const F=d.value||v||!T?(h=i.default)==null?void 0:h.call(i):null;return X({id:l}),Fe(m("div",{id:l,role:"tabpanel",class:q("panel"),tabindex:s?0:-1,"aria-labelledby":f},[F]),[[Ve,s]])}}});const gt=U(dt),yt=U(rt);export{gt as T,yt as a};
