System.register(["./index-legacy-27bdf402.js","./index-legacy-978b0f9e.js","./index-legacy-5db326f8.js","./index-legacy-afbbd1b9.js","./index-legacy-9ab921f3.js","./index-legacy-e9d6ff65.js","./index-legacy-55462584.js","./index-legacy-00472a3a.js","./index-legacy-591c4a77.js","./index-legacy-b4569500.js","./index-legacy-f812d42a.js","./index-legacy-dd9c3ae5.js","./orderItem-legacy-910db39f.js","./use-id-legacy-dafc5df9.js","./index-legacy-4ee839b1.js","./use-refs-legacy-e97e4ac9.js","./index-legacy-0dd14983.js","./config-legacy-d7584f6e.js","./index-legacy-6f6ec63e.js"],function(e,t){"use strict";var i,s,o,a,n,l,d,r,h,c,u,p,f,g,x,v,m,w,b,y,k,C,I,S,j,N,L,_,O,R,$,A,E,V;return{setters:[e=>{i=e._,s=e.i,o=e.v,a=e.b3,n=e.j,l=e.T,d=e.b4,r=e.$,h=e.o,c=e.c,u=e.b,p=e.w,f=e.a,g=e.t,x=e.y,v=e.n,m=e.ap,w=e.d,b=e.F,y=e.E,k=e.x,C=e.I},e=>{I=e.A},e=>{S=e.P,j=e.N},e=>{N=e.E},e=>{L=e.P},e=>{_=e.L},e=>{O=e.B},null,null,e=>{R=e.S},e=>{$=e.a,A=e.T},null,e=>{E=e.o,V=e.a},null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent="#order[data-v-17d4e17d]{width:100%;height:100vh;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}#order.is-ar[data-v-17d4e17d] .van-field__control{text-align:right;padding-right:10px}.main-list[data-v-17d4e17d]{overflow:scroll}.yes[data-v-17d4e17d]{color:var(--site-main-color);position:absolute;right:30px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.triangle[data-v-17d4e17d]{width:0;height:0;border:6px solid transparent;border-top-color:#000;position:relative;top:3px}.main[data-v-17d4e17d]{padding:15px;box-sizing:border-box;height:calc(100vh - 95px);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.van-search[data-v-17d4e17d]{padding:0!important;border-radius:5px;height:44px}[data-v-17d4e17d] .van-search__content{border-radius:20px}.seach[data-v-17d4e17d]{position:relative}.seach .seach_list[data-v-17d4e17d]{position:absolute;top:35px;left:0;z-index:999;background:#fff;width:100%;max-height:200px;overflow-y:scroll;padding:0 10px;box-sizing:border-box}.seach .seach_list div[data-v-17d4e17d]{height:25px;line-height:25px}.dropdown[data-v-17d4e17d]{margin:10px 0;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:flex}.dropdown .dropdownitem[data-v-17d4e17d]{width:48%;border-radius:5px;overflow:hidden}.cenger[data-v-17d4e17d]{display:inline-block;width:50px}.goods[data-v-17d4e17d]{height:calc(100% - 190px);overflow:auto}.btn-style[data-v-17d4e17d]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:10px}\n",document.head.appendChild(t);const U=s(),P={name:"Order",beforeRouteEnter(e,t,i){console.log("beforeRouteEnter"),i(e=>{const t=JSON.parse(window.sessionStorage.getItem("position"));document.querySelector(".main-list").scrollTop=t})},beforeRouteLeave(e,t,i){const s=document.querySelector(".main-list").scrollTop;window.sessionStorage.setItem("position",JSON.stringify(s)),i()},components:{orderItem:E},data:()=>({loading:!1,refreshing:!1,finished:!1,showCenter:!1,showCenter2:!1,t:o.useI18n().t,activeName:"",payStatus:"-1",showSeach:!1,list:[],option1:[],option2:[],title1:"",title2:"",orderId:"",purchStatus:"",status:"-2",pageNum:1,isArLang:U,checkedItems:[],show:!1,value:"",showKeyboard:!1,orderStore:a(),userStore:n(),isAllchoice:!1}),activated(){},created(){window.sessionStorage.setItem("position",JSON.stringify(0)),this.title1="支付状态",this.title2="物流状态",this.option1=[{text:"全部",value:-1,isCurrent:!0},{text:"未支付",value:0,isCurrent:!1},{text:"已支付",value:1,isCurrent:!1}],this.option2=[{text:"全部",value:-2,isCurrent:!0},{text:"订单已取消",value:-1,isCurrent:!1},{text:"等待买家付款",value:0,isCurrent:!1},{text:"买家已付款",value:1,isCurrent:!1},{text:"供应商已接单",value:2,isCurrent:!1},{text:"物流运输中",value:3,isCurrent:!1},{text:"买家已签收",value:4,isCurrent:!1},{text:"订单已完成",value:5,isCurrent:!1},{text:"已退款",value:6,isCurrent:!1}],["argos"].includes("tiktokMall")&&this.option2.forEach(e=>{4===e.value&&(e.text="订单已完成"),5===e.value&&(e.text="买家已签收")}),document.addEventListener("reloadOrderList",()=>{this.onRefresh()},!1)},computed:{hasNoPushNum:()=>{const e=a();return Boolean(e.num)},hasSetSafePass(){return this.userStore.userInfo&&this.userStore.userInfo.safeword}},watch:{value(e){6===e.length&&(l.loading(""),this.purchasebatch(),this.show=!1,this.value="")}},mounted(){this.userStore=n(),this.onRefresh()},methods:{isChecked(e){return this.checkedItems.includes(e)},orderItemIdList(e,t){t&&!this.isChecked(e)&&this.checkedItems.push(e),!t&&this.isChecked(e)&&(this.checkedItems=this.checkedItems.filter(t=>t!==e))},allChoice(){this.isAllchoice=!this.isAllchoice,this.$refs.changeCheckboxRef.forEach(e=>{e.isTrueChecked(this.isAllchoice),this.isAllchoice||(this.checkedItems=[])})},purchasebatch(){const e={orderId:this.checkedItems.join(","),safeword:this.value};d(e).then(e=>{this.init(),this.getOrderList()})},openInputDialog(){0!==this.checkedItems.length?this.hasSetSafePass?(this.show=!0,this.showKeyboard=!0):(l(this.t("请设置资金密码")),setTimeout(()=>{router.push({path:"/fundsPasswordSettings"})},1500)):l(this.t("请选择订单"))},onLoad(){},onRefresh(){this.init(),this.getOrderList()},handleChoose(e){let t=this.payStatus/1,i=this.option1.findIndex(e=>e.value===t);this.option1.splice(i,1,{...this.option1[i],isCurrent:!1});let s=this.option1.findIndex(t=>t.value===e.value);this.option1.splice(s,1,{...this.option1[s],isCurrent:!0}),this.payStatus=e.value,this.title1=e.text,this.showCenter=!1,this.init(),this.getOrderList()},handleChoose2(e){let t=this.status/1,i=this.option2.findIndex(e=>e.value===t);this.option2.splice(i,1,{...this.option2[i],isCurrent:!1});let s=this.option2.findIndex(t=>t.value===e.value);this.option2.splice(s,1,{...this.option2[s],isCurrent:!0}),this.status=e.value,this.title2=e.text,this.showCenter2=!1,this.init(),this.getOrderList()},handleShow(e){1===e?this.showCenter=!0:this.showCenter2=!0},init(){this.pageNum=1,this.list=[],this.loading=!1,this.refreshing=!1,this.finished=!1,this.checkedItems=[],this.isAllchoice=!1},getOrderList(){const e={orderId:this.orderId,payStatus:this.payStatus,purchStatus:this.activeName,status:this.status,begin:"",end:"",pageNum:this.pageNum};Object.keys(e).forEach(t=>{e[t]||0===e[t]||delete e[t]}),e.payStatus/1==-1&&delete e.payStatus,e.status/1==-2&&delete e.status,l.loading({message:this.t("加载中"),forbidClick:!0,duration:0}),V(e).then(t=>{this.refreshing&&(this.refreshing=!1),this.pageNum++,this.loading=!1,0==t.pageList.length&&(this.finished=!0);const i=this.list.concat(t.pageList);this.list=0===Number(e.purchStatus)?i.filter(e=>-1!==Number(e.status)&&6!==Number(e.status)):i}).catch(e=>{console.log(e)})},tab(e,t){this.activeName=e,console.log(this.activeName,"activeName"),this.onRefresh()},onSearch(){this.showSeach=!0,this.$router.push("/order_search")},change(e){this.value=e,this.showSeach=!1},onConfirm2(e){this.title2=this.option2[e].text,this.getOrderList()}}},K={class:"main"},T={class:"seach",style:{"border-radius":"25px"}},z={class:"dropdown"},J={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},B={class:"text-xs"},D={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},q={class:"text-xs"},F={class:"btn-style"},M=["onClick"],Y=["onClick"],G={class:"main-list"},H={class:"goods"},Q={style:{height:"22rem"}};e("default",i(P,[["render",function(e,t,i,s,o,a){const n=A,l=$,d=R,E=O,V=C,U=m,P=r("orderItem"),W=_,X=L,Z=N,ee=S,te=j,ie=I;return h(),c("div",{id:"order",class:v({"is-ar":o.isArLang})},[u(l,{active:o.activeName,"onUpdate:active":t[0]||(t[0]=e=>o.activeName=e),onClick:a.tab},{default:p(()=>[u(n,{title:o.t("total"),name:""},null,8,["title"]),u(n,{title:o.t("待采购"),name:"0",dot:a.hasNoPushNum},null,8,["title","dot"]),u(n,{title:o.t("已采购"),name:"1"},null,8,["title"])]),_:1},8,["active","onClick"]),f("div",K,[f("div",T,[u(d,{style:{"border-radius":"25px"},readonly:"",onClick:a.onSearch,modelValue:o.orderId,"onUpdate:modelValue":t[1]||(t[1]=e=>o.orderId=e),placeholder:o.t("搜索")},null,8,["onClick","modelValue","placeholder"])]),f("div",z,[f("div",{class:"dropdownitem one h-10.5",onClick:t[2]||(t[2]=e=>a.handleShow(1))},[f("div",J,[f("span",B,g(o.t(o.title1)),1),t[14]||(t[14]=f("div",{class:"triangle"},null,-1))])]),f("div",{class:"dropdownitem one h-10.5",onClick:t[3]||(t[3]=e=>a.handleShow(2))},[f("div",D,[f("span",q,g(o.t(o.title2)),1),t[15]||(t[15]=f("div",{class:"triangle"},null,-1))])])]),f("div",F,[u(E,{onClick:t[4]||(t[4]=e=>a.openInputDialog()),type:"primary"},{default:p(()=>[w(g(e.$t("批量采购")),1)]),_:1}),u(E,{onClick:t[5]||(t[5]=e=>a.allChoice()),type:"default"},{default:p(()=>[w(g(e.$t("全选")),1)]),_:1})]),u(U,{show:o.showCenter,"onUpdate:show":t[6]||(t[6]=e=>o.showCenter=e),round:""},{default:p(()=>[(h(!0),c(b,null,y(o.option1,(e,t)=>(h(),c("div",{onClick:t=>a.handleChoose(e),class:"font-3.5 w-72 h-12 flex justify-center items-center border-bottom relative"},[w(g(o.t(e.text))+" ",1),e.isCurrent?(h(),x(V,{key:0,name:"success",class:"yes"})):k("",!0)],8,M))),256))]),_:1},8,["show"]),u(U,{show:o.showCenter2,"onUpdate:show":t[7]||(t[7]=e=>o.showCenter2=e),round:""},{default:p(()=>[(h(!0),c(b,null,y(o.option2,(e,t)=>(h(),c("div",{onClick:t=>a.handleChoose2(e),class:"text-xs w-72 h-12 flex justify-center items-center border-bottom relative",key:t+"option2"},[w(g(o.t(e.text))+" ",1),e.isCurrent?(h(),x(V,{key:0,name:"success",class:"yes"})):k("",!0)],8,Y))),128))]),_:1},8,["show"]),f("div",G,[o.list.length>0?(h(),x(X,{key:0,modelValue:o.refreshing,"onUpdate:modelValue":t[9]||(t[9]=e=>o.refreshing=e),onRefresh:a.onRefresh,"loading-text":e.$t("加载中"),"loosing-text":e.$t("释放以刷新"),"pulling-text":e.$t("下拉以刷新")},{default:p(()=>[u(W,{"immediate-check":!1,loading:o.loading,"onUpdate:loading":t[8]||(t[8]=e=>o.loading=e),"loading-text":e.$t("加载中"),finished:o.finished,"finished-text":e.$t("noMore"),onLoad:a.getOrderList},{default:p(()=>[f("div",H,[(h(!0),c(b,null,y(o.list,e=>(h(),x(P,{ref_for:!0,ref:"changeCheckboxRef",orderItemIdList:a.orderItemIdList,info:e},null,8,["orderItemIdList","info"]))),256))])]),_:1},8,["loading","loading-text","finished","finished-text","onLoad"])]),_:1},8,["modelValue","onRefresh","loading-text","loosing-text","pulling-text"])):(h(),x(Z,{key:1,description:e.$t("noData")},null,8,["description"])),t[16]||(t[16]=f("div",{class:"safe-area-inset-bottom"},null,-1))])]),u(ie,{show:o.show,"onUpdate:show":t[13]||(t[13]=e=>o.show=e),title:o.t("请输入交易密码")},{default:p(()=>[f("div",Q,[u(ee,{length:6,value:o.value,focused:o.showKeyboard,onFocus:t[10]||(t[10]=e=>o.showKeyboard=!0)},null,8,["value","focused"]),u(te,{modelValue:o.value,"onUpdate:modelValue":t[11]||(t[11]=e=>o.value=e),show:o.showKeyboard,onBlur:t[12]||(t[12]=e=>o.showKeyboard=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])],2)}],["__scopeId","data-v-17d4e17d"]]))}}});
