import{_ as W,a0 as L,l as Q,v as ee,r as l,j as oe,q as te,cj as le,f as ae,o as C,c as V,b as u,w,a as o,x as R,u as se,d as S,t as s,T as d,ck as ne,cl as ue,cm as ie,a9 as re,X as ce}from"./index-55507c28.js";import{B as de}from"./index-64f4bac7.js";import{P as ve,N as me}from"./index-e25caf73.js";import{E as $}from"./index-5f89f735.js";import{n as pe}from"./nationalityList-74008cae.js";import{u as fe}from"./index-76527f4c.js";import{I as ge}from"./index-715fcdb8.js";import"./index-6e53b41f.js";import"./index-3bdff75a.js";import"./use-id-acc627d9.js";import"./index-3ce1345e.js";import"./index-29b5376b.js";import"./countryList-d29458f2.js";const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKzSURBVHgBvVZdbtpAEP5214G+VOUI9ATlBqEnKDlB4CVV1JeitJHSKIqjCJCaEsRDFYVUIj1BuEHICUJPUN+gPDY23unuEsjaQLDz00+yZHt29tud2Z35GFKi9vV7AYIXGHiOJHLg0pMS3t7nzX4Sf5Zk0OHRSdHhYp2AkvrM3TO0F8qwvYi80ep07yVsNE7ylHW6ICoiDQgDPwjX3J1NzyZTESnzRT714x/rlBHXC8iG6vFun1kwFDIZ8bvePP1ok41Nc9Bone2TJDdOov61QaPe7vaHgW0weWVOiXOmw563bcTYgBEV7tYSw+G305Jg7CLiRGgHYsV1q5UhlqB2dOoyzvYX2SOEOmfIiEt7lRSisru9cY4UqDVPygyiO88WzWFG7EdCIqmalsxMysXqItt0h+ZEqkRbhvOdrY0KUsI+IHMXM3khh5dsww0PD/DEZBFCVT3eTV717tzq3R16KrIooXXfJHCFFEhKpuGMHVT+pPU3DAZIgZu/JvyJUmAIRyPkhXVeiWf/IAXsErYMhsZxkNjhsTCEN3gRqSBEwWs8Ewzhbcka3v3kRTwTHOu9j3G/AxNsFU+EerNzobuHmZfQnx6VkOjndBShqJsuHglTm/UmSJVL9ejrNiXc+/S+Byusgouu2+rm8BioRmB9eQFf6UWKNyGsWp/5jPS7eCDqrbNWrBG09VmZ6Yf1486lDqm1jJ7vy2rSu+a63Vz2VdCKVR7vy9aGOfkzEsNnK2ssIh1YScmFy1qzU15GpvOefRlcx8l8Hr6dzjbPUZc6yGgjnjgrhz6BfoVSmvLHOfIMzhsViTJmFZ0hsxvBQtVm6mvIXTC2joeAWN8Xo0q86yzVpVoucMSUwP3w1NiD3a35SiGRENbQ+eFMlJRAeoOxCpuEb6h2o0joSlLYS6rA/xv+AZfLLFBKDLSAAAAAAElFTkSuQmCC";const ye={class:"bindVerify h-full bg-white"},Ae={class:"content"},he={key:0},be={style:{"margin-top":"22px"}},Ce={style:{"margin-top":"22px"}},Ve={key:1},we={class:"pl-30 pr-30 text-center flex flex-col items-center justify-center mt40"},Se={class:"imgbox"},Be={class:"code flex items-center justify-center textColor"},Ee={class:"tips"},Ie={class:"flex justify-between mt-6 mb-3"},Te={class:"flex items-center"},ke={class:"mt-5 bottom tabBackground textColor"},Ue={__name:"index",setup(Ne){const y=L(),B=Q(),{t:n}=ee.useI18n(),{toClipboard:j}=fe(),f=l(""),i=l(""),v=l(""),E=l(!1),a=l(0),A=l(""),I=l(""),g=l(""),m=l(!1),r=l("");l(!0);const T=l(""),_=l(0),k=l(null);l(0);const U=l(""),G=oe(),p=l(!1);te(()=>{console.log("ss"),H(),clearInterval(k.value),k.value=null});const H=()=>{a.value=y.query.type,A.value=y.query.verifyCode||"",a.value==1?(f.value=n("bindPhone"),E.value=!0):a.value==2?f.value=n("bindEmail"):a.value==3&&(f.value=n("googleAuthenticatorEn"),N())},P=()=>{if(a.value==2&&i.value==""){d(n("entryEmail"));return}if(a.value==1&&i.value==""){d(n("entryPhone"));return}if(v.value==""){d(n("请输入登录密码"));return}p.value=!0,a.value==1?F():a.value==2?q():a.value==3&&O()},h=async()=>{await G.getUserInfo(!0),d(n("bindSuccess")),p.value=!1,setTimeout(()=>{y.query.reset?B.go(-2):B.back()},1e3)},q=()=>{ne({target:i.value,email:i.value,verifcode:I.value,password:v.value,verifyCode:A.value}).then(e=>{h()}).catch(e=>{console.log(e),p.value=!1})},F=()=>{ue({target:"".concat(_.value," ").concat(i.value),phone:"".concat(_.value," ").concat(i.value),verifcode:I.value,password:v.value,verifyCode:A.value}).then(e=>{h()}).catch(e=>{console.log(e),p.value=!1})},N=()=>{le({}).then(e=>{g.value=e.google_auth_secret,T.value=e.google_auth_url,console.log(e)})},O=()=>{ie({secret:g.value,code:r.value}).then(e=>{e.google_auth_bind?h():d(err||n("bindFailed"))})},X=async()=>{try{await j(g.value),d(n("copySuccess"))}catch(e){console.error(e)}},z=async()=>{r.value=await navigator.clipboard.readText()},D=(e,t,b)=>{U.value=t,_.value=b},x=l(null),J=()=>{x.value.open()};return ae(r,(e,t)=>{r.value.length===6&&(m.value=!1)}),(e,t)=>{const b=re,Y=ce,Z=ve,K=me,M=de;return C(),V("div",ye,[u(b,null,{title:w(()=>[S(s(f.value),1)]),_:1}),o("div",Ae,[a.value==1||a.value==2?(C(),V("div",he,[o("div",be,[u($,{label:a.value==2?e.$t("email"):e.$t("phoneNum"),placeholderText:a.value==2?e.$t("entryEmail"):e.$t("entryPhone"),modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=c=>i.value=c),area:E.value,onSelectArea:J,dialCode:_.value,icon:U.value},null,8,["label","placeholderText","modelValue","area","dialCode","icon"])]),o("div",Ce,[u($,{label:e.$t("登录密码"),placeholderText:e.$t("请输入登录密码"),modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=c=>v.value=c),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])])])):R("",!0),a.value==3?(C(),V("div",Ve,[o("div",we,[o("div",Se,[u(se(ge),{src:T.value},{loading:w(()=>[u(Y,{type:"spinner",size:"20"})]),_:1},8,["src"])]),o("div",Be,[S(s(g.value)+" ",1),o("img",{src:_e,alt:"",onClick:N})]),o("p",Ee,s(e.$t("saveKeyTips")),1),o("div",{class:"copy textColor",onClick:X},s(e.$t("copy")),1)]),o("div",Ie,[o("div",null,s(e.$t("googleVerificationCode")),1),o("div",Te,[o("div",{class:"colorMain",onClick:t[2]||(t[2]=c=>r.value="")},s(e.$t("clear")),1),o("div",{class:"colorMain ml-30",onClick:z},s(e.$t("paste")),1)])]),u(Z,{value:r.value,gutter:16,focused:m.value,onFocus:t[3]||(t[3]=c=>m.value=!0),mask:!1},null,8,["value","focused"]),u(K,{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=c=>r.value=c),show:m.value,onBlur:t[5]||(t[5]=c=>m.value=!1)},null,8,["modelValue","show"]),t[6]||(t[6]=o("div",{class:"mt-2"},null,-1)),o("div",ke,[o("p",null,s(e.$t("precautions")),1),o("p",null,s(e.$t("precautionsTips1")),1),o("p",null,s(e.$t("precautionsTips2")),1)])])):R("",!0),u(M,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:p.value,onClick:P},{default:w(()=>[S(s(e.$t("confirm")),1)]),_:1},8,["loading"])]),u(pe,{ref_key:"controlChildRef",ref:x,title:e.$t("selectArea"),onGetName:D},null,8,["title"])])}}},Je=W(Ue,[["__scopeId","data-v-edbc1bb8"]]);export{Je as default};
