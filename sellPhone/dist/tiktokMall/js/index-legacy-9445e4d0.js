System.register(["./index-legacy-27bdf402.js","./index-legacy-55462584.js","./index-legacy-3b4df68c.js","./upload.api-legacy-60e563ea.js"],function(e,t){"use strict";var n,a,i,l,o,r,c,d,s,b,u,g,m,p,v,h,x,f,w,A,k,C,L,R,U;return{setters:[e=>{n=e._,a=e.e,i=e.$,l=e.o,o=e.c,r=e.b,c=e.w,d=e.a,s=e.F,b=e.E,u=e.x,g=e.v,m=e.r,p=e.T,v=e.B,h=e.a9,x=e.aa,f=e.d,w=e.t,A=e.ab,k=e.I},e=>{C=e.B},e=>{L=e.S,R=e.a},e=>{U=e.u}],execute:function(){var t=document.createElement("style");t.textContent=".banner-content[data-v-05b4cb50]{padding:0 15px 30px}.banner-content>.item[data-v-05b4cb50]{margin-top:20px}.banner-content>.item>.title[data-v-05b4cb50]{font-size:14px;color:#000}.banner-content>.item>.img-content[data-v-05b4cb50]{margin-top:10px;width:100%;height:calc(.15625*(100vw - 30px));background-color:#fff;border:1px solid #DDDDDD;border-radius:4px;overflow:hidden;position:relative}.banner-content>.item>.img-content>.close[data-v-05b4cb50]{position:absolute;width:24px;height:24px;border-radius:24px;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;top:5px;right:5px;color:#fff;z-index:3}.banner-content>.item>.img-content>input[data-v-05b4cb50]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:2;opacity:0}.banner-content>.item>.img-content>img[data-v-05b4cb50]{width:100%;height:100%}.banner-content>.item>.img-content>.default[data-v-05b4cb50]{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.banner-content>.item>.img-content>.default>img[data-v-05b4cb50]{width:26px;height:auto}.banner-content>.item>.img-content>.default>p[data-v-05b4cb50]{font-size:12px;line-height:14px;padding-top:2px;color:#aaa}.banner-content .submit-btn[data-v-05b4cb50]{width:100%;margin-top:40px}.banner-content .submit-btn[data-v-05b4cb50] .van-button--primary{background-color:var(--site-main-color);border-color:var(--site-main-color);border-radius:4px}.croper-content-modal[data-v-05b4cb50]{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:99}.croper-content-modal[data-v-05b4cb50] .van-nav-bar .van-icon{font-size:18px;color:#1f2025}\n",document.head.appendChild(t);const B=a({name:"ShopBanner",components:{VuePictureCropper:L},setup(){const{t:e}=g.useI18n(),t=m(localStorage.getItem("sellerId")||""),n=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAThSURBVHgB7ZxdTttaEMeHDyFEQMoOrnfQsIJrVgCR+Hy6zgpu7wpIV9DeFeA+QQhS6QpqVkC6gywhL8lLCPQ/xa4QTY5PSjxnWuYnRU7k48T5e3zOnJk5JjIMwzAMwzAUskRKODs7q29sbLxdWVn5i15GNh6Pb05OTvqkABUCn5+fRxD2C95GtBj6k8lkR4PIwQWuQNwCFSIHFbhCcQuCixxMYAFxC4KKHERgQXELgoksLnAAcQuCiCwqcEBxC8RFFhNYgbgFoiKLCKxI3AIxkSsXWKG4BSIizyUwT2drtdrew8PDG4hW9znm/v4+Jn3iFvSXl5czn4a4GANsbo6Ojq5pDrwF7na7b7E5hbhewv7B8EVp7+/vf/Rp7CVwp9NpLy0tnZLxAxjaO1hzu6xdqcCXl5cJNmdk/AS6v/+Oj48/uNosUzlmuTNAV3HK45KzjWvn1dXVHukdoDRQ39ra2nU1cAqMfuZvMpzAu2i49q+6dmrxGHAefQyyfbzlV/3Jq0GBwXk5NXIKHJABRE1x8tfD4fBrq9UazGqIQZjvsgTtY7SPSBnaBM7wah8eHt74HpC3/d4es8aEBx5NQmsReACXpw2X5396AZj2ptikFxcXnDxVMSnycdMqBSL0MFBsv1Tcp7Bvend3t819NwUmqMCw2nQ0GlUScOHvXFtb28bbuWIHiyZkF3ENS2tRhTSbTR4cm5jq84D5DwUgiAXzrQvvoFJxnwJL5kBVjwIQwoJ5QNtxuV5PgRvGcZBkxu4UXkTphWJLhofRXF1dvZUe+MQtmL2FENld/k0Mpu9IGFGBuWtYpLcwL3nkKyNBpC24TYGRtmIxgdl6EaD2ygJUCbqKDB6FV/+/CMQExp/KSA8pCSHZRaSkBMzyPpMQYm6aK4CDwP7MlFSelZ5F7DoWicmpLtz6+npvPB6TBCICc7zBtR8iJvRrRCXHThWY/WL4130SyNaIdBGSg4oveQC/ckQEhgWrE1gq0vZqLZgeU06VI+VFRKSMslzaoni1ApOQBUu5aREXaDgiaOmsA13JzDzbnNEvgGNFMtJifjB8T/5D2bR9rpCjK1zJ4vqEK5/T7XZjCEwSiM3kkO3dJSVAXLHshmQsIiE9xCSEZCyijqxCTIHJq0UjEkI0Hsy1ChQe0XOQDrjHXBRCgcir9CMSRDwnx6VNvDCGhMl/U/wOCpFVrkPkT/CLvTLLuRv2ohQ/++C80ilEKVWQugh4FI1arfaehMBvsS8dUQBCVvYknU6nPhqNWr41EvOSP0WFM8l7FIigtWmw5D1Y120VfTJ/J777S6iSqYLg1ZWAV4LeLtK7YG+Bq3hIQQW8lvpgHvjeYxLw7zyL/J7DMQZ6XCwZkxK0Vbhzji2F0G285/qFjwcHB9msxtzHbm5uNnDMLi5MonEVqtY1GhE9rrtIIDZ/7nFWhFNPEJK3Eb+4HUfFsI+komPzolXg5zQKAWGt9DuhYZD7ozGBK8YErhinwErT7aooK2BxCixZJPe7gsE3c+33eV4EP28nJmManHTdcTUo7YMnk0nLuoqpDFibskalAvPiEdwGOxpWTSqCDc5rAaWXF4HboMdLr0hREXUgeBb5gZf+siY+B8z93LT80V5vuLYLor+aJ1Dh/34dDof9qmLXhmEYhmEYhmEYhmEYhmF8AwdhLA50cpBqAAAAAElFTkSuQmCC",self.location),a=m([{name:`${e("storeBanner")} 1(1920X300)`,id:"banner1",dataURL:"",blobURL:"",file:"",imgUrl:""},{name:`${e("storeBanner")} 2(1920X300)`,id:"banner2",dataURL:"",blobURL:"",file:"",imgUrl:""},{name:`${e("storeBanner")} 3(1920X300)`,id:"banner3",dataURL:"",blobURL:"",file:"",imgUrl:""}]);p.loading({duration:0,message:e("loading"),forbidClick:!0}),v().then(e=>{a.value[0].dataURL=e.banner1||"",a.value[1].dataURL=e.banner2||"",a.value[2].dataURL=e.banner3||"",p.clear()}).catch(()=>{p.clear()});const i=m(!1),l=m(""),o=m(null),r=m(!1);return{bannerImg:n,bannerData:a,submitLoading:r,isShowModal:i,cropperImage:l,showBtn:t,t:e,selectFile:(e,t)=>{l.value="",a.value[t].dataURL="",a.value[t].blobURL="",a.value[t].file="",o.value=t;const{files:n}=e.target;if(!n||!n.length)return;const r=n[0],c=new FileReader;c.readAsDataURL(r),c.onload=()=>{l.value=String(c.result),i.value=!0}},getResult:async()=>{if(!R)return;const e=R.getDataURL(),t=await R.getBlob();if(!t)return;const n=await R.getFile();if(null===o.value)return i.value=!1,!1;a.value[o.value].dataURL=e,a.value[o.value].blobURL=URL.createObjectURL(t),a.value[o.value].file=n,i.value=!1},croperBack:()=>{R&&(R.clear(),R.reset(),i.value=!1)},submitHandle:async()=>{const t=a.value.filter(e=>e.file||e.remove);if(t.length){const i=t.filter(e=>e.file);r.value=!0;try{await(async e=>{for(let t=0;t<e.length;t++)await U({file:e[t].file,moduleName:e[t].id}).then(n=>{a.value.find(n=>n.id===e[t].id).imgUrl=n})})(i)}catch(n){return r.value=!1,!1}const l={};t.forEach(e=>{l[e.id]=e.imgUrl}),A(l).then(()=>{r.value=!1,a.value.map(e=>{e.file="",e.imgUrl="",e.remove=!1}),p.success(e("saveSuc"))}).catch(()=>{r.value=!1})}else p(e("noNeedSub"))},removeHandle:e=>{e.dataURL="",e.imgUrl="",e.blobURL="",e.file="",e.remove=!0}}}}),y={class:"banner-content"},S={class:"title"},E={class:"img-content"},F=["onClick"],Q=["onChange"],D=["src"],I={key:2,class:"default"},M=["src"],z={class:"submit-btn"},j={key:0,class:"croper-content-modal"};e("default",n(B,[["render",function(e,t,n,a,g,m){const p=h,v=k,A=C,L=x,R=i("VuePictureCropper");return l(),o("div",null,[r(p,{fixed:!0},{title:c(()=>[f(w(e.t("bannerSet")),1)]),_:1}),t[0]||(t[0]=d("div",{style:{height:"46px"}},null,-1)),d("div",y,[(l(!0),o(s,null,b(e.bannerData,(t,n)=>(l(),o("div",{key:t.id,class:"item"},[d("div",S,w(t.name),1),d("div",E,[t.dataURL?(l(),o("div",{key:0,class:"close",onClick:n=>e.removeHandle(t)},[r(v,{name:"cross"})],8,F)):u("",!0),d("input",{type:"file",accept:"image/jpg, image/jpeg, image/png, image/gif",onChange:t=>e.selectFile(t,n)},null,40,Q),t.dataURL?(l(),o("img",{key:1,src:t.dataURL,alt:""},null,8,D)):(l(),o("div",I,[d("img",{src:e.bannerImg,alt:""},null,8,M),d("p",null,w(e.t("addBanner")),1)]))])]))),128)),d("div",z,[r(A,{loading:e.submitLoading,type:"primary",size:"large",disabled:!e.showBtn,onClick:e.submitHandle},{default:c(()=>[f(w(e.showBtn?e.t("save"):e.t("商家入驻尚未完成")),1)]),_:1},8,["loading","disabled","onClick"])])]),e.isShowModal?(l(),o("div",j,[r(L,{title:e.t("selectPhotos"),"right-text":e.t("sure"),"left-arrow":"",fixed:"",onClickLeft:e.croperBack,onClickRight:e.getResult},null,8,["title","right-text","onClickLeft","onClickRight"]),r(R,{boxStyle:{width:"100%",height:"100%",backgroundColor:"#f8f8f8",margin:"auto"},img:e.cropperImage,options:{viewMode:1,dragMode:"crop",aspectRatio:6.4}},null,8,["img"])])):u("",!0)])}],["__scopeId","data-v-05b4cb50"]]))}}});
