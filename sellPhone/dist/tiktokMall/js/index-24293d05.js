import{_ as k,e as P,$ as N,o as v,c as C,b as n,w as L,a as t,t as b,n as I,x as j,v as Q,r as h,p as U,i as H,T as p,B as Z,a9 as z,aa as J,d as B,ab as M,I as W}from"./index-55507c28.js";import{B as K}from"./index-64f4bac7.js";import"./index-6e53b41f.js";import{F as D}from"./index-3bdff75a.js";import{S as Y,a as u}from"./index-e67ee6ff.js";import{u as E}from"./upload.api-93555138.js";import"./use-id-acc627d9.js";const T=P({name:"ShopBasicInfo",components:{VuePictureCropper:Y},setup(){const{t:e}=Q.useI18n(),o=h({}),R=JSON.parse(localStorage.getItem("shopInfo")||"{}"),w=h(R.shopInfo.id||""),i=U({name:"",contact:"",shopPhone:"",shopAddress:"",shopRemark:"",imInitMessage:""}),F=new URL("data:image/png;base64,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",self.location),V=H();p.loading({duration:0,message:e("loading"),forbidClick:!0}),Z().then(a=>{o.value=a,i.name=a.name,i.contact=a.contact,i.shopPhone=a.shopPhone,i.shopAddress=a.shopAddress,i.shopRemark=a.shopRemark,i.imInitMessage=a.imInitMessage,p.clear()}).catch(()=>{p.clear()});const d=h(!1),m=async()=>{const a={...i};if(!l.file&&!o.value.avatar){p("".concat(e("请设置")).concat(e("storeLogo")));return}if(!a.name){p("".concat(e("请设置")).concat(e("storeName")));return}if(a.shopPhone&&!/^\d{3,}$/.test(a.shopPhone))return p(e("电话格式有误")),!1;d.value=!0;let r="";if(l.file)try{r=await E({file:l.file,moduleName:"shopAvatar"})}catch(f){return console.log(f),d.value=!1,!1}r&&(a.avatar=r),d.value=!0,M(a).then(()=>{d.value=!1,document.dispatchEvent(new CustomEvent("headerRefresh")),p.success(e("saveSuc"))}).catch(()=>{d.value=!1})},c=h(!1),g=h(null),A=h(""),l=U({dataURL:"",blobURL:"",file:""});function s(a){A.value="",l.dataURL="",l.blobURL="",l.file="";const{files:r}=a.target;if(!r||!r.length)return;const f=r[0],y=new FileReader;y.readAsDataURL(f),y.onload=()=>{A.value=String(y.result),c.value=!0,g.value&&(g.value.value="")}}async function S(){if(!u)return;const a=u.getDataURL(),r=await u.getBlob();if(!r)return;const f=await u.getFile();l.dataURL=a,l.blobURL=URL.createObjectURL(r),l.file=f,c.value=!1}return{isArLang:V,avatarDefault:F,storeInfo:o,storeForm:i,submitLoading:d,showBtn:w,t:e,submitHandle:m,uploadInput:g,pic:A,result:l,isShowModal:c,selectFile:s,getResult:S,croperBack:()=>{u&&(u.clear(),u.reset(),c.value=!1)}}}}),G={class:"item avatar"},q={class:"info"},O=["src"],X=["src"],x={class:"item"},$={class:"item"},_={class:"item"},ee={class:"item"},oe={class:"item"},ae={key:0,class:"croper-content-modal"},te={class:"submit-btn"};function se(e,o,R,w,i,F){var l;const V=z,d=W,m=D,c=J,g=N("VuePictureCropper"),A=K;return v(),C("div",null,[n(V,{fixed:!0},{title:L(()=>[B(b(e.t("basicInfo")),1)]),_:1}),o[7]||(o[7]=t("div",{style:{height:"46px"}},null,-1)),t("div",{class:I(["form-content",{"is-ar":e.isArLang}])},[t("div",G,[t("p",null,b(e.t("storeLogo")),1),t("div",q,[t("div",{class:I(["avatar-img",{"is-ar":e.isArLang}])},[t("input",{ref:"uploadInput",type:"file",accept:"image/jpg, image/jpeg, image/png, image/gif",onChange:o[0]||(o[0]=(...s)=>e.selectFile&&e.selectFile(...s))},null,544),e.result.dataURL?(v(),C("img",{key:0,src:e.result.dataURL,alt:""},null,8,O)):(v(),C("img",{key:1,src:((l=e.storeInfo)==null?void 0:l.avatar)||e.avatarDefault.href,alt:""},null,8,X))],2),n(d,{name:"arrow",color:"#999",size:"12"})])]),t("div",x,[n(m,{modelValue:e.storeForm.name,"onUpdate:modelValue":o[1]||(o[1]=s=>e.storeForm.name=s),type:"text",label:e.t("storeName"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storeName")},null,8,["modelValue","label","placeholder"])]),t("div",$,[n(m,{modelValue:e.storeForm.contact,"onUpdate:modelValue":o[2]||(o[2]=s=>e.storeForm.contact=s),type:"text",label:e.t("contactPerson"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("contactPerson")},null,8,["modelValue","label","placeholder"])]),t("div",_,[n(m,{modelValue:e.storeForm.shopPhone,"onUpdate:modelValue":o[3]||(o[3]=s=>e.storeForm.shopPhone=s),type:"number",label:e.t("storePhone"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storePhone")},null,8,["modelValue","label","placeholder"])]),t("div",ee,[n(m,{modelValue:e.storeForm.shopAddress,"onUpdate:modelValue":o[4]||(o[4]=s=>e.storeForm.shopAddress=s),type:"text",label:e.t("storeAddress"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storeAddress")},null,8,["modelValue","label","placeholder"])])],2),t("div",{class:I(["remark-content",{"is-ar":e.isArLang}])},[t("p",null,b(e.t("storeProfile")),1),n(m,{modelValue:e.storeForm.shopRemark,"onUpdate:modelValue":o[5]||(o[5]=s=>e.storeForm.shopRemark=s),rows:"4",autosize:"",type:"textarea","label-width":0,label:"",placeholder:e.t("pleaseEnter")+e.t("storeProfile")},null,8,["modelValue","placeholder"])],2),t("div",{class:I(["form-content",{"is-ar":e.isArLang}])},[t("div",oe,[n(m,{modelValue:e.storeForm.imInitMessage,"onUpdate:modelValue":o[6]||(o[6]=s=>e.storeForm.imInitMessage=s),type:"text",label:e.t("进店欢迎语"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("进店欢迎语")},null,8,["modelValue","label","placeholder"])])],2),e.isShowModal?(v(),C("div",ae,[n(c,{title:e.t("selectPhotos"),"right-text":e.t("sure"),"left-arrow":"",fixed:"",onClickLeft:e.croperBack,onClickRight:e.getResult},null,8,["title","right-text","onClickLeft","onClickRight"]),n(g,{boxStyle:{width:"100%",height:"100%",backgroundColor:"#f8f8f8",margin:"auto"},img:e.pic,options:{viewMode:1,dragMode:"crop",aspectRatio:1}},null,8,["img"])])):j("",!0),t("div",te,[n(A,{loading:e.submitLoading,type:"primary",size:"large",disabled:!e.showBtn,onClick:e.submitHandle},{default:L(()=>[B(b(e.showBtn?e.t("save"):e.t("商家入驻尚未完成")),1)]),_:1},8,["loading","disabled","onClick"])])])}const ce=k(T,[["render",se],["__scopeId","data-v-9e31024c"]]);export{ce as default};
