import{_ as w,v as H,i as E,r as f,s as V,o as n,c as o,b as k,w as b,a as d,e as O,a9 as C,d as P,t as p,u as s,F as A,E as R,n as j,x as m,y as $,cE as B,cF as D,M as F,cG as J}from"./index-55507c28.js";import{P as U}from"./index-16851c38.js";import{L as q}from"./index-748d9839.js";import{E as G}from"./index-94a2e4c2.js";import{m as i}from"./config-d229b60a.js";import"./use-id-acc627d9.js";const K={class:"page-main-content"},Q={key:0,class:"list-content"},W=["onClick"],X={class:"title-content"},Y={class:"title"},Z={key:0,class:"txt"},ee=["innerHTML"],se=["innerHTML"],te=["innerHTML"],ne=["innerHTML"],ae=["innerHTML"],oe={key:0},le={key:1,class:"txt"},re=O({name:"MessageSystem"}),ie=Object.assign(re,{setup(ue){const{t:r}=H.useI18n(),M=E(),N=new URL("/www/png/name-20d65991.png",self.location),g=f([]),y=f(!1),_=f(!0),T=f(!1),v=f({pageSize:20,pageNum:1}),L=()=>{const t={...v.value,totalElements:-1,type:3,status:0,module:1};B(t).then(a=>{const c=a.elements||[];c.forEach(l=>{const u={};(l.varInfo?JSON.parse(l.varInfo):[]).forEach(e=>{u[e.code]=["complaintReason"].includes(e.code)?r(e.value):e.value}),l.timeStr=D(l.sendTime,!0),l.varObj=u}),g.value=v.value.pageNum===1?c:[...g.value,...c],_.value=!1,y.value=!1,T.value=a.totalPage===v.value.pageNum||!a.totalPage,v.value.pageNum+=1}).catch(()=>{T.value=!0,_.value=!1,y.value=!1})},z=()=>{_.value=!0,v.value.pageNum=1,L()},I=t=>{F({path:"/message/details",query:{id:t.id}}),t.status!==2&&J({ids:t.id}).then(()=>{t.status=2})},h=(t,a)=>{const l=(t.varInfo?JSON.parse(t.varInfo):[]).find(u=>u.code===a);return l?l.value:"0"},x=(t,a)=>{const l=(t.varInfo?JSON.parse(t.varInfo):[]).find(u=>u.code===a);return l?l.value:""};return V(()=>{document.addEventListener("systemListRefresh",()=>{z()},!1)}),(t,a)=>{const c=C,l=G,u=q,S=U;return n(),o("div",K,[k(c,{fixed:!0},{title:b(()=>[P(p(t.$t("系统消息")),1)]),_:1}),a[2]||(a[2]=d("div",{style:{height:"46px"}},null,-1)),k(S,{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value=e),"loading-text":t.$t("加载中"),"loosing-text":t.$t("释放以刷新"),"pulling-text":t.$t("下拉以刷新"),onRefresh:z},{default:b(()=>[k(u,{loading:_.value,"onUpdate:loading":a[0]||(a[0]=e=>_.value=e),finished:T.value,"loading-text":s(r)("loading"),"finished-text":s(r)("product.3"),onLoad:L},{default:b(()=>[g.value.length?(n(),o("div",Q,[(n(!0),o(A,null,R(g.value,e=>(n(),o("div",{key:e.id,class:"item-list",onClick:ce=>I(e)},[d("div",X,[d("div",Y,[e.status===1?(n(),o("div",{key:0,class:j(["tips",{"is-ar":s(M)}])},null,2)):m("",!0),d("p",null,p(s(r)(s(i)[e.bizType].title)),1)]),d("p",null,p(e.timeStr),1)]),s(i)[e.bizType].key?(n(),o("p",Z,[s(i)[e.bizType].key==="creditScore"?(n(),o("span",{key:0,innerHTML:s(r)("systemMsgScore",{creditScore:h(e,s(i)[e.bizType].key)})},null,8,ee)):e.bizType==="inbox_recharge_success"?(n(),o("span",{key:1,innerHTML:s(r)("rechargeSuccessTips",{orderAmount:h(e,"orderAmount")})},null,8,se)):e.bizType==="inbox_withdraw_success"?(n(),o("span",{key:2,innerHTML:s(r)("withdrawalSuccessTips",{orderAmount:h(e,"orderAmount")})},null,8,te)):e.bizType==="inbox_store_audit_fail"?(n(),o("span",{key:3,innerHTML:s(r)("storeAuthenticationFailedTips",{shop_name:x(e,"shop_name"),reason:x(e,"reason")})},null,8,ne)):e.bizType==="inbox_store_audit_success"?(n(),o("span",{key:4,innerHTML:s(r)("storeAuthenticationPassedTips",{shop_name:x(e,"shop_name")})},null,8,ae)):(n(),o(A,{key:5},[d("span",null,p(s(r)(s(i)[e.bizType].txt)),1),d("span",null,p(h(e,s(i)[e.bizType].key)),1),s(i)[e.bizType].txt1?(n(),o("span",oe,p(s(r)(s(i)[e.bizType].txt1)),1)):m("",!0)],64))])):(n(),o("p",le,p(s(r)(s(i)[e.bizType].txt,e.varObj)),1))],8,W))),128))])):m("",!0),!g.value.length&&!_.value?(n(),$(l,{key:1,image:s(N).href},null,8,["image"])):m("",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"])])}}}),ye=w(ie,[["__scopeId","data-v-17f96486"]]);export{ye as default};
