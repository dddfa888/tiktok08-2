import{_ as A,i as T,v as Z,a0 as H,l as K,r as a,m as Q,a1 as W,q as X,o as d,c,a as s,b as m,w as x,u as i,a8 as Y,t as n,d as M,n as V,e as ee,a2 as se,Z as p,F as te,E as oe,x as b,J as ae,I as ne}from"./index-55507c28.js";import{P as le}from"./index-16851c38.js";import{L as ie}from"./index-748d9839.js";import"./index-6e53b41f.js";import"./index-3bdff75a.js";import{S as re}from"./index-29b5376b.js";import{_ as de}from"./search-icon-e5826669.js";import{_ as ce}from"./more-b1b21d09.js";import{s as ue,m as me}from"./product.api-71b8732b.js";import"./use-id-acc627d9.js";import"./index-260e30ee.js";import"./___vite-browser-external_commonjs-proxy-685e0cd7.js";const pe={class:"product"},ve={class:"flex ml-4 mr-4 product-header"},fe={key:0,class:"moeny icon"},_e=["src"],ge={key:1,class:"moeny"},he={class:"title"},ye={class:"moeny"},xe={class:"title"},Pe={class:"hot-title ml-4 mr-4 mt-4 mb-4"},Ie=["onClick"],ke={class:"flex-1 flex left"},Ne={class:"product-img-wrap w-20 h-20"},Se=["src"],Ce={key:0,class:"take_off"},$e={class:"product-info flex-1"},Le={class:"name-content"},Me=["onClick"],Ve={class:"Specification"},be={style:{"margin-left":"20px"}},we={class:"money-content"},Re={key:0,class:"dis"},Ge=ee({name:"ProductIndex"}),Ee=Object.assign(Ge,{setup(De){const w=T();Z.useI18n(),H();const u=K();let v=a("");a(!1);let f=a(1),P=a(0),I=a(0),h=a(0),R=a({});const r=a([]),y=a(!1),_=a(!1),k=a(!1),G="tiktokMall",E=Q(()=>["int"].includes(G)),N=a(!0);W(()=>{if(!N.value){sessionStorage.getItem("productReload")&&(sessionStorage.removeItem("productReload"),g(!0));const e=sessionStorage.getItem("currentProductId");if(e){const o=r.value.findIndex(l=>l.id===e);sessionStorage.getItem("productDelete")?(r.value.splice(o,1),h.value-=1,sessionStorage.removeItem("productDelete")):g(!0),sessionStorage.removeItem("currentProductId")}}});const g=e=>{e&&(f.value=1);let o={pageNum:f.value,pageSize:20};me(o).then(l=>{N.value=!1,_.value&&(_.value=!1),P.value=l.evaluations,I.value=l.systemGoodsNum,h.value=l.sellerGoodsNum,e?r.value=l.pageList||[]:r.value=f.value===1?l.pageList:[...r.value,...l.pageList],k.value=r.value.length>=l.sellerGoodsNum,f.value++,y.value=!1})},S=()=>{g(!0)},D=()=>{u.push("/search?id=1")},U=()=>{u.push("/productPage/list")},q=()=>{u.push("/productPage/comment")},B=e=>{u.push({path:"/productPage/details",query:{item:JSON.stringify(e)}})},C=a(""),$=a("");ue().then(e=>{C.value=e.sysParaMin,$.value=e.sysParaMax});const F=e=>{e.sysParaMin=C.value,e.sysParaMax=$.value,u.push({path:"/productPage/productEdit",query:{item:JSON.stringify(e)}}),R.value=e};return X(()=>{document.addEventListener("langChange",()=>{S()})}),(e,o)=>{const l=re,L=ne,J=ie,O=le;return d(),c("div",pe,[s("div",{onClick:D},[m(l,{class:"search-wrap",disabled:"",modelValue:i(v),"onUpdate:modelValue":o[0]||(o[0]=t=>Y(v)?v.value=t:v=t),placeholder:e.$t("请输入搜索商品名称"),clearable:""},{"left-icon":x(t=>[...o[3]||(o[3]=[s("img",{class:"search-icon",src:de},null,-1)])]),_:1},8,["modelValue","placeholder"])]),s("div",ve,[s("div",{class:"flex-1 text-center after",onClick:U},[E.value?(d(),c("div",fe,[s("img",{src:i(se)("image/order/diamond.svg"),alt:""},null,8,_e)])):(d(),c("div",ge,n(i(p)(i(I),0)),1)),s("div",he,[M(n(e.$t("商品库"))+" ",1),m(L,{name:"arrow"})])]),s("div",{class:"flex-1 text-center",onClick:q},[s("div",ye,n(i(P)),1),s("div",xe,[M(n(e.$t("评论"))+" ",1),m(L,{name:"arrow"})])])]),s("div",Pe,n(e.$t("店铺产品"))+"("+n(i(p)(i(h),0))+")",1),s("div",{class:V(["list ml-4 mr-4 mt-4 mb-4 list-content",{"is-ar":i(w)}])},[m(O,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=t=>_.value=t),onRefresh:S,"loading-text":e.$t("加载中"),"loosing-text":e.$t("释放以刷新"),"pulling-text":e.$t("下拉以刷新")},{default:x(()=>[m(J,{ref:"vanList",loading:y.value,"onUpdate:loading":o[1]||(o[1]=t=>y.value=t),"loading-text":e.$t("加载中"),finished:k.value,"finished-text":e.$t("noMore"),onLoad:g},{default:x(()=>[(d(!0),c(te,null,oe(r.value,(t,j)=>(d(),c("div",{class:V(["item pl-3 pr-3 pb-3 pt-3 flex",{"goods-removed":t.isShelf/1===0}]),onClick:z=>B(t),key:j},[s("div",ke,[s("div",Ne,[s("img",{class:"product-img",src:t.imgUrl1},null,8,Se),t.isShelf/1===0?(d(),c("div",Ce,n(e.$t("已下架")),1)):b("",!0)]),s("div",$e,[s("div",Le,[s("p",null,n(t.name),1),s("div",{class:"more",onClick:ae(z=>F(t),["stop"])},[...o[4]||(o[4]=[s("img",{class:"more-icon",src:ce},null,-1)])],8,Me)]),s("div",Ve,[s("span",null,n(t.categoryName),1),s("span",be,n(e.$t("销量"))+": "+n(i(p)(t.soldNum,0)),1)]),s("div",we,[s("p",null,"$"+n(i(p)(t.sellingPrice)),1),t.discountPrice?(d(),c("p",Re,n(e.$t("折扣价"))+" $"+n(i(p)(t.discountPrice)),1)):b("",!0)])])])],10,Ie))),128))]),_:1},8,["loading","loading-text","finished","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"]),o[5]||(o[5]=s("div",{class:"safe-area-inset-bottom"},null,-1))],2)])}}}),Ke=A(Ee,[["__scopeId","data-v-72e3c9a5"]]);export{Ke as default};
