System.register(["./index-legacy-27bdf402.js","./index-legacy-0ab88001.js","./index-legacy-00472a3a.js","./index-legacy-591c4a77.js","./index-legacy-03ce2630.js","./index-legacy-dd9c3ae5.js","./index-legacy-2554924f.js","./index-legacy-fc1ecc31.js","./index-legacy-55462584.js","./browser-legacy-e1de2784.js","./index-legacy-24588068.js","./exchange.api-legacy-0cfc7ff9.js","./upload.api-legacy-60e563ea.js","./index-legacy-3b191162.js","./index-legacy-1603ab3e.js","./use-id-legacy-dafc5df9.js","./index-legacy-4ee839b1.js","./index-legacy-e01b4a75.js"],function(e,a){"use strict";var t,l,n,o,i,r,c,u,d,s,p,b,v,g,m,x,h,y,k,f,w,_,j,C,D,V,P,T,U,z,q,B,R,A,H,N,I,S,E,G,L,M;return{setters:[e=>{t=e._,l=e.i,n=e.j,o=e.l,i=e.a0,r=e.v,c=e.r,u=e.f,d=e.q,s=e.T,p=e.m,b=e.s,v=e.o,g=e.c,m=e.b,x=e.w,h=e.u,y=e.x,k=e.a,f=e.t,w=e.d,_=e.b6,j=e.M,C=e.a9,D=e.ap,V=e.n},e=>{P=e.P},null,e=>{T=e.F},null,null,null,e=>{U=e.U},e=>{z=e.B},e=>{q=e.b},e=>{B=e.E,R=e.i},e=>{A=e.c,H=e.t,N=e.i,I=e.j,S=e.k,E=e.l},e=>{G=e.u},e=>{L=e.E},e=>{M=e.u},null,null,null],execute:function(){var a=document.createElement("style");a.textContent='.pay-button .pay-button-content[data-v-b47e76a2]{width:300px;height:180px;position:fixed;z-index:99999;top:50%;left:50%;background-color:#fff;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-radius:10px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:24px;text-align:center}.pay-button .pay-button-content .pay-button-break[data-v-b47e76a2]{width:24px;height:24px;border-radius:50%;background-color:var(--site-main-color);color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-bottom:24px}.pay-button .pay-button-content .pay-button-title[data-v-b47e76a2]{font-size:16px;color:#0c0c0c;margin-bottom:24px;text-align:center}.pay-button .pay-button-content .pay-button-button[data-v-b47e76a2]{height:40px;background-color:var(--site-main-color);border-radius:5px;padding:0 10px;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.pay-button .pay-button-content .pay-button-button.pay-button-break[data-v-b47e76a2]{background-color:#fff;color:var(--site-main-color);border:1px solid var(--site-main-color)}.pay-button[data-v-b47e76a2]:after{position:fixed;width:100%;height:100%;content:"";top:0;left:0;background-color:rgba(0,0,0,.5);z-index:9999}.rechargeDetail-all.is-ar[data-v-b47e76a2]{padding-left:0;padding-right:6px}.rechargeDetail[data-v-b47e76a2]{padding:71px 25px 25px;min-height:100vh;background-color:#fff}.rechargeDetail[data-v-b47e76a2] .inputCom .label{font-size:12px}.rechargeDetail[data-v-b47e76a2] .inputCom input{font-size:14px!important}.rechargeDetail .qrCode[data-v-b47e76a2]{width:160px;height:160px;margin:0 auto}.rechargeDetail .download[data-v-b47e76a2]{margin:10px 0 20px;text-align:center}.rechargeDetail .download[data-v-b47e76a2] .van-button{border-radius:4px}.rechargeDetail .my-uploader>div[data-v-b47e76a2]:nth-child(1){font-size:12px}.rechargeDetail .my-uploader[data-v-b47e76a2] .van-uploader{margin-top:10px;margin-bottom:20px;border:1px dashed #ddd;border-radius:4px}.rechargeDetail .my-uploader[data-v-b47e76a2] .van-uploader .van-uploader__upload{width:110px;height:110px;background:transparent;margin:0}.rechargeDetail .my-uploader[data-v-b47e76a2] .van-uploader .van-uploader__preview{width:110px;height:110px;margin:0}.rechargeDetail .my-uploader[data-v-b47e76a2] .van-uploader .van-uploader__preview .van-uploader__preview-image{width:100%;height:100%}.rechargeDetail .tips[data-v-b47e76a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:12px;padding-bottom:10px}.rechargeDetail .tips span[data-v-b47e76a2]:nth-child(1){color:#999}.rechargeDetail .tips span[data-v-b47e76a2]:nth-child(2){color:#1552f0}.rechargeDetail[data-v-b47e76a2] .inputBackground{background:transparent}.rechargeDetail[data-v-b47e76a2] .inputBackground input{padding-left:0}.rechargeDetail[data-v-b47e76a2] .inputBackground.iptbox{border:1px solid #eeeeee}.rechargeDetail-all[data-v-b47e76a2]{font-size:14px;color:#1552f0;padding-left:6px}.rechargeDetail-unit[data-v-b47e76a2]{font-size:14px;padding-left:6px}.popup-content[data-v-b47e76a2]{padding:80px 30px 0}.icon-type-content[data-v-b47e76a2]{margin-bottom:1.25rem}.icon-type-content[data-v-b47e76a2] .van-cell{border:1px solid rgb(238,238,238);box-sizing:border-box;height:44px;border-radius:4px;padding:0 11px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.icon-type-content[data-v-b47e76a2] .van-cell:after{height:0!important;border-bottom:none!important}.icon-type-content[data-v-b47e76a2] .van-cell input::-webkit-input-placeholder{color:#868c9a!important}.bank-input-content[data-v-b47e76a2] .inputCom{padding-bottom:10px}.bank-input-content .recharge-limit[data-v-b47e76a2]{font-size:12px;text-align:right}.bank-input-content .recharge-limit span[data-v-b47e76a2]{color:#1552f0}.btn-content[data-v-b47e76a2]{margin-top:10px;background-color:var(--site-main-color);border-color:var(--site-main-color)}.btn-content.gap[data-v-b47e76a2]{margin-top:30px}\n',document.head.appendChild(a);const Q={key:0,class:"rechargeDetail"},$=["src"],F={class:"download"},O={class:"my-uploader"},J={key:1,class:"rechargeDetail bank-input-content"},K={key:0,class:"icon-type-content"},W={class:"mb-2.5 text-xs",style:{color:"#333"}},X={key:1,class:"recharge-limit"},Y={key:2,class:"recharge-limit"},Z={key:2,class:"pay-button"},ee={class:"pay-button-content"},ae={class:"pay-button-title"};e("default",t({__name:"detail",setup(e){const a=l(),t=n(),te=o(),le=i(),{t:ne}=r.useI18n();c(1e9);const oe=c(""),ie=c(""),re=c(""),ce=c(""),ue=c(""),de=c(""),se=c(""),pe=c(!1),be=c([]),ve=c([]),ge=c(""),{toClipboard:me}=M(),xe=e=>[null,void 0,""].includes(e);u(oe,e=>{const a=be.value.find(a=>a.blockchain_name===e),t=a?.address??"";t&&(ie.value=t,ue.value=a?.fee??"",(async e=>{de.value=await q.toDataURL(e)})(t))},{deep:!0});const he=c(!1),ye=c(50),ke=c(3e4);d(async()=>{await fe(),await(()=>{const e=le.params.id;if(qe.value=e,e)if(s.loading({duration:0,forbidClick:!0}),"bank"!==e)A().then(a=>{const t=a.filter(a=>a.coin===e.toUpperCase()).map(e=>({...e,label:e.blockchain_name,value:e.blockchain_name}));t.length&&(oe.value=t[0].value),be.value=t??[]});else{const{g:e,key:a}=le.query;he.value=Boolean(e),e?H().then(e=>{const t=e.find(e=>e.productType===a);t&&(ye.value=t.range[0].min_amount,ke.value=t.range[0].max_amount)}):H().then(e=>{const a=e.find(e=>"Bank"===e.productType);Be.value=a.range||[]})}else s(ne("参数错误")),setTimeout(()=>{te.back()},1500)})(),s.clear()});const fe=()=>{const e=Number(t.userInfo.kyc_status);let a="";switch(e){case 0:a="未认证";break;case 1:a="审核中";break;case 3:a="审核失败"}2!==e&&(s(ne(a)),setTimeout(()=>{te.back()},1500))},we=p(()=>{const e=ce.value,a=ue.value??1;return R.times(e,a)});p(()=>{const e=re.value;return String(e).length<6});const _e=p(()=>`1:${ue.value}`),je=()=>{te.push({name:"RechargeRecord"})},Ce=()=>{_(de.value,"QRCode")},De=e=>{s(ne("fileMaxLimit"))},Ve=e=>{e.status="uploading",e.message=ne("uploading"),G({file:e.file,moduleName:"recharge"}).then(a=>{e.status="success",e.message=ne("uploadSuccess"),ge.value=a}).catch(()=>{e.message=ne("上传失败"),e.status="failed"})},Pe=async()=>{try{await me(ie.value),s(ne("copySuccess"))}catch(e){console.error(e)}},Te=c(""),Ue=()=>new Promise((e,a)=>{I({session_token:t?.userInfo?.token}).then(a=>{Te.value=a.session_token,e()}).catch(()=>{a()})}),ze=async()=>{if(xe(oe.value))return void s(ne("blockchainNetworkRequire"));if(xe(ce.value))return void s(ne("rechargeAmountRequire"));if(xe(ge.value))return void s(ne("uploadPaymentImageRequire"));const e={session_token:Te.value,from:"123",blockchain_name:oe.value,channel_address:ie.value,amount:ce.value,img:ge.value,coin:(le.params.id??"").toUpperCase(),tx:""};pe.value=!0,Ue().then(()=>{N(e).then(e=>{s(ne("rechargeApplySuccess")),setTimeout(()=>{je()},1500)}).finally(()=>{pe.value=!1})})},qe=c(""),Be=c([]),Re=c(!1),Ae=c(""),He=p(()=>Be.value.map(e=>({text:e.bank_code,value:e.bank_code}))),Ne=p(()=>{const e=Be.value.find(e=>e.bank_code===Ae.value);return e||null}),Ie=({value:e})=>{Ae.value=e,Re.value=!1},Se=()=>{if(!Ae.value&&!he.value)return void s(ne("请选择充值币种"));if(!ce.value)return void s(ne("请输入充值金额"));const e=Number(ce.value);if(isNaN(e))s(ne("请输入充值金额"));else{const a=he.value?ye.value:Ne.value.min_amount,t=he.value?ke.value:Ne.value.max_amount;if(e<a)return void s(ne("充值金额不得低于最小限额"));if(e>t)return void s(ne("充值金额不得高于最大限额"));const{g:l}=le.query;pe.value=!0,Ue().then(async()=>{const{key:e}=le.query,a={session_token:Te.value,amount:ce.value,pageUrl:"gcash"===e?null:window.location.href+"/www/#/my"};let t="PHP_recharge";switch(e){case"GCash pay":t="PHP_recharge5";break;case"gcash":t="PHP_recharge";break;case"GCash2.0":t="PHP_recharge2";break;case"GCash3.0":t="PHP_recharge3";break;case"Maya":t="PHP_recharge4"}const n=l?S:E;l||(a.frenchCurrency=Ae.value),await n(a,t).then(e=>{ce.value="",pe.value=!1,se.value=e}).catch(()=>{pe.value=!1})})}};return b(()=>{Ue()}),(e,t)=>{const l=C,n=z,o=U,i=T,r=P,c=D;return v(),g("div",null,[m(l,{fixed:""},{title:x(()=>[k("div",null,f(h(ne)("recharge")),1)]),right:x(()=>[k("div",{onClick:je},f(h(ne)("rechargeRecord")),1)]),_:1}),qe.value&&"bank"!==qe.value?(v(),g("div",Q,[m(B,{list:be.value,label:h(ne)("blockchainNetwork"),modelValue:oe.value,"onUpdate:modelValue":t[0]||(t[0]=e=>oe.value=e)},null,8,["list","label","modelValue"]),de.value?(v(),g("img",{key:0,class:"qrCode",src:de.value,alt:""},null,8,$)):y("",!0),k("div",F,[m(n,{type:"default",onClick:Ce},{default:x(()=>[w(f(h(ne)("saveQrCode")),1)]),_:1})]),m(L,{label:h(ne)("rechargeAddress"),modelValue:ie.value,"onUpdate:modelValue":t[1]||(t[1]=e=>ie.value=e),"clear-btn":!1,readonly:"",typeText:"text"},{rightBtn:x(()=>[k("div",{class:V(["rechargeDetail-all",{"is-ar":h(a)}]),onClick:Pe},f(h(ne)("copy")),3)]),_:1},8,["label","modelValue"]),m(L,{label:h(ne)("rechargeAmount"),placeholderText:h(ne)("rechargeAmountTips"),modelValue:ce.value,"onUpdate:modelValue":t[2]||(t[2]=e=>ce.value=e),typeText:"number"},null,8,["label","placeholderText","modelValue"]),m(L,{label:h(ne)("expectedAmount",{ratio:_e.value}),modelValue:we.value,"onUpdate:modelValue":t[3]||(t[3]=e=>we.value=e),maxLength:18,clearBtn:!1,readonly:"",typeText:"number"},{rightBtn:x(()=>[...t[11]||(t[11]=[k("div",{class:"rechargeDetail-unit"},f("USDT"),-1)])]),_:1},8,["label","modelValue"]),k("div",O,[k("div",null,f(h(ne)("uploadPaymentImage")),1),m(o,{modelValue:ve.value,"onUpdate:modelValue":t[4]||(t[4]=e=>ve.value=e),"max-size":1024e4,onOversize:De,"after-read":Ve,"max-count":1},null,8,["modelValue"])]),m(n,{class:"w-full btn-content",type:"primary",loading:pe.value,onClick:ze},{default:x(()=>[w(f(h(ne)("submit")),1)]),_:1},8,["loading"])])):y("",!0),"bank"===qe.value?(v(),g("div",J,[he.value?y("",!0):(v(),g("div",K,[k("div",W,f(h(ne)("选择币种")),1),m(i,{modelValue:Ae.value,"onUpdate:modelValue":t[5]||(t[5]=e=>Ae.value=e),readonly:"",name:"picker",placeholder:h(ne)("请选择充值币种"),onClick:t[6]||(t[6]=e=>Re.value=!0)},null,8,["modelValue","placeholder"]),m(c,{show:Re.value,"onUpdate:show":t[8]||(t[8]=e=>Re.value=e),position:"bottom"},{default:x(()=>[m(r,{columns:He.value,"cancel-button-text":h(ne)("cancel"),"confirm-button-text":h(ne)("confirm"),onConfirm:Ie,onCancel:t[7]||(t[7]=e=>Re.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])])),m(L,{label:h(ne)("充值金额"),placeholderText:h(ne)("请输入充值金额"),modelValue:ce.value,"onUpdate:modelValue":t[9]||(t[9]=e=>ce.value=e),typeText:"number"},null,8,["label","placeholderText","modelValue"]),Ae.value&&Ne.value&&!he.value?(v(),g("div",X,[w(f(h(ne)("充值限额"))+"：",1),k("span",null,f(Ne.value.min_amount),1),t[12]||(t[12]=w(" ~ ",-1)),k("span",null,f(Ne.value.max_amount),1)])):y("",!0),he.value?(v(),g("div",Y,[w(f(h(ne)("充值限额"))+"：",1),k("span",null,f(ye.value),1),t[13]||(t[13]=w(" ~ ",-1)),k("span",null,f(ke.value),1)])):y("",!0),m(n,{class:"w-full btn-content gap",type:"primary",loading:pe.value,onClick:Se},{default:x(()=>[w(f(h(ne)("submit")),1)]),_:1},8,["loading"])])):y("",!0),se.value?(v(),g("div",Z,[k("div",ee,[k("span",ae,f(h(ne)("请前往{_$1}继续完成支付",{_$1:h(le).query.key})),1),k("div",{class:"pay-button-button",onClick:t[10]||(t[10]=e=>{return a=se.value,se.value="",void j(a,!0);var a})},f(h(ne)("继续支付")),1)])])):y("",!0)])}}},[["__scopeId","data-v-b47e76a2"]]))}}});
