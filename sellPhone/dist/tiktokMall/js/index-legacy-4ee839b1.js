System.register(["./index-legacy-27bdf402.js"],function(e,t){"use strict";var a,i,l,o,u,n,s,r,v,c,h,f,p,d,g,w,m,b,y,C,x,z,$,M,S;return{setters:[e=>{a=e.aq,i=e.aG,l=e.as,o=e.ax,u=e.e,n=e.r,s=e.p,r=e.aI,v=e.ar,c=e.m,h=e.ay,f=e.f,p=e.by,d=e.bz,g=e.q,w=e.a1,m=e.bA,b=e.bB,y=e.ac,C=e.b,x=e.bC,z=e.s,$=e.aJ,M=e.aC,S=e.av}],execute:function(){const[t,R]=a("swipe"),T={loop:i,width:l,height:l,vertical:Boolean,autoplay:o(0),duration:o(500),touchable:i,lazyRender:Boolean,initialSwipe:o(0),indicatorColor:String,showIndicators:i,stopPropagation:i},I=Symbol(t);var P=u({name:t,props:T,emits:["change"],setup(e,{emit:t,slots:a}){const i=n(),l=n(),o=s({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),u=r(),{children:S,linkChildren:T}=v.useChildren(I),P=c(()=>S.length),O=c(()=>o[e.vertical?"height":"width"]),X=c(()=>e.vertical?u.deltaY.value:u.deltaX.value),Y=c(()=>o.rect?(e.vertical?o.rect.height:o.rect.width)-O.value*P.value:0),k=c(()=>Math.ceil(Math.abs(Y.value)/O.value)),B=c(()=>P.value*O.value),D=c(()=>(o.active+P.value)%P.value),q=c(()=>{const t=e.vertical?"vertical":"horizontal";return u.direction.value===t}),A=c(()=>{const t={transitionDuration:`${o.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${o.offset}px)`};if(O.value){const a=e.vertical?"height":"width",i=e.vertical?"width":"height";t[a]=`${B.value}px`,t[i]=e[i]?`${e[i]}px`:""}return t}),E=(t,a=0)=>{let i=t*O.value;e.loop||(i=Math.min(i,-Y.value));let l=a-i;return e.loop||(l=M(l,Y.value,0)),l},j=({pace:a=0,offset:i=0,emitChange:l})=>{if(P.value<=1)return;const{active:u}=o,n=(t=>{const{active:a}=o;return t?e.loop?M(a+t,-1,P.value):M(a+t,0,k.value):a})(a),s=E(n,i);if(e.loop){if(S[0]&&s!==Y.value){const e=s<Y.value;S[0].setOffset(e?B.value:0)}if(S[P.value-1]&&0!==s){const e=s>0;S[P.value-1].setOffset(e?-B.value:0)}}o.active=n,o.offset=s,l&&n!==u&&t("change",D.value)},G=()=>{o.swiping=!0,o.active<=-1?j({pace:P.value}):o.active>=P.value&&j({pace:-P.value})},H=()=>{G(),u.reset(),v.doubleRaf(()=>{o.swiping=!1,j({pace:1,emitChange:!0})})};let J;const L=()=>clearTimeout(J),V=()=>{L(),e.autoplay>0&&P.value>1&&(J=setTimeout(()=>{H(),V()},+e.autoplay))},W=(t=+e.initialSwipe)=>{if(!i.value)return;const a=()=>{var a,l;if(!x(i)){const t={width:i.value.offsetWidth,height:i.value.offsetHeight};o.rect=t,o.width=+(null!=(a=e.width)?a:t.width),o.height=+(null!=(l=e.height)?l:t.height)}P.value&&(t=Math.min(P.value-1,t)),o.active=t,o.swiping=!0,o.offset=E(t),S.forEach(e=>{e.setOffset(0)}),V()};x(i)?z().then(a):a()},F=()=>W(o.active);let K;const N=t=>{e.touchable&&(u.start(t),K=Date.now(),L(),G())},Q=()=>{if(!e.touchable||!o.swiping)return;const t=Date.now()-K,a=X.value/t;if((Math.abs(a)>.25||Math.abs(X.value)>O.value/2)&&q.value){const t=e.vertical?u.offsetY.value:u.offsetX.value;let a=0;a=e.loop?t>0?X.value>0?-1:1:0:-Math[X.value>0?"ceil":"floor"](X.value/O.value),j({pace:a,emitChange:!0})}else X.value&&j({pace:0});o.swiping=!1,V()},U=(t,a)=>{const i=a===D.value,l=i?{backgroundColor:e.indicatorColor}:void 0;return C("i",{style:l,class:R("indicator",{active:i})},null)};return h({prev:()=>{G(),u.reset(),v.doubleRaf(()=>{o.swiping=!1,j({pace:-1,emitChange:!0})})},next:H,state:o,resize:F,swipeTo:(t,a={})=>{G(),u.reset(),v.doubleRaf(()=>{let i;i=e.loop&&t===P.value?0===o.active?0:t:t%P.value,a.immediate?v.doubleRaf(()=>{o.swiping=!1}):o.swiping=!1,j({pace:i-o.active,emitChange:!0})})}}),T({size:O,props:e,count:P,activeIndicator:D}),f(()=>e.initialSwipe,e=>W(+e)),f(P,()=>W(o.active)),f(()=>e.autoplay,V),f([p,d],F),f(v.usePageVisibility(),e=>{"visible"===e?V():L()}),g(W),w(()=>W(o.active)),m(()=>W(o.active)),b(L),y(L),v.useEventListener("touchmove",t=>{e.touchable&&o.swiping&&(u.move(t),q.value)&&(!e.loop&&(0===o.active&&X.value>0||o.active===P.value-1&&X.value<0)||($(t,e.stopPropagation),j({offset:X.value})))},{target:l}),()=>{var t;return C("div",{ref:i,class:R()},[C("div",{ref:l,style:A.value,class:R("track",{vertical:e.vertical}),onTouchstartPassive:N,onTouchend:Q,onTouchcancel:Q},[null==(t=a.default)?void 0:t.call(a)]),a.indicator?a.indicator({active:D.value,total:P.value}):e.showIndicators&&P.value>1?C("div",{class:R("indicators",{vertical:e.vertical})},[Array(P.value).fill("").map(U)]):void 0])}}});e("a",S(P));const[O,X]=a("swipe-item");var Y=u({name:O,setup(e,{slots:t}){let a;const i=s({offset:0,inited:!1,mounted:!1}),{parent:l,index:o}=v.useParent(I);if(!l)return;const u=c(()=>{const e={},{vertical:t}=l.props;return l.size.value&&(e[t?"height":"width"]=`${l.size.value}px`),i.offset&&(e.transform=`translate${t?"Y":"X"}(${i.offset}px)`),e}),n=c(()=>{const{loop:e,lazyRender:t}=l.props;if(!t||a)return!0;if(!i.mounted)return!1;const u=l.activeIndicator.value,n=l.count.value-1,s=0===u&&e?n:u-1,r=u===n&&e?0:u+1;return a=o.value===u||o.value===s||o.value===r,a});return g(()=>{z(()=>{i.mounted=!0})}),h({setOffset:e=>{i.offset=e}}),()=>{var e;return C("div",{class:X(),style:u.value},[n.value?null==(e=t.default)?void 0:e.call(t):null])}}});e("S",S(Y))}}});
