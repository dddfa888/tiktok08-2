import{aq as ae,as as X,aD as K,ax as se,aG as te,aH as oe,e as le,aI as ne,r as L,m as re,ar as J,b as f,aJ as ie,I as F,au as ce,av as ue,_ as ge,i as _e,v as de,o as h,c as y,w as U,a as r,u,a9 as me,d as ve,t as I,F as M,E as j,n as W,x as z,Z as fe,ae as pe,y as he,aK as Ae,aL as be,aM as we,aN as Ve,aO as ye,aP as xe,aQ as Ie,aR as Le,aS as Be,aT as Ne,aU as Ce,aV as Te,aW as ke,aX as Ee,aY as Re,aZ as Se,a_ as Ge,a$ as Je,b0 as Ue,b1 as He,b2 as Oe}from"./index-55507c28.js";import{P as Pe}from"./index-16851c38.js";import{L as Ze}from"./index-748d9839.js";import{E as ze}from"./index-94a2e4c2.js";import{I as Fe}from"./index-912b17af.js";import{d as Qe}from"./product.api-71b8732b.js";import{u as De}from"./use-refs-de0c4b83.js";import{I as Ye}from"./index-715fcdb8.js";import"./use-id-acc627d9.js";import"./index-dc8f9730.js";import"./index-260e30ee.js";import"./___vite-browser-external_commonjs-proxy-685e0cd7.js";const[qe,H]=ae("rate");function Xe(a,m,n,g){return a>=m?{status:"full",value:1}:a+.5>=m&&n&&!g?{status:"half",value:.5}:a+1>=m&&n&&g?{status:"half",value:Math.round((a-m+1)*1e10)/1e10}:{status:"void",value:0}}const Ke={size:X,icon:K("star"),color:String,count:se(5),gutter:X,readonly:Boolean,disabled:Boolean,voidIcon:K("star-o"),allowHalf:Boolean,voidColor:String,touchable:te,iconPrefix:String,modelValue:oe(0),disabledColor:String};var Me=le({name:qe,props:Ke,emits:["change","update:modelValue"],setup(a,{emit:m}){const n=ne(),[g,p]=De(),A=L(),b=()=>a.readonly||a.disabled||!a.touchable,w=re(()=>Array(+a.count).fill("").map((s,e)=>Xe(a.modelValue,e+1,a.allowHalf,a.readonly)));let i,V,B=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER;const C=()=>{V=J.useRect(A);const s=g.value.map(J.useRect);i=[],s.forEach((e,t)=>{B=Math.min(e.top,B),N=Math.max(e.top,N),a.allowHalf?i.push({score:t+.5,left:e.left,top:e.top,height:e.height},{score:t+1,left:e.left+e.width/2,top:e.top,height:e.height}):i.push({score:t+1,left:e.left,top:e.top,height:e.height})})},T=(s,e)=>{for(let t=i.length-1;t>0;t--)if(e>=V.top&&e<=V.bottom){if(s>i[t].left&&e>=i[t].top&&e<=i[t].top+i[t].height)return i[t].score}else{const _=e<V.top?B:N;if(s>i[t].left&&i[t].top===_)return i[t].score}return a.allowHalf?.5:1},k=s=>{!a.disabled&&!a.readonly&&s!==a.modelValue&&(m("update:modelValue",s),m("change",s))},l=s=>{b()||(n.start(s),C())},c=s=>{if(!b()&&(n.move(s),n.isHorizontal())){const{clientX:e,clientY:t}=s.touches[0];ie(s),k(T(e,t))}},v=(s,e)=>{const{icon:t,size:_,color:x,count:E,gutter:o,voidIcon:R,disabled:d,voidColor:S,allowHalf:O,iconPrefix:Q,disabledColor:D}=a,P=e+1,Z=s.status==="full",G=s.status==="void",$=O&&s.value>0&&s.value<1;let Y;o&&P!==+E&&(Y={paddingRight:ce(o)});const ee=q=>{C(),k(O?T(q.clientX,q.clientY):P)};return f("div",{key:e,ref:p(e),role:"radio",style:Y,class:H("item"),tabindex:d?void 0:0,"aria-setsize":E,"aria-posinset":P,"aria-checked":!G,onClick:ee},[f(F,{size:_,name:Z?t:R,class:H("icon",{disabled:d,full:Z}),color:d?D:Z?x:S,classPrefix:Q},null),$&&f(F,{size:_,style:{width:s.value+"em"},name:G?R:t,class:H("icon",["half",{disabled:d,full:!G}]),color:d?D:G?S:x,classPrefix:Q},null)])};return J.useCustomFieldValue(()=>a.modelValue),J.useEventListener("touchmove",c,{target:A}),()=>f("div",{ref:A,role:"radiogroup",class:H({readonly:a.readonly,disabled:a.disabled}),tabindex:a.disabled?void 0:0,"aria-disabled":a.disabled,"aria-readonly":a.readonly,onTouchstartPassive:l},[w.value.map(v)])}});const je=ue(Me);const We={class:"comment"},$e={class:"list"},ea={key:0},aa={class:"flex score"},sa={class:"flex user-name"},ta=["src"],oa={class:"text-black text-sm"},la={class:"comment-text pt-3 pb-3",style:{color:"#666"}},na={class:"flex overflow-x-auto mb-3"},ra=["onClick","src"],ia={class:"item py-1 flex"},ca={class:"flex-1 flex left"},ua=["onClick"],ga={class:"product-info flex-1"},_a={class:"name"},da={class:"flex justify-between"},ma={class:"money"},va={class:"comment-time"},fa={__name:"comment",setup(a){const m=_e(),{t:n}=de.useI18n(),g=L([]),p=L(!1),A=L(!1);let b=L(1);const w=L(!1),i=new URL("/www/png/name-20d65991.png",self.location),V=l=>{Fe([l])},B=()=>{p.value=!1,b.value=1,C()},N=l=>{const c=[];return Object.keys(l).forEach(v=>{v.indexOf("imgUrl")>-1&&l[v]&&c.push(l[v])}),c},C=()=>{const l={pageNum:b.value,pageSize:20};Qe(l).then(c=>{w.value=!1;const{pageInfo:v,pageList:s}=c,e=s||[];e.map(_=>{_.avatar=_.avatar||Math.floor(Math.random()*20)});const t=e.sort((_,x)=>x.createTime/1-_.createTime/1);g.value=b.value===1?t:[...g.value,...t],b.value++,p.value=!1,w.value=!1,A.value=v.lastPage}).catch(()=>{A.value=!0,p.value=!1,w.value=!1})},T=l=>l?new URL(Object.assign({"/src/assets/image/userAvatar/1.png":Ae,"/src/assets/image/userAvatar/10.png":be,"/src/assets/image/userAvatar/11.png":we,"/src/assets/image/userAvatar/12.png":Ve,"/src/assets/image/userAvatar/13.png":ye,"/src/assets/image/userAvatar/14.png":xe,"/src/assets/image/userAvatar/15.png":Ie,"/src/assets/image/userAvatar/16.png":Le,"/src/assets/image/userAvatar/17.png":Be,"/src/assets/image/userAvatar/18.png":Ne,"/src/assets/image/userAvatar/19.png":Ce,"/src/assets/image/userAvatar/2.png":Te,"/src/assets/image/userAvatar/20.png":ke,"/src/assets/image/userAvatar/3.png":Ee,"/src/assets/image/userAvatar/4.png":Re,"/src/assets/image/userAvatar/5.png":Se,"/src/assets/image/userAvatar/6.png":Ge,"/src/assets/image/userAvatar/7.png":Je,"/src/assets/image/userAvatar/8.png":Ue,"/src/assets/image/userAvatar/9.png":He,"/src/assets/image/userAvatar/default.png":Oe})["/src/assets/image/userAvatar/".concat(l,".png")],self.location).href:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAG9klEQVR4Xu2d7XXiOhCGU0JKSAlbQkpIB0sJdHBvB5cOsh3sdsB2sNuB91f4CERgZNkmP7h6Dc46Yxtso5FkYM55zu4BY8uvpJmRLCt3d57abre732w2j0olw+12O0rT9Lvml/5/kKZbof/dEfBZoBnjWPwmSZJhHMePOBc9/82IQaQwjgeZcGkKIanA54LKe9aV86Qr5YFe/yoNoqOVbvetlgrGzVhXxOAqKwNuQQvvQvRKDu7tiZbzoiwIgnv48zhOAiqAL+hKCNAraNl7b/DtNYHTSy6mIuBqfG7xp+htRSC4qiRBKli6qZ7y3JtgHYbRU5/cTVO87w0Isrqg/9GCXyDP3g3s0D377OvbcugND1QHJyal/HKJLucUqATcO9XDqoWh/OrLYMohX6kuVkwqNbQpvnZxOx3gd0Jsdsvlejd/FR+8LlbZZ6vVJjsGx9Lfc6J1+Ifqw2pSKszflApiGlTwOpSZyNNZO+avq6yyksROI7FWCTbcTi78bF4WtgsWK4LXHe0DLu+NyEgZE74IesRGqtL1TIPRP9XNiCHt2u4feJQuaorVWpaEMw16Fr2uYYTxFBWDLO4834b4OW/aJdHrmwQpqtHBWpIkrCNcm+LnWOgJz1THTiZEiMeE9OTGgM+n4tgC16blMYnSqTrVs5UJwev3EdC7pJimQLBnTirOiwcyir5VnNQYLlwPxYIrGlNdG9lChE8VJzOGjitOW3+OhV7QLTVVKg7oiUyykVFJDFdw9wJkRVTfo6Z/xBp4AeZvqBCuwCCNls80rQLyljHwArgfKoJrLExViEZjgzCU7K3fZepZB2ZRaTlNo13Rv1TvknGPeAGmjakArsGEHS2naU7GAu7MJ2exXJcEcA1iEi0nB0czIu2bf9AfcOBTAM6xEYgPVI8LJpPJQ8wfiDI4pptNQMvJRWUwljJbGl46mAN6475Ay8kFVoRT/RF8x/RALuiN+wItJyOf3ZAQ4t6W+wHX7oLAJzcURZGV7CfHhzkgChoFLSczg48KkFKyznpSfMyCbKWhBf4+sEn3L7/RA9gQIiwJ4BqsK6LlZGY/KIP/556Opaw9eA5AweiclpObLA7oIfgj/YIbH+eCpIUlK5RsVKxbo5VVbkXQ46gArrGZBeZk4wGp1Ih+YQOfArHFaQjK6C5Sysr8D8WH58E53OuE6sDc212SbMf0CxtEUVwSwhVKxaXyWeIXnv3+qfjCCj64IYfuBwS6AhJnb7f44Ia4H8ifQNxZeBZaC7Ih1/NCLrKfIk4rALjsBa6CbxHnFeCyF7hu/cB5BQAXvcDF1EMVqABnQTjH9iJdZD4+tP4tgrDLNLSIzXHBZmN/3qeGLA21OhV9DGFhvZAPgbfAT2dTEVVwuyK4HttT78fIpiJcTcbVEScJS1bkkd8vMrL20nUbVGy2EnAunJNexzXZdPSrENYfyDTBZGrqmd//4P39/dHJI8kmmMyKXDztasLH0hSllBepaBGTT818dD9bTEXn5lsgBiYrwIfRPiVNC8tSwpD3XeAumHRBflZAYaNYH+OAybVDNt5+aQvewf6oAJiK4zE9yBXY1YSKeA6+DcC2GAFTc7E8hQKRVmue6QhUgsNnv5+o3P7SlRvCNaNIZUsDqWgc2N5Jq4ra7Qt0vjymB3MB4U3uitUFLAqwsYlTkWz+p85sLFOEGzAZYE1gs1fgVQCq+yeLkySgPzIBhLflZs6BsyLSU6+pwkwHY7wVv3zzq8U3gaMiKoMvNQRjE2uFfPDxJsA9mEhOGrX+3IQ8rxfA3XA+WLGNiR0XG7X+onWJBZx5vA90dUutWn9uyIjadD3MOF5Sq68jG9C1nF1dCHE886kzPUBq9Fcw0D377uvbEm6azS99mvVsawjIp9YNmXxy1TdOLeyF69EaPlBdW1kY1u+gcs3i5xyrBGz5SfXsZFKWH9gg06GFuVaqJvlUkoyojp0NrigqbOLny46HvkB3XsSGh0EgyjuinGOHTVyzeHBzPWVyVwS/Xzvbea5h+3rkwbfWXwa9AJ5BCOa/KzOfiwG9+I0984UYUL1Y7GUqhvTi1w40oTqx2q0S/mJd/Nwmk8XVuyNoQHWxavP5/IsuSEALdunM5m9Cx0PegNvUJhPxML2uSghwz1QHp4bB2nS+HFUU9qJ4mS5HxgdZJu0QFwJa8L4Dl/Pysug2rWzb0D0ns+U3ehN9ZfYqvnvd6uvsAnoDfP0jva/eWd8qInM3rnJ7TutBRQTT6XLYS3fTxmYz8TSdih8VAjhhMhU/L8LVtLUsWOteAQGoKNxk17yG1t7UUBnoGYfs6TcV7Fy04H+Qw+vrDG6iNzCIBLeAVgrh4LIyV6GFRJCkAuMzfDdF5elj979ZDnEOnwX/H/OnYJkIZgM3AAAAAElFTkSuQmCC",self.location).href;function k(l){let c=l.substring(2,l.length-1);return l.replace(c,"***")}return(l,c)=>{const v=me,s=je,e=F,t=Ye,_=ze,x=Ze,E=Pe;return h(),y("div",We,[f(v,{fixed:""},{title:U(()=>[ve(I(u(n)("product.23")),1)]),_:1}),r("div",$e,[f(E,{modelValue:w.value,"onUpdate:modelValue":c[1]||(c[1]=o=>w.value=o),"pulling-text":u(n)("pullingText"),"loosing-text":u(n)("loosingText"),"loading-text":u(n)("loading"),onRefresh:B},{default:U(()=>[f(x,{loading:p.value,"onUpdate:loading":c[0]||(c[0]=o=>p.value=o),finished:A.value,"loading-text":u(n)("loading"),"finished-text":g.value.length?u(n)("product.3"):"",onLoad:C},{default:U(()=>[g.value.length?(h(),y("div",ea,[(h(!0),y(M,null,j(g.value,(o,R)=>(h(),y("div",{class:W(["pl-3 pr-3 pt-4 comment-info pb-5",{"is-ar":u(m)}]),key:R},[r("div",aa,[r("div",sa,[r("img",{class:"user-img",src:T(o.avatar)},null,8,ta),r("span",oa,I(k(o.userName)),1)]),r("div",null,[f(s,{size:20,color:"#FFC93E",modelValue:o.rating,"onUpdate:modelValue":d=>o.rating=d},null,8,["modelValue","onUpdate:modelValue"])])]),r("div",la,I(o.content||u(n)("用户未发表评论")),1),r("div",na,[(h(!0),y(M,null,j(N(o),(d,S)=>(h(),y("img",{onClick:O=>V(d),class:W(["w-1/4 img-icon",u(m)?"ml-1.5":"mr-1.5"]),key:"imgs"+S,src:d,alt:""},null,10,ra))),128))]),r("div",ia,[r("div",ca,[o.goodsVo.imgUrl1?(h(),y("div",{key:0,class:"product-img-wrap w-28 h-28",onClick:d=>V(o.goodsVo.imgUrl1)},[f(t,{src:o.goodsVo.imgUrl1,class:"product-img"},{error:U(()=>[f(e,{name:"photo-fail"})]),_:1},8,["src"])],8,ua)):z("",!0),r("div",ga,[r("div",_a,I(o.goodsVo.name),1),r("div",da,[r("div",ma,"$"+I(u(fe)(o.goodsVo.systemPrice)),1),r("div",va,I(u(pe)(o.commentTime)),1)])])])])],2))),128))])):z("",!0),!g.value.length&&!p.value?(h(),he(_,{key:1,image:u(i).href,description:u(n)("noData")},null,8,["image","description"])):z("",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])])])}}},Ca=ge(fa,[["__scopeId","data-v-c75bda61"]]);export{Ca as default};
