System.register(["./index-legacy-27bdf402.js","./index-legacy-55462584.js","./index-legacy-00472a3a.js","./index-legacy-591c4a77.js","./index-legacy-3b4df68c.js","./upload.api-legacy-60e563ea.js","./use-id-legacy-dafc5df9.js"],function(e,t){"use strict";var a,o,l,n,r,i,s,c,d,m,p,g,u,h,f,v,b,A,x,w,y,k,C,R,I,F,V;return{setters:[e=>{a=e._,o=e.e,l=e.$,n=e.o,r=e.c,i=e.b,s=e.w,c=e.a,d=e.t,m=e.n,p=e.x,g=e.v,u=e.r,h=e.p,f=e.i,v=e.T,b=e.B,A=e.a9,x=e.aa,w=e.d,y=e.ab,k=e.I},e=>{C=e.B},null,e=>{R=e.F},e=>{I=e.S,F=e.a},e=>{V=e.u},null],execute:function(){var t=document.createElement("style");t.textContent=".form-content.is-ar[data-v-9e31024c] .van-field__label{margin-right:0;margin-left:12px;text-align:right}.form-content.is-ar[data-v-9e31024c] .van-field__control{text-align:right}.form-content>.item[data-v-9e31024c]{background-color:#fff;border-bottom:1px solid #EFF2F6}.form-content>.item[data-v-9e31024c]:last-child{border-bottom:none}.form-content>.item.avatar[data-v-9e31024c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:16px}.form-content>.item.avatar>.info[data-v-9e31024c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.form-content>.item.avatar>.info>.avatar-img[data-v-9e31024c]{width:48px;height:48px;border-radius:50%;overflow:hidden;margin-right:10px;position:relative}.form-content>.item.avatar>.info>.avatar-img.is-ar[data-v-9e31024c]{margin-left:10px;margin-right:0}.form-content>.item.avatar>.info>.avatar-img>input[data-v-9e31024c]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:2;opacity:0}.form-content>.item[data-v-9e31024c] .van-field__label{color:#000}.remark-content[data-v-9e31024c]{width:100%;background-color:#fff;margin:10px 0}.remark-content.is-ar[data-v-9e31024c] .van-field__control{text-align:right}.remark-content>p[data-v-9e31024c]{font-size:14px;color:#000;padding:16px 16px 0}.submit-btn[data-v-9e31024c]{width:100%;padding:16px;margin-top:30px}.submit-btn[data-v-9e31024c] .van-button--primary{background-color:var(--site-main-color);border-color:var(--site-main-color);border-radius:4px}.croper-content-modal[data-v-9e31024c]{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:99}.croper-content-modal[data-v-9e31024c] .van-nav-bar .van-icon{font-size:18px;color:#1f2025}\n",document.head.appendChild(t);const j=o({name:"ShopBasicInfo",components:{VuePictureCropper:I},setup(){const{t:e}=g.useI18n(),t=u({}),a=JSON.parse(localStorage.getItem("shopInfo")||"{}"),o=u(a.shopInfo.id||""),l=h({name:"",contact:"",shopPhone:"",shopAddress:"",shopRemark:"",imInitMessage:""}),n=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAfgSURBVHgB7Z2NedNIEIZnV5ItQ+4uVICpgNBBqIBcBRcqACrgqIC7CggVkFRAOjh3gKmAHH+WZWn35pPsnOPItmxrV1K87/MYEluxpJndmd3Z0ayghqK1Poyi5Ejr9Mj3vYdKU18I6mstDvlTftHhwp9cEYkrEnpImq6koGGSpJ+F8AZh6A+E4M8aiKCGkAt8cuJ54rHS4oTf6VOFsPIG/O+AlXOh1GTQ6/WG1ABqVQCEPhqNT6XvPWPBHJNNBF3qVL8nSi/rVEYtChiNJsfCo9fWhb6cc0Hifbfrn5NlrCngurV7/ouqzUt1iKFW6k2v1zkjS1hRwGgUnwop3tJtx9lQ7CnCqAIyUyPFu+a2+HWYV4QRBcDcjOOEBU8ndAfgIeyZSidvTDjryhUwHicnmjSE3xJzUxYzvUFSRWTj+HjyloX/ge6c8IHuw5xm96h1ZfdXSQ8YjUZ8ccHH9tr6TUFvmDytwiTt3AO+f4+PhPT/2R/hA501ONw77chOCoiT5A8/ECz8u2hy1qH7uHfIgHZgawVEcfxCpfqM9hzIIIqil7QlW/kACJ+0+Isc/6PTV2EYbiyTjRWALudafjHSE6cd33+/yd9spAA4nanNdywhmegnBwedQdnjS/sADDX9QH4gx0qCQHyErMoeX6oH5KGFdM+Gmrsght2O96TMKlypHjCeJK+d8DdB93OZrWdtD5iGkt+RY2N4kef3dYs8KxWwfyGGamHhXnU6/qNVpmilCZIycKZnBzRHCKZh+aUs7QE/OKzs5ZFNx45oRRy4Cy6LPluqgGicfHKtvyrEMOz6j4o+8YvehOM1LXwe2tJkkpJSiupESkm+7/H/JldndR/xoqJQReFZTbd+pTR9/xHVLvwZEP7B/Z5RJSxzyLecsI3W/3M0bozwARoErskkmUMej08X37+lctOtP44T4ze7Lb2wSzxuJ3Pc9gU3egBGPqZNTzSeUFOJxnHmm8yh+0jVmX/nhgJ80jut7qwDN9gk07MIhD+KYjJJlpI5//vsh3zW638iQzTZ9CxycD/MRkam6Hb8BzNnPNcDvGMySJNNzyJoKCZN0bwzvlaA8IQx8wPhN9n0LAJfNTbZYKT3bPZjZoK+cLy/FydfyAC4ma/fflIb+eWgR55XWe7aDWZmKPv2TpwekyHaYveLMOmQ8TQQ/s8UwCPfZ2SANFWUJCm1FVy7qesXgrKkrkwBmvTOGV5FtFn4M9CIjCBk1ujllzzR1IgCzE5q7GDuHnQfa+0yjBIjwnesB4/hSjyHS4ZAqLftmBoFASHSI8lS6pMhgsDD0yXUZjzP3IyYm2hfekI8JENA+DzepbYSdgOjawSK/YDUwmxqeZdvomw3xnGbKKwT+Nmr9LXwd5c1i7iWMOyQSaSQD31Sok/C3GgFvQDBLV7ooXiSLD0OwsEN43h0+1XhCxyD1gnlAhkJ/u7ly5toxfd63SzAFvKoJuIJ1jhefi0BK/Vez6zwc8Sh4BtFCMLKAxaYF2AdOJ0KCoL0uaXxUl2hr0AEFX+jpkNBCNKTxccj5JF9P7/03PHoIUWRTRw/4QaR8Dgfx+P7JL/gt0xGQufBMiUU0P7Beotp/zix5VgdomBaj24/7whhjmCGgsDuaAnmDef25q4FPqTTCQynqNzE6l3D1hYtzAh2pkFAVoGwi2L+eY6QHR8AoP5GVpLaB+CEJelmlvLaB3jsxQoQ2imgLoQewt0MyVEL7If+lanWn8lRC2x+hpLVMCRHTSg2QcIr/Uyro1q09gYyCn2ngJpAQVn5AClyWgzJYZvBdV6QInVBDquw8DPLk4UieDlgUGcN3XgaFrZJ3amSySTNGr3x1MQbJ+VYPR5NajKmM6NnaJU8QsmzzARlfkDQJTnswLKe1Zu7jsWqJHV+wBJ50fCcawWMe90zclgivZz9dK0AZ4bsoLS6mC93eWNJUqf0hgzS9iStKmAZn83/bvUxVayIff02anTS7m+/3jPYUNY8pgpUmvxNpk6PtA/f3nLfpixLj6kK1J5efO/W2aZzAjwtaSRXqGllCmaYL1dQXLDjVg/IY0PamC/IbzRsVOa0jVoRRa0f1FquBqkh85lstlmXmVfhmTYrVwO00s+FpI9kENx4p8XZ02Vh1b5a9tlSOzCt8GR9V6G7BnbfWFW4b2W/M+2Q7z7r9xlY6QnhkFMSz8mxFfmWJ6s3eVg7FLnP3YdHjsbmBncWllmZ/WZKuf7cFLnSxeWpuHQxTBFsGbk80hLkdr/s7q2ufH3FGCtfD/DFmB+QoxDIZhPhg43jAZlj0foVOW7CMtlmk7et599RFL/kWcZbcmTCD8POVnvq7BQAcaXtc7Ozy/aGO0egcseMrU32boh6xQ736aY2fxG3leFWNGgrQ4ALGfHEYy9mzHyPmGRVtbVt5UHw3C/Iu7jxw5XguFjV+84bWYXIt3Hy/mQHbbQSr0XOux3/ednZ7SYY3tK87b0Bth6jnOLdLyo5A1mghYrI1sW3HdtvgtVMqeYrQgyRltPrdc9MmJvCM1INTDcIgn84oSYg6BJZgSZNzfJT18jUWR9ndas1HZNNWOjICLfZ2osvoyFAGUoGR1KpEx49PabKa5mKIccNLrSmQRgG53UKfZ7GZsuiqCnqaqKspkRlRxQXRH07Lfr8KZIEFhMFWKAQalZ6gYWtPyulhngMF08jNkXgi/wHTvjCMaeW0CAAAAAASUVORK5CYII=",self.location),r=f();v.loading({duration:0,message:e("loading"),forbidClick:!0}),b().then(e=>{t.value=e,l.name=e.name,l.contact=e.contact,l.shopPhone=e.shopPhone,l.shopAddress=e.shopAddress,l.shopRemark=e.shopRemark,l.imInitMessage=e.imInitMessage,v.clear()}).catch(()=>{v.clear()});const i=u(!1),s=u(!1),c=u(null),d=u(""),m=h({dataURL:"",blobURL:"",file:""});return{isArLang:r,avatarDefault:n,storeInfo:t,storeForm:l,submitLoading:i,showBtn:o,t:e,submitHandle:async()=>{const a={...l};if(!m.file&&!t.value.avatar)return void v(`${e("请设置")}${e("storeLogo")}`);if(!a.name)return void v(`${e("请设置")}${e("storeName")}`);if(a.shopPhone&&!/^\d{3,}$/.test(a.shopPhone))return v(e("电话格式有误")),!1;i.value=!0;let o="";if(m.file)try{o=await V({file:m.file,moduleName:"shopAvatar"})}catch(n){return console.log(n),i.value=!1,!1}o&&(a.avatar=o),i.value=!0,y(a).then(()=>{i.value=!1,document.dispatchEvent(new CustomEvent("headerRefresh")),v.success(e("saveSuc"))}).catch(()=>{i.value=!1})},uploadInput:c,pic:d,result:m,isShowModal:s,selectFile:function(e){d.value="",m.dataURL="",m.blobURL="",m.file="";const{files:t}=e.target;if(!t||!t.length)return;const a=t[0],o=new FileReader;o.readAsDataURL(a),o.onload=()=>{d.value=String(o.result),s.value=!0,c.value&&(c.value.value="")}},getResult:async function(){if(!F)return;const e=F.getDataURL(),t=await F.getBlob();if(!t)return;const a=await F.getFile();m.dataURL=e,m.blobURL=URL.createObjectURL(t),m.file=a,s.value=!1},croperBack:()=>{F&&(F.clear(),F.reset(),s.value=!1)}}}}),L={class:"item avatar"},U={class:"info"},S=["src"],P=["src"],B={class:"item"},Q={class:"item"},z={class:"item"},H={class:"item"},N={class:"item"},Z={key:0,class:"croper-content-modal"},J={class:"submit-btn"};e("default",a(j,[["render",function(e,t,a,o,g,u){const h=A,f=k,v=R,b=x,y=l("VuePictureCropper"),I=C;return n(),r("div",null,[i(h,{fixed:!0},{title:s(()=>[w(d(e.t("basicInfo")),1)]),_:1}),t[7]||(t[7]=c("div",{style:{height:"46px"}},null,-1)),c("div",{class:m(["form-content",{"is-ar":e.isArLang}])},[c("div",L,[c("p",null,d(e.t("storeLogo")),1),c("div",U,[c("div",{class:m(["avatar-img",{"is-ar":e.isArLang}])},[c("input",{ref:"uploadInput",type:"file",accept:"image/jpg, image/jpeg, image/png, image/gif",onChange:t[0]||(t[0]=(...t)=>e.selectFile&&e.selectFile(...t))},null,544),e.result.dataURL?(n(),r("img",{key:0,src:e.result.dataURL,alt:""},null,8,S)):(n(),r("img",{key:1,src:e.storeInfo?.avatar||e.avatarDefault.href,alt:""},null,8,P))],2),i(f,{name:"arrow",color:"#999",size:"12"})])]),c("div",B,[i(v,{modelValue:e.storeForm.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.storeForm.name=t),type:"text",label:e.t("storeName"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storeName")},null,8,["modelValue","label","placeholder"])]),c("div",Q,[i(v,{modelValue:e.storeForm.contact,"onUpdate:modelValue":t[2]||(t[2]=t=>e.storeForm.contact=t),type:"text",label:e.t("contactPerson"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("contactPerson")},null,8,["modelValue","label","placeholder"])]),c("div",z,[i(v,{modelValue:e.storeForm.shopPhone,"onUpdate:modelValue":t[3]||(t[3]=t=>e.storeForm.shopPhone=t),type:"number",label:e.t("storePhone"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storePhone")},null,8,["modelValue","label","placeholder"])]),c("div",H,[i(v,{modelValue:e.storeForm.shopAddress,"onUpdate:modelValue":t[4]||(t[4]=t=>e.storeForm.shopAddress=t),type:"text",label:e.t("storeAddress"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("storeAddress")},null,8,["modelValue","label","placeholder"])])],2),c("div",{class:m(["remark-content",{"is-ar":e.isArLang}])},[c("p",null,d(e.t("storeProfile")),1),i(v,{modelValue:e.storeForm.shopRemark,"onUpdate:modelValue":t[5]||(t[5]=t=>e.storeForm.shopRemark=t),rows:"4",autosize:"",type:"textarea","label-width":0,label:"",placeholder:e.t("pleaseEnter")+e.t("storeProfile")},null,8,["modelValue","placeholder"])],2),c("div",{class:m(["form-content",{"is-ar":e.isArLang}])},[c("div",N,[i(v,{modelValue:e.storeForm.imInitMessage,"onUpdate:modelValue":t[6]||(t[6]=t=>e.storeForm.imInitMessage=t),type:"text",label:e.t("进店欢迎语"),"label-width":120,placeholder:e.t("pleaseEnter")+e.t("进店欢迎语")},null,8,["modelValue","label","placeholder"])])],2),e.isShowModal?(n(),r("div",Z,[i(b,{title:e.t("selectPhotos"),"right-text":e.t("sure"),"left-arrow":"",fixed:"",onClickLeft:e.croperBack,onClickRight:e.getResult},null,8,["title","right-text","onClickLeft","onClickRight"]),i(y,{boxStyle:{width:"100%",height:"100%",backgroundColor:"#f8f8f8",margin:"auto"},img:e.pic,options:{viewMode:1,dragMode:"crop",aspectRatio:1}},null,8,["img"])])):p("",!0),c("div",J,[i(I,{loading:e.submitLoading,type:"primary",size:"large",disabled:!e.showBtn,onClick:e.submitHandle},{default:s(()=>[w(d(e.showBtn?e.t("save"):e.t("商家入驻尚未完成")),1)]),_:1},8,["loading","disabled","onClick"])])])}],["__scopeId","data-v-9e31024c"]]))}}});
