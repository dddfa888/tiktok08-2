System.register(["./index-legacy-27bdf402.js","./index-legacy-4ee839b1.js","./index-legacy-e01b4a75.js"],function(e,o){"use strict";var a,t,i,n,s,r,l,c,m,v,g,d,u,h,p,b,f,w,x,y,z,C,k,I,_,X,P,Z,Y,H,S,W,R,$,D,T,j,N;return{setters:[e=>{a=e.aq,t=e.e,i=e.b9,n=e.as,s=e.p,r=e.aI,l=e.r,c=e.m,m=e.f,v=e.ar,g=e.b,d=e.aJ,u=e.aC,h=e.X,p=e.aG,b=e.ba,f=e.ax,w=e.at,x=e.aD,y=e.ay,z=e.q,C=e.by,k=e.bz,I=e.s,_=e.az,X=e.aA,P=e.ap,Z=e.bc,Y=e.I,H=e.bP,S=e.bK,W=e.aw,R=e.av,$=e.b$,D=e.c0},e=>{T=e.S,j=e.a},e=>{N=e.I}],execute:function(){var o=document.createElement("style");o.textContent=":root{--van-image-placeholder-text-color: var(--van-text-color-2);--van-image-placeholder-font-size: var(--van-font-size-md);--van-image-placeholder-background-color: var(--van-background-color);--van-image-loading-icon-size: 32px;--van-image-loading-icon-color: var(--van-gray-4);--van-image-error-icon-size: 32px;--van-image-error-icon-color: var(--van-gray-4) }.van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:var(--van-border-radius-max)}.van-image--round .van-image__img{border-radius:inherit}.van-image--block{display:block}.van-image__img,.van-image__error,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:var(--van-image-placeholder-text-color);font-size:var(--van-image-placeholder-font-size);background:var(--van-image-placeholder-background-color)}.van-image__loading-icon{color:var(--van-image-loading-icon-color);font-size:var(--van-image-loading-icon-size)}.van-image__error-icon{color:var(--van-image-error-icon-color);font-size:var(--van-image-error-icon-size)}\n",document.head.appendChild(o);const B=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),O=a("image-preview")[1];var q=t({props:{src:String,show:Boolean,active:Number,minZoom:i(n),maxZoom:i(n),rootWidth:i(Number),rootHeight:i(Number)},emits:["scale","close"],setup(e,{emit:o}){const a=s({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),t=r(),i=l(),n=c(()=>{const{rootWidth:o,rootHeight:t}=e,i=t/o;return a.imageRatio>i}),p=c(()=>{const{scale:e,moveX:o,moveY:t,moving:i,zooming:n}=a,s={transitionDuration:n||i?"0s":".3s"};if(1!==e){const a=o/e,i=t/e;s.transform=`scale(${e}, ${e}) translate(${a}px, ${i}px)`}return s}),b=c(()=>{if(a.imageRatio){const{rootWidth:o,rootHeight:t}=e,i=n.value?t/a.imageRatio:o;return Math.max(0,(a.scale*i-o)/2)}return 0}),f=c(()=>{if(a.imageRatio){const{rootWidth:o,rootHeight:t}=e,i=n.value?t:o*a.imageRatio;return Math.max(0,(a.scale*i-t)/2)}return 0}),w=t=>{(t=u(t,+e.minZoom,+e.maxZoom+1))!==a.scale&&(a.scale=t,o("scale",{scale:t,index:e.active}))},x=()=>{w(1),a.moveX=0,a.moveY=0};let y,z,C,k,I,_,X;const P=e=>{const{touches:o}=e,{offsetX:i}=t;t.start(e),y=o.length,z=a.moveX,C=a.moveY,X=Date.now(),a.moving=1===y&&1!==a.scale,a.zooming=2===y&&!i.value,a.zooming&&(k=a.scale,I=B(e.touches))},Z=()=>{if(y>1)return;const{offsetX:e,offsetY:i}=t,n=Date.now()-X;e.value<5&&i.value<5&&n<250&&(_?(clearTimeout(_),_=null,(()=>{const e=a.scale>1?1:2;w(e),a.moveX=0,a.moveY=0})()):_=setTimeout(()=>{o("close"),_=null},250))},Y=o=>{let i=!1;(a.moving||a.zooming)&&(i=!0,a.moving&&z===a.moveX&&C===a.moveY&&(i=!1),o.touches.length||(a.zooming&&(a.moveX=u(a.moveX,-b.value,b.value),a.moveY=u(a.moveY,-f.value,f.value),a.zooming=!1),a.moving=!1,z=0,C=0,k=1,a.scale<1&&x(),a.scale>e.maxZoom&&(a.scale=+e.maxZoom))),d(o,i),Z(),t.reset()},H=e=>{const{naturalWidth:o,naturalHeight:t}=e.target;a.imageRatio=t/o};return m(()=>e.active,x),m(()=>e.show,e=>{e||x()}),v.useEventListener("touchmove",e=>{const{touches:o}=e;if(t.move(e),(a.moving||a.zooming)&&d(e,!0),a.moving){const{deltaX:e,deltaY:o}=t,i=e.value+z,n=o.value+C;a.moveX=u(i,-b.value,b.value),a.moveY=u(n,-f.value,f.value)}if(a.zooming&&2===o.length){const e=B(o);w(k*e/I)}},{target:c(()=>{var e;return null==(e=i.value)?void 0:e.$el})}),()=>{const o={loading:()=>g(h,{type:"spinner"},null)};return g(T,{ref:i,class:O("swipe-item"),onTouchstartPassive:P,onTouchend:Y,onTouchcancel:Y},{default:()=>[g(N,{src:e.src,fit:"contain",class:O("image",{vertical:n.value}),style:p.value,onLoad:H},o)]})}}});const[A,M]=a("image-preview"),E=["show","transition","overlayStyle","closeOnPopstate"],L={show:Boolean,loop:p,images:b(),minZoom:f(1/3),maxZoom:f(3),overlay:p,closeable:Boolean,showIndex:p,className:w,closeIcon:x("clear"),transition:String,beforeClose:Function,overlayClass:w,overlayStyle:Object,swipeDuration:f(300),startPosition:f(0),showIndicators:Boolean,closeOnPopstate:p,closeIconPosition:x("top-right")};var U=t({name:A,props:L,emits:["scale","close","closed","change","update:show"],setup(e,{emit:o,slots:a}){const t=l(),i=s({active:0,rootWidth:0,rootHeight:0}),n=()=>{if(t.value){const e=v.useRect(t.value.$el);i.rootWidth=e.width,i.rootHeight=e.height,t.value.resize()}},r=e=>o("scale",e),c=e=>o("update:show",e),d=()=>{H(e.beforeClose,{args:[i.active],done:()=>c(!1)})},u=e=>{e!==i.active&&(i.active=e,o("change",e))},h=()=>{if(e.showIndex)return g("div",{class:M("index")},[a.index?a.index({index:i.active}):`${i.active+1} / ${e.images.length}`])},p=()=>{if(a.cover)return g("div",{class:M("cover")},[a.cover()])},b=()=>{if(e.closeable)return g(Y,{role:"button",name:e.closeIcon,class:[M("close-icon",e.closeIconPosition),Z],onClick:d},null)},f=()=>o("closed"),w=(e,o)=>{var a;return null==(a=t.value)?void 0:a.swipeTo(e,o)};return y({swipeTo:w}),z(n),m([C,k],n),m(()=>e.startPosition,e=>u(+e)),m(()=>e.show,a=>{const{images:t,startPosition:s}=e;a?(u(+s),I(()=>{n(),w(+s,{immediate:!0})})):o("close",{index:i.active,url:t[i.active]})}),()=>g(P,_({class:[M(),e.className],overlayClass:[M("overlay"),e.overlayClass],onClosed:f,"onUpdate:show":c},X(e,E)),{default:()=>[b(),g(j,{ref:t,lazyRender:!0,loop:e.loop,class:M("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:u},{default:()=>[e.images.map(o=>g(q,{src:o,show:e.show,active:i.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:i.rootWidth,rootHeight:i.rootHeight,onScale:r,onClose:d},null))]}),h(),p()]})}});let F;const G={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},J=e("I",(e,o=0)=>{if(S)return F||({instance:F}=$({setup(){const{state:e,toggle:o}=D(),a=()=>{e.images=[]};return()=>g(U,_(e,{onClosed:a,"onUpdate:show":o}),null)}})),e=Array.isArray(e)?{images:e,startPosition:o}:e,F.open(W({},G,e)),F});J.Component=R(U),J.install=e=>{e.use(J.Component)}}}});
