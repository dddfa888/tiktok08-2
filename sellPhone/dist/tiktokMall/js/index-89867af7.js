import{_ as J,v as F,o as I,c as x,a as o,t as m,u as l,b as k,w as Z,d as P,n as R,e as oe,r,f as te,g as se,h as ae,T as V,i as le,j as ne,k as ie,l as re,m as G,p as ce,q as ue,s as de,x as E,y as me,z as ve,A as ge,G as pe,B as fe,C as _e,D as K,I as we}from"./index-55507c28.js";import{B as W}from"./index-64f4bac7.js";import{l as he}from"./config-42a88e6b.js";import{l as q}from"./config-25d1c5d0.js";import{I as ee}from"./index-6acd675e.js";import{M as ke}from"./vue3-puzzle-vcode.es-f2e9b02b.js";import Ae from"./index-d1c475eb.js";import{n as ye}from"./login.api-f8cfd6d7.js";import"./index-6e53b41f.js";import"./index-3bdff75a.js";import"./use-id-acc627d9.js";const be={class:"code-content"},Ce={class:"title"},Se={class:"scroll-content"},Ie={class:"btn"},Ve=oe({name:"AgreeDialog"}),Ue=Object.assign(Ve,{props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","done"],setup($,{emit:b}){const{t:s}=F.useI18n(),f=b,U=()=>{f("update:modelValue",!1)},_=()=>{f("done"),f("update:modelValue",!1)};return(p,C)=>{const N=W;return I(),x("div",{class:R([{active:$.modelValue},"area-code-dialog"])},[o("div",be,[o("div",Ce,m(l(s)("用户协议")),1),o("div",Se,[k(Ae)]),o("div",Ie,[k(N,{type:"custom",size:"small",onClick:_},{default:Z(()=>[P(m(l(s)("我已阅读")),1)]),_:1})])]),o("div",{class:"code-bg",onClick:U})],2)}}}),Me=J(Ue,[["__scopeId","data-v-e88d9f70"]]);const Te={class:"code-content"},xe={class:"title"},$e={class:"input-content"},Ne={class:"input"},Be=["placeholder"],Re=["width","height"],De=oe({name:"NumberCodeDialog"}),Le=Object.assign(De,{props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","done"],setup($,{emit:b}){const{t:s}=F.useI18n(),f=b,U=$,_=r(""),p=r(""),C=r(180),N=r(240),w=r(100),A=r(35),j=r(50),D=r(160),H=r(32),L=r(40),O=r(40),Q=r(100),u=(e,a)=>Math.floor(Math.random()*(a-e)+e),M=(e,a)=>{let n=u(e,a),v=u(e,a),i=u(e,a);return"rgb("+n+","+v+","+i+")"},B=()=>{let a=document.getElementById("s-canvas").getContext("2d");a.textBaseline="bottom",a.fillStyle=M(C.value,N.value),a.fillRect(0,0,w.value,A.value);for(let n=0;n<p.value.length;n++)g(a,p.value[n],n);S(a),X(a)},g=(e,a,n)=>{e.fillStyle=M(j.value,D.value),e.font=u(H.value,L.value)+"px SimHei";let v=(n+1)*(w.value/(p.value.length+1)),i=u(L.value,A.value-5);var t=u(-15,15);e.translate(v,i),e.rotate(t*Math.PI/180),e.fillText(a,0,0),e.rotate(-t*Math.PI/180),e.translate(-v,-i)},S=e=>{for(let a=0;a<4;a++)e.strokeStyle=M(O.value,Q.value),e.beginPath(),e.moveTo(u(0,w.value),u(0,A.value)),e.lineTo(u(0,w.value),u(0,A.value)),e.stroke()},X=e=>{for(let a=0;a<10;a++)e.fillStyle=M(0,100),e.beginPath(),e.arc(u(0,w.value),u(0,A.value),1,0,2*Math.PI),e.fill()},Y=()=>{p.value="",c()},c=()=>{const e=[0,1,2,3,4,5,6,7,8,9];let a="";for(let n=0;n<4;n++){const v=Math.floor(Math.random()*e.length);a+=e[v]}p.value=a,B()};te(()=>U.modelValue,e=>{e?Y():_.value=""});const T=()=>{f("update:modelValue",!1)},z=()=>{if(!_.value){V(s("验证码不能为空"));return}_.value===p.value?(f("done"),T()):V(s("验证码不正确"))};return(e,a)=>{const n=W;return I(),x("div",{class:R([{active:$.modelValue},"number-code-dialog"])},[o("div",Te,[o("div",xe,m(l(s)("entryVerifyCode")),1),o("div",$e,[o("div",Ne,[se(o("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=v=>_.value=v),placeholder:l(s)("verificationCode")},null,8,Be),[[ae,_.value]])]),o("div",{onClick:c},[o("canvas",{id:"s-canvas",width:w.value,height:A.value},null,8,Re)])]),k(n,{type:"custom",block:"",onClick:z},{default:Z(()=>[P(m(l(s)("确定")),1)]),_:1})]),o("div",{class:"code-bg",onClick:T})],2)}}}),Ee=J(Le,[["__scopeId","data-v-937b5b09"]]);const Pe={class:"header-content"},je=["src"],He=["src"],Oe={class:"logo-content"},Qe=["src"],Xe={class:"form-content"},Ye={key:0,class:"item"},ze={class:"title"},Ge={class:"input-content"},Je={key:1,class:"item"},Fe={class:"item"},Ze={class:"title"},We={class:"input-content"},Ke={class:"btn"},qe={__name:"index",setup($){const b=le(),{t:s,locale:f}=F.useI18n(),U=ne(),_=ie(),p=re(),C="tiktokMall",N=r(new URL("/www/png/name-3ddd62dd.png",self.location)),w=G(()=>["familyMart"].includes(C)),A=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACVSURBVHgB7ZPJDYAgEEU/iQVYAiXYkhVoB8QKLMkStAO1Au1g/N5ckeXigZcMSxgehAlA4ncoEcnZG0aOSJRSZcZmpXTmvEYc5/2UthKOeTyCC53407/emYuaMXrI9lwNG0woGIuj0C47SGsHWQUfxF4kgxDkuUg9QpF7kUbnd7NIj0XSX/nZVwJ/0kBRs7s5npC4sgFBUms+k2q2aQAAAABJRU5ErkJggg==",self.location),j=G(()=>{const i=f.value||"en";return he.find(h=>h.key===i).image}),D=G(()=>{const i=q.find(t=>(t.key==="mbuy"?"argos":t.key)===C);return i||q[0]}),H=new URL("/www/png/name-593a7e78.png",self.location),L=new URL("/www/png/name-ae6e9405.png",self.location),O=new URL("/www/png/name-8130147b.png",self.location),Q=new URL("/www/png/name-dab02cab.png",self.location),u=new URL("/www/png/name-ca360226.png",self.location),M=[H.href,L.href,O.href,Q.href,u.href],B=r(!1),g=r(0),S=r(!1),X=localStorage.getItem("areaCode")?localStorage.getItem("areaCode"):44,Y=r(X),c=ce({username:"",password:""}),T=r(!1),z=()=>{const i=g.value===0?"entryEmail":"entryPhone";if(c.username=ge(c.username),c.username==="")return V(s(i)),!1;if(c.password==="")return V(s("entryPassword")),!1;if(c.password.length<6||c.password.length>20)return V(s("setPasswordTips")),!1;if(w.value&&!n.value)return V("".concat(s("我已阅读并同意"),"《").concat(s("用户协议"),"》")),!1;["hive","argos"].includes(C)?e():["tiktok-wholesale"].includes(C)?T.value=!0:B.value=!0},e=()=>{B.value=!1,S.value=!0,ye({username:g.value==0?c.username:"".concat(Y.value," ").concat(c.username),password:c.password,type:g.value==0?2:1,roleType:1}).then(async i=>{localStorage.removeItem("storeUserName"),localStorage.removeItem("storeMobile");const t=g.value==0?"storeUserName":"storeMobile";localStorage.setItem(t,c.username),localStorage.setItem("loginType",g.value),await U[pe](i),await fe().then(y=>{y.id?localStorage.setItem("sellerId",y.id):localStorage.removeItem("sellerId")}).catch(()=>{S.value=!1}),S.value=!1,_.setShowNotic(!0),document.dispatchEvent(new CustomEvent("getMoneyInfoHandle")),_e().setChatHandle(),V.success(s("loginSuc")),p.push("/shop")}).catch(i=>{S.value=!1,console.log(i)})},a=()=>{const{hostname:i,origin:t}=window.location,h=i==="localhost"?"https://www.sparmalla.top/promote/#/":"".concat(t,"/promote/#/"),y="".concat(h,"?lang=").concat(f.value);window.plus?window.plus.runtime.openURL(y):window.webkit?window.webkit.messageHandlers.openWindow.postMessage({url:y}):window.open(y)},n=r(!1),v=r(!1);return ue(()=>{U.logout()}),de(()=>{const i=localStorage.getItem("loginType");g.value=i?Number(i):0;const t=g.value==0?"storeUserName":"storeMobile",h=localStorage.getItem(t);c.username=h||""}),(i,t)=>{const h=we,y=W;return I(),x("div",{style:ve({"background-image":"url("+N.value.href+")"}),class:"login-register-content"},[k(Ee,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=d=>T.value=d),onDone:e},null,8,["modelValue"]),k(Me,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=d=>v.value=d),onDone:t[2]||(t[2]=d=>n.value=!0)},null,8,["modelValue"]),k(l(ke),{successText:l(s)("vertifyPass"),failText:l(s)("vertifuFail"),sliderText:l(s)("vertifyTips"),imgs:M,show:B.value,onSuccess:e},null,8,["successText","failText","sliderText","show"]),o("div",Pe,[o("h2",null,m(l(s)("login")),1),o("div",{class:R(["language",{"is-ar":l(b)}]),onClick:t[3]||(t[3]=d=>l(p).push("/language"))},[o("img",{src:j.value.href,alt:""},null,8,je),o("img",{src:l(A).href,alt:""},null,8,He)],2)]),o("div",Oe,[o("img",{src:D.value.logo.href,alt:""},null,8,Qe),o("h2",null,m(D.value.name),1)]),o("div",Xe,[g.value===0?(I(),x("div",Ye,[o("div",ze,m(l(s)("邮箱或手机号")),1),o("div",Ge,[k(ee,{modelValue:c.username,"onUpdate:modelValue":t[4]||(t[4]=d=>c.username=d),type:"text",placeholder:l(s)("请输入邮箱或手机号"),clear:""},null,8,["modelValue","placeholder"])])])):E("",!0),g.value===1?(I(),x("div",Je)):E("",!0),o("div",Fe,[o("div",Ze,m(l(s)("password")),1),o("div",We,[k(ee,{modelValue:c.password,"onUpdate:modelValue":t[5]||(t[5]=d=>c.password=d),type:"password",placeholder:l(s)("entryPassword"),clear:"","show-password":""},null,8,["modelValue","placeholder"])])]),o("div",{class:R(["link-content",{"is-ar":l(b)}])},[o("p",null,[P(m(l(s)("如果您没有账号"))+", ",1),o("span",{class:"link",onClick:a},m(l(s)("点击注册")),1)]),o("p",{onClick:t[6]||(t[6]=(...d)=>l(K)&&l(K)(...d)),class:"link"},m(l(s)("forgetPassword")),1)],2),w.value?(I(),x("div",{key:2,class:R(["agree-content",{"is-ar":l(b)}])},[o("div",{class:"check",onClick:t[7]||(t[7]=d=>n.value=!n.value)},[n.value?(I(),me(h,{key:0,name:"success",size:12})):E("",!0)]),o("p",null,[o("span",{onClick:t[8]||(t[8]=d=>n.value=!n.value)},m(l(s)("我已阅读并同意")),1),o("span",{class:"link",onClick:t[9]||(t[9]=d=>v.value=!0)},"《"+m(l(s)("用户协议"))+"》",1)])],2)):E("",!0),o("div",Ke,[k(y,{type:"custom",loading:S.value,block:"",onClick:z},{default:Z(()=>[P(m(l(s)("login")),1)]),_:1},8,["loading"])])])],4)}}},mo=J(qe,[["__scopeId","data-v-c4e771d1"]]);export{mo as default};
