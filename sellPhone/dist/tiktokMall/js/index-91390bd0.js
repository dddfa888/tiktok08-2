import{_ as re,i as ce,v as ue,l as de,a0 as pe,r as n,bF as ve,q as ge,cv as C,o as a,c as r,b as S,w as h,F as J,E as O,x as g,a as o,t as p,g as me,bD as fe,u as l,y as R,n as he,cw as _,T as A,aa as _e,a8 as Ae,Z as H,J as ke,cx as ye,I as Se}from"./index-55507c28.js";import{P as Le}from"./index-16851c38.js";import{L as we}from"./index-748d9839.js";import{E as Ce}from"./index-94a2e4c2.js";import"./index-6e53b41f.js";import"./index-3bdff75a.js";import{S as xe}from"./index-29b5376b.js";import{_ as be}from"./search-icon-e5826669.js";import{_ as Ne}from"./more-b1b21d09.js";import{e as Ue}from"./editProfit-6278ed92.js";import{f as Ee,g as Ie}from"./product.api-71b8732b.js";import{c as Be}from"./index-021b9a81.js";import"./use-id-acc627d9.js";import"./index-64f4bac7.js";import"./index-ae8bb03f.js";import"./index-316b036f.js";import"./function-call-cafb329d.js";import"./index-260e30ee.js";import"./___vite-browser-external_commonjs-proxy-685e0cd7.js";const Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAwCAYAAABqkJjhAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKESURBVHgB7Zk9btswFMefZHu0obGeqt7AtT14q3qC+gZtTpD4BE5u0Gzd7J6g6tipymbAH0lOEGXyGO2G7fwZUAmT6ItiqMAAf4BASnoE/6RIPurRIkU6nY6LxC1oHl0BUsCikvR6vSGSMa6OTLn9fh8iOVutVlMqQY1K0O12x5Zl/UL2A0mCcg6uYbvddtbr9T+SRLqHIfYHKpwIjyL02i1L88qi3EcShg/KjdDTP0mCMoJvULHLb/1ms3kUBEGu2Jh+v38KoWN+G223208Y1oXL2yQBm2CC2KjRaIxkxDIWi8UpPX0Np16vS80BKcH0/HNez2azkMrxN87sdjuXJJAV/O4cnOCHSYex6dm27eUZYxi4sPvOb0Pc/6YSYB58o6f122fDK68Mhg7zOb7FJlKtVruhAwAN/cqGhEMHAr6E8zAkmDMgYQVAS46JNwRG51TAKbwVqHssCDwTXoXMnSc6DjQg5F6J+MIeUkVgj7KP88vl8pU+s6zpxgjWjRGsmzopAk/J1mv2uxSkLX/8v8/LsimKcg/DrU/4dcnFv67Etv9zmz+kiLJgeKPPPOtQipsXNv1Sm/UkzKTTjRGsGyNYN0awboxg3RjBulEWjI1NkSBM9CItjbJgbB1H2LFdQPgoY697xGyYLSmivIGfz+fskMXLskF8wUfi0xtgJp1ujGDdJArGjL+L8zg0caki+N91TOISmNbDjxFxLEfHVBFCdJ/SovKJyxp6eIoCceEhwq8ThOxLHQ8UxIHYL6j3RHg2TTJMPVhEnJadUFbWuyLMySB47SW9S510WOxZa8+pevxWqzVMe5l7dDsYDNzNZnOCVisHQbLAcGBR/ylOSoMsu3tYs9QwhJVNvQAAAABJRU5ErkJggg==";const Je={key:0,class:"result-list pl-4 pr-4"},Oe=["onClick"],Re={key:1,class:"search-history"},Ve={class:"title"},He={key:0,class:"content"},Te=["onClick"],je={key:2,class:"list ml-4 mr-4 mt-4 mb-4"},Me=["onClick"],ze={class:"flex-1 flex left"},Pe={class:"product-img-wrap w-20 h-20",style:{overflow:"hidden"}},De=["src"],Fe={class:"product-info"},Ye={class:"name"},qe={class:"Specification"},Ke={key:0,style:{"margin-right":"20px"}},Qe={key:1},$e={class:"money"},Xe={class:"item-more-content"},We=["onClick"],Ze={__name:"index",setup(es){const T=ce(),{t:k}=ue.useI18n(),V=de(),j=pe(),d=n(j.query.id);let c=n(""),v=n(1),M=n(""),x=n(!1);n({});const m=n([]),b=n([]),z=n(!1),f=n(!1),N=n(!1);let u=n([]);const P=()=>{},D=new URL("/www/png/name-20d65991.png",self.location),U=n(null);ve(()=>{U.value&&console.log(U.value)}),ge(()=>{d.value/1===1?C("searchOne")&&(u.value=C("searchOne")):C("searchTwo")&&(u.value=C("searchTwo"))});const L=ye(()=>{c.value.trim()?(v.value=1,m.value=[],A.loading({forbidClick:!0,loadingType:"spinner"}),I(),F()):A({message:k("请输入搜索关键字"),duration:2e3})},500),F=()=>{const s=c.value.trim(),e=d.value/1===1?"searchOne":"searchTwo";if(s!="")if(u.value.length==0)u.value.push(s),_(e,u.value);else{const i=Be(u.value);i.unshift(s);const w=[...new Set(i)];u.value=w,_(e,w)}},Y=()=>{d.value/1===1?_("searchOne",[]):_("searchTwo",[])},q=()=>{c.value=""},K=s=>{c.value=s,L()},Q=s=>{u.value=[],d.value/1===1?_("searchOne",""):_("searchTwo","")},$=()=>{z.value=!1,L()},X=()=>{let s={pageNum:v.value,pageSize:20,keyword:c.value};Ee(s).then(e=>{console.log(e),A.clear(),v.value++;for(let i=0;i<e.pageList.length;i++)e.pageList[i].check=!1,m.value.push(e.pageList[i]);f.value=!1,e.pageList.length<20?(v.value>1&&A(k("没有更多数据")),N.value=!0):v.value++})},W=()=>{let s={name:c.value,categoryId:"",pageNum:v.value,pageSize:20};Ie(s).then(e=>{A.clear(),console.log("商家自己的商品",e);for(let i=0;i<e.pageList.length;i++)m.value.push(e.pageList[i]);f.value=!1,e.pageList.length<20?(v.value>1&&A(k("没有更多数据")),N.value=!0):v.value++})},E=n(null);d.value/1===2?E.value=W:E.value=X;const I=()=>{console.log(123),E.value()},Z=s=>{console.log("ssss",s),c.value="",b.value=[],M.value=s.goodsId,v.value=1,m.value=[],I()};let B=n([]);const ee=s=>{d.value/1===1?V.push({path:"/productPage/productEdit",query:{item:JSON.stringify(s)}}):(B.value=[],B.value.push(s.id),x.value=!0)},se=(s,e)=>{s.sellingPrice=e},te=()=>{x.value=!1},oe=s=>{d.value/1===1&&V.push({path:"/productPage/details",query:{item:JSON.stringify(s)}})};return(s,e)=>{const i=Se,w=xe,ae=_e,le=Ce,ne=we,ie=Le;return a(),r("div",{class:he(["search-container",{"is-ar":l(T)}])},[S(ae,{fixed:"","left-arrow":"",onClickLeft:e[2]||(e[2]=()=>s.$router.back())},{title:h(()=>[S(w,{modelValue:l(c),"onUpdate:modelValue":e[0]||(e[0]=t=>Ae(c)?c.value=t:c=t),shape:"round",clearable:!1,placeholder:s.$t("请输入商品"),onInput:P},{"left-icon":h(()=>[...e[5]||(e[5]=[o("img",{class:"search-icon",src:be},null,-1)])]),"right-icon":h(()=>[l(c)?(a(),R(i,{key:0,name:"cross",onClick:q,size:"14",color:"#333333"})):g("",!0)]),_:1},8,["modelValue","placeholder"])]),right:h(()=>[o("div",{onClick:e[1]||(e[1]=(...t)=>l(L)&&l(L)(...t))},p(s.$t("搜索")),1)]),_:1}),b.value.length>0?(a(),r("div",Je,[(a(!0),r(J,null,O(b.value,(t,y)=>(a(),r("div",{class:"result-list-item pt-2 pb-2",onClick:G=>Z(t),key:y},p(t.name),9,Oe))),128))])):g("",!0),m.value.length==0?(a(),r("div",Re,[o("div",Ve,[o("p",null,p(s.$t("历史搜索")),1),me(o("div",{class:"clear",onClick:Y},[e[6]||(e[6]=o("img",{src:Ge,alt:"",class:"delete-icon"},null,-1)),o("p",{onClick:Q},p(s.$t("清空")),1)],512),[[fe,l(u).length>0]])]),l(u).length>0?(a(),r("div",He,[(a(!0),r(J,null,O(l(u),(t,y)=>(a(),r("div",{key:y,class:"item",onClick:G=>K(t)},p(t),9,Te))),128))])):g("",!0),l(u).length?g("",!0):(a(),R(le,{key:1,image:l(D).href,description:l(k)("noData")},null,8,["image","description"]))])):g("",!0),m.value.length>0?(a(),r("div",je,[S(ie,{"loading-text":s.$t("加载中"),"loosing-text":s.$t("释放以刷新"),"pulling-text":s.$t("下拉以刷新"),modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),onRefresh:$},{default:h(()=>[S(ne,{ref_key:"checkEl",ref:U,loading:f.value,"onUpdate:loading":e[3]||(e[3]=t=>f.value=t),finished:N.value,"finished-text":s.$t("没有更多了"),onLoad:I},{default:h(()=>[(a(!0),r(J,null,O(m.value,(t,y)=>(a(),r("div",{class:"item pl-3 pr-3 pb-3 pt-3 flex",onClick:G=>oe(t),key:y},[o("div",ze,[o("div",Pe,[o("img",{class:"product-img",src:t.imgUrl1},null,8,De)]),o("div",Fe,[o("div",Ye,p(t.name),1),o("div",qe,[t.categoryName?(a(),r("span",Ke,p(t.categoryName),1)):g("",!0),d.value/1===1?(a(),r("span",Qe,p(l(k)("sales"))+": "+p(t.soldNum),1)):g("",!0)]),o("div",$e,"$"+p(d.value/1===1?l(H)(t.sellingPrice):l(H)(t.systemPrice)),1)])]),o("div",Xe,[o("div",{class:"more",onClick:ke(G=>ee(t),["stop"])},[...e[7]||(e[7]=[o("img",{class:"more-icon",src:Ne},null,-1)])],8,We),d.value/1===1?(a(),R(i,{key:0,name:"arrow",size:"20px",style:{top:"50%",right:"0",position:"absolute","margin-top":"-10px"}})):g("",!0)])],8,Me))),128))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["loading-text","loosing-text","pulling-text","modelValue"])])):g("",!0),S(Ue,{isEdit:l(x),onUpdate:se,productArry:l(B),onClose:te},null,8,["isEdit","productArry"])],2)}}},ks=re(Ze,[["__scopeId","data-v-bb0a6f02"]]);export{ks as default};
