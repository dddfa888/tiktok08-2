import{_ as I,a0 as P,l as A,v as E,r as n,j as R,q as U,o as j,c as q,b as r,w as y,a as v,u as _,T as c,cJ as L,a9 as D,d as x,t as T}from"./index-55507c28.js";import{B as G}from"./index-64f4bac7.js";import{E as V}from"./index-5f89f735.js";import{n as H}from"./nationalityList-74008cae.js";import{c as f}from"./countryList-d29458f2.js";import"./index-6e53b41f.js";import"./index-3bdff75a.js";import"./use-id-acc627d9.js";import"./index-3ce1345e.js";import"./index-29b5376b.js";const J={class:"bindVerify h-full bg-white"},M={class:"content"},O={style:{"margin-top":"22px"}},z={style:{"margin-top":"22px"}},F={__name:"index",setup(K){const $=P(),h=A(),{t:o}=E.useI18n(),a=n(""),u=n(""),s=n(0),d=n(""),p=R(),i=n(!1),b=n("修改手机号码");U(()=>{const e=p.userInfo.phone;if(e&&!p.phoneverif){const t=e.split(" ");b.value="bindPhone",s.value=Number(t[0]),a.value=t[1];for(const l in f)f[l].dialCode===Number(t[0])&&(d.value=f[l].code)}});const w=()=>{if(a.value==""){c(o("entryPhone"));return}if(!/^[0-9]+$/.test(a.value)){c(o("请输入正确的手机号码"));return}if(u.value==""){c(o("请输入登录密码"));return}i.value=!0,N()},C=async()=>{await p.getUserInfo(!0),c(o("bindSuccess")),i.value=!1,setTimeout(()=>{$.query.reset?h.go(-2):h.back()},1e3)},N=()=>{L({target:"".concat(s.value," ").concat(a.value),phone:"".concat(s.value," ").concat(a.value),password:u.value}).then(e=>{C()}).catch(e=>{console.log(e),i.value=!1})},S=(e,t,l)=>{console.log(t),d.value=t,s.value=l},g=n(null),k=()=>{g.value.open()};return(e,t)=>{const l=D,B=G;return j(),q("div",J,[r(l,null,{title:y(()=>[x(T(_(o)(b.value)),1)]),_:1}),v("div",M,[v("div",O,[r(V,{label:_(o)("phoneNum"),placeholderText:_(o)("entryPhone"),modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=m=>a.value=m),area:!0,onSelectArea:k,dialCode:s.value,icon:d.value},null,8,["label","placeholderText","modelValue","dialCode","icon"])]),v("div",z,[r(V,{label:e.$t("登录密码"),placeholderText:e.$t("请输入登录密码"),modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=m=>u.value=m),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])]),r(B,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:i.value,onClick:w},{default:y(()=>[x(T(e.$t("confirm")),1)]),_:1},8,["loading"])]),r(H,{ref_key:"controlChildRef",ref:g,title:e.$t("selectArea"),onGetName:S},null,8,["title"])])}}},le=I(F,[["__scopeId","data-v-cab0a7d6"]]);export{le as default};
