System.register(["./index-legacy-27bdf402.js","./index-legacy-978b0f9e.js","./index-legacy-5db326f8.js","./index-legacy-55462584.js","./index-legacy-00472a3a.js","./index-legacy-591c4a77.js","./index-legacy-3b191162.js","./function-call-legacy-56c77e5e.js","./use-id-legacy-dafc5df9.js"],function(e,t){"use strict";var a,n,l,o,c,u,i,d,s,r,v,p,f,m,x,g,b,h,y,w,j,V,C,_,B,k;return{setters:[e=>{a=e._,n=e.v,l=e.l,o=e.j,c=e.m,u=e.r,i=e.f,d=e.o,s=e.c,r=e.b,v=e.w,p=e.a,f=e.t,m=e.u,x=e.T,g=e.Y,b=e.ct,h=e.a9,y=e.d},e=>{w=e.A},e=>{j=e.P,V=e.N},e=>{C=e.B},null,e=>{_=e.F},e=>{B=e.E},e=>{k=e.D},null],execute:function(){var t=document.createElement("style");t.textContent=".cancellation-content[data-v-0194ffcb]{padding:15px;min-height:calc(100vh - 46px);background-color:#fff}.cancellation-content>.item[data-v-0194ffcb]{margin-bottom:20px}.cancellation-content>.item[data-v-0194ffcb] textarea::-webkit-input-placeholder{color:#868c9a}.cancellation-content>.item>p[data-v-0194ffcb]{font-size:14px;margin-bottom:10px}.cancellation-content>.item[data-v-0194ffcb] .van-field{border:1px solid #ddd;border-radius:4px}.cancellation-content>.item[data-v-0194ffcb] .inputCom{padding-bottom:0}.cancellation-content>.item[data-v-0194ffcb] .inputCom .label{font-size:14px}.cancellation-content>.item[data-v-0194ffcb] .inputCom .iptbox{margin-top:10px;padding-left:16px;padding-right:16px;border-radius:4px}.cancellation-content>.item[data-v-0194ffcb] .inputCom .iptbox input{font-size:14px;padding-left:0}.cancellation-content>.btn[data-v-0194ffcb]{padding-top:20px}.cancellation-content>.btn[data-v-0194ffcb] .van-button{border-radius:4px}.popup-title[data-v-0194ffcb]{text-align:center;padding-top:15px}.popup-content[data-v-0194ffcb]{padding:50px 30px 0}\n",document.head.appendChild(t);const T={class:"cancellation-content"},z={class:"item"},I={class:"item"},U={class:"btn"},$={style:{height:"22rem"}};e("default",a({__name:"index",setup(e){const{t:t}=n.useI18n(),a=l(),E=o(),F=c(()=>{let e={username:"***",safeword:0};return E.userInfo.token?e={...e,...E.userInfo}:a.push("/login"),e}),P=c(()=>{const e=F.value.username;if(F.value.username.indexOf("@")>-1)return e;if(F.value.phone){const e=F.value.phone.split(" ");return`(+${e[0]}) ${e[1]}`}return e}),A=u(!1),D=u(""),N=u(""),O=u(!1),S=async()=>{if(!D.value)return x(t("请输入您要注销账号的原因")),!1;O.value=!0;const e=await g();O.value=!1,e.money>0?x(t("该账号存在可用余额，不可注销！")):Boolean(F.value.safeword)?(A.value=!0,G.value=!0):Y()},Y=async()=>{O.value=!0,A.value=!1,G.value=!1,k.confirm({title:t("您确认要注销吗？"),message:t("警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。"),confirmButtonColor:"#ee0a24",cancelButtonText:t("cancel"),confirmButtonText:t("同意注销")}).then(()=>{q()}).catch(()=>{O.value=!1})},q=()=>{const e={account:F.value.username,reason:D.value,cashPassword:N.value||null};b(e).then(()=>{O.value=!1,x.success(t("注销成功")),setTimeout(()=>{E.logout()},1500)}).catch(()=>{N.value="",O.value=!1})},G=u(!1);return i(()=>N.value,e=>{6===e.length&&(x.loading(""),q(),A.value=!1,N.value="")}),(e,a)=>{const n=h,l=_,o=C,c=j,u=V,i=w;return d(),s("div",null,[r(n,{fixed:""},{title:v(()=>[y(f(m(t)("账号注销")),1)]),_:1}),a[6]||(a[6]=p("div",{style:{height:"46px"}},null,-1)),p("div",T,[p("div",z,[r(B,{label:e.$t("您的账号"),modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),disabled:!0,clearBtn:!1,typeText:"text"},null,8,["label","modelValue"])]),p("div",I,[p("p",null,f(m(t)("为什么要离开？")),1),r(l,{modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=e=>D.value=e),rows:"4",autosize:"",type:"textarea",placeholder:m(t)("pleaseEnter")},null,8,["modelValue","placeholder"])]),p("div",U,[r(o,{type:"danger",loading:O.value,block:"",onClick:S},{default:v(()=>[y(f(e.$t("注销账号")),1)]),_:1},8,["loading"])])]),r(i,{show:A.value,"onUpdate:show":a[5]||(a[5]=e=>A.value=e),title:m(t)("请输入交易密码")},{default:v(()=>[p("div",$,[r(c,{length:6,value:N.value,focused:G.value,onFocus:a[2]||(a[2]=e=>G.value=!0)},null,8,["value","focused"]),r(u,{modelValue:N.value,"onUpdate:modelValue":a[3]||(a[3]=e=>N.value=e),show:G.value,onBlur:a[4]||(a[4]=e=>G.value=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])])}}},[["__scopeId","data-v-0194ffcb"]]))}}});
