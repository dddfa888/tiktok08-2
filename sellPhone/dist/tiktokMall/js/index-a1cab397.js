import{_ as N,e as T,o as l,c as p,b as w,w as f,a as n,F as V,E as F,x as L,y as B,v as P,r as i,j as K,i as z,f as $,m as A,s as E,T as g,q as U,Z as j,M as D,a9 as H,d as c,t as s,n as M,ai as R,aj as W}from"./index-55507c28.js";import{A as q}from"./index-3ce1345e.js";import{P as Z,N as G}from"./index-e25caf73.js";import{E as J}from"./index-94a2e4c2.js";import{B as O}from"./index-64f4bac7.js";import{D as Q}from"./function-call-cafb329d.js";import"./use-id-acc627d9.js";const X=T({name:"ShopMarketing",setup(){const{t:e}=P.useI18n(),a=new URL("/www/png/name-20d65991.png",self.location),y=i([]),v=K(),r=i(""),b=i(),u=i(!1),d=i(!1),m=i(!0),k=z();$(u,t=>{t||(r.value="")});const _=A(()=>{const t=r.value;return String(t).length<6}),S=t=>{var I;!!Number((I=v==null?void 0:v.userInfo)==null?void 0:I.safeword)?(b.value=t,u.value=!0,C.value=!0):Q.confirm({title:e("dialogTips"),message:e("shopSafeWord"),cancelButtonText:e("cancel"),confirmButtonText:e("gotoSet"),confirmButtonColor:"#1552F0",cancelButtonColor:"#999"}).then(()=>{D("/fundsPasswordSettings")}).catch(()=>{console.log("cancel")})},o=()=>{g.loading({duration:0,forbidClick:!1}),d.value=!0;const t={id:b.value.id,safeword:r.value};R(t).then(()=>{g.success(e("shopBuySuc")),d.value=!1,u.value=!1,h()}).catch(()=>{d.value=!1})},h=()=>{W().then(t=>{y.value=t.line||[],g.clear(),m.value=!1}).catch(()=>{g.clear(),m.value=!1})},C=i(!0);return $(()=>r.value,t=>{t.length===6&&(o(),u.value=!1,r.value="")}),E(()=>{g.loading({duration:0,message:e("loading"),forbidClick:!0}),h()}),U(()=>{document.addEventListener("langChange",()=>{h()})}),{isArLang:k,listData:y,passwordShow:u,safewordInput:r,computedSafeWord:_,empytImg:a,loading:d,pageLoading:m,t:e,buyHandle:S,buySureHandle:o,numberStrFormat:j,openPage:D,showKeyboard:C}}}),Y={key:0,class:"marketing-content"},x={class:"icon"},ee=["src"],oe={key:0},ae={key:1},se={style:{height:"22rem"}};function ne(e,a,y,v,r,b){const u=H,d=O,m=J,k=Z,_=G,S=q;return l(),p("div",null,[w(u,{fixed:!0},{title:f(()=>[c(s(e.t("throughCar")),1)]),right:f(()=>[n("p",{onClick:a[0]||(a[0]=o=>e.openPage("/shop/marketing/record"))},s(e.t("shopBuyRecord")),1)]),_:1}),a[5]||(a[5]=n("div",{style:{height:"46px"}},null,-1)),e.listData.length?(l(),p("div",Y,[(l(!0),p(V,null,F(e.listData,o=>(l(),p("div",{key:o.id,class:"item"},[n("div",x,[n("img",{src:o.icon,alt:""},null,8,ee)]),n("div",{class:M(["info",{"is-ar":e.isArLang}])},[n("h3",null,s(o.name),1),n("p",null,[c(s(e.t("可推广产品数")),1),n("span",null,s(o.count),1)]),n("p",null,s(o.desc1),1),n("div",null,[e.isArLang?(l(),p("p",oe,[c("$"+s(e.numberStrFormat(o.prize)),1),n("span",null,"/"+s(e.t("days"))+s(o.per),1)])):(l(),p("p",ae,[c("$"+s(e.numberStrFormat(o.prize)),1),n("span",null,"/"+s(o.per)+s(e.t("days")),1)])),o.count?(l(),B(d,{key:2,type:"primary",size:"small",onClick:h=>e.buyHandle(o)},{default:f(()=>[c(s(e.t("shopBuyNow")),1)]),_:1},8,["onClick"])):(l(),B(d,{key:3,type:"default",disabled:"",size:"small"},{default:f(()=>[c(s(e.t("购买达上限")),1)]),_:1}))])],2)]))),128))])):L("",!0),!e.listData.length&&!e.pageLoading?(l(),B(m,{key:1,image:e.empytImg.href,description:e.t("noData")},null,8,["image","description"])):L("",!0),w(S,{show:e.passwordShow,"onUpdate:show":a[4]||(a[4]=o=>e.passwordShow=o),title:e.t("shopSafeTips")},{default:f(()=>[n("div",se,[w(k,{length:6,value:e.safewordInput,focused:e.showKeyboard,onFocus:a[1]||(a[1]=o=>e.showKeyboard=!0)},null,8,["value","focused"]),w(_,{modelValue:e.safewordInput,"onUpdate:modelValue":a[2]||(a[2]=o=>e.safewordInput=o),show:e.showKeyboard,onBlur:a[3]||(a[3]=o=>e.showKeyboard=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])])}const me=N(X,[["render",ne],["__scopeId","data-v-e6ac5db9"]]);export{me as default};
