/**
 * name: @web-analytics/vue
 * version: v0.2.2
 * description: Website pageview analytics tool for Vue.js (Including VuePress , VitePress etc.) and multi-analytics-platform support.
 * author: chengpeiquan <chengpeiquan@chengpeiquan.com>
 * homepage: https://analytics.js.org/vue/
 * license: MIT
 */
"use strict";var g=Object.defineProperty;var w=(t,e,r)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var o=(t,e,r)=>(w(t,typeof e!="symbol"?e+"":e,r),r);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("@bassist/utils"),l=require("@web-analytics/core");class f{constructor({platform:e,websiteIds:r,debug:s}){o(this,"pluginId");o(this,"platform");o(this,"websiteIds");o(this,"instances");o(this,"debug");this.pluginId="web-analytics-vue",this.platform=e,this.websiteIds=r||[],this.instances=[],this.debug=s??!1,this.init()}init(){try{switch(this.platform){case"baidu":{this.websiteIds.forEach(e=>{const r=l.createBaiduAnalytics({pluginId:this.pluginId,websiteId:e,debug:this.debug});this.instances.push(r)});break}case"cnzz":{this.websiteIds.forEach(e=>{const r=l.createCnzzAnalytics({pluginId:this.pluginId,websiteId:e,debug:this.debug});this.instances.push(r)});break}default:{const e=l.SUPPORTED_ANALYTICS_PLATFORMS.join(", ");this.throwError(`Unsupported platform options, only supported: ${e}.`);break}}}catch(e){this.throwError(`Plugin initialization failed: ${e}.`)}}trackPageview(e){this.instances.forEach(r=>r.trackPageview({...e}))}trackEvent(e){this.instances.forEach(r=>r.trackEvent({...e}))}throwError(e){throw new Error(`[${this.pluginId}] ${e}`)}}function y({version:t}){try{const[r]=t.split(".");return r?Number(r):3}catch{return 3}}function p(t){return l.SUPPORTED_ANALYTICS_PLATFORMS.includes(t)?`$${t}Analytics`:""}function h({analytics:t,platform:e}){return(r,s)=>{if(!d.isBrowser)return;const n=new f({platform:e,...s});for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);const c=Object.getPrototypeOf(n);Object.setPrototypeOf(t,c);const a=p(e);if(a)switch(y(r)){case 2:{r.prototype[a]=t;break}case 3:{r.config.globalProperties[a]=t;break}}}}function A(){const t={};return{baiduAnalytics:t,registerBaiduAnalytics:h({analytics:t,platform:"baidu"})}}function P(){const t={};return{cnzzAnalytics:t,registerCnzzAnalytics:h({analytics:t,platform:"cnzz"})}}function b({analytics:t,platform:e}){return{install:(r,{router:s,...n})=>{if(!d.isBrowser)return;const c=new f({platform:e,...n});for(const u in c)Object.prototype.hasOwnProperty.call(c,u)&&(t[u]=c[u]);const a=Object.getPrototypeOf(c);Object.setPrototypeOf(t,a);const i=p(e);if(i)switch(y(r)){case 2:{r.prototype[i]=t;break}case 3:{r.config.globalProperties[i]=t;break}}s&&s.afterEach(()=>{t.trackPageview({pageUrl:window.location.href})})}}}function z(){const t={};return{baiduAnalytics:t,registerBaiduAnalytics:b({analytics:t,platform:"baidu"})}}function I(){const t={};return{cnzzAnalytics:t,registerCnzzAnalytics:b({analytics:t,platform:"cnzz"})}}exports.createVitePressBaiduAnalytics=A;exports.createVitePressCnzzAnalytics=P;exports.createVueBaiduAnalytics=z;exports.createVueCnzzAnalytics=I;
