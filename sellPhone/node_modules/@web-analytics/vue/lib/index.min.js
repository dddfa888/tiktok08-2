/**
 * name: @web-analytics/vue
 * version: v0.2.2
 * description: Website pageview analytics tool for Vue.js (Including VuePress , VitePress etc.) and multi-analytics-platform support.
 * author: chengpeiquan <chengpeiquan@chengpeiquan.com>
 * homepage: https://analytics.js.org/vue/
 * license: MIT
 */
(function(s,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("@bassist/utils"),require("@web-analytics/core")):typeof define=="function"&&define.amd?define(["exports","@bassist/utils","@web-analytics/core"],n):(s=typeof globalThis<"u"?globalThis:s||self,n(s.Vue={},s["@bassist/utils"],s["@web-analytics/core"]))})(this,function(s,n,r){"use strict";var I=Object.defineProperty;var O=(s,n,r)=>n in s?I(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r;var l=(s,n,r)=>(O(s,typeof n!="symbol"?n+"":n,r),r);class y{constructor({platform:e,websiteIds:i,debug:o}){l(this,"pluginId");l(this,"platform");l(this,"websiteIds");l(this,"instances");l(this,"debug");this.pluginId="web-analytics-vue",this.platform=e,this.websiteIds=i||[],this.instances=[],this.debug=o??!1,this.init()}init(){try{switch(this.platform){case"baidu":{this.websiteIds.forEach(e=>{const i=r.createBaiduAnalytics({pluginId:this.pluginId,websiteId:e,debug:this.debug});this.instances.push(i)});break}case"cnzz":{this.websiteIds.forEach(e=>{const i=r.createCnzzAnalytics({pluginId:this.pluginId,websiteId:e,debug:this.debug});this.instances.push(i)});break}default:{const e=r.SUPPORTED_ANALYTICS_PLATFORMS.join(", ");this.throwError(`Unsupported platform options, only supported: ${e}.`);break}}}catch(e){this.throwError(`Plugin initialization failed: ${e}.`)}}trackPageview(e){this.instances.forEach(i=>i.trackPageview({...e}))}trackEvent(e){this.instances.forEach(i=>i.trackEvent({...e}))}throwError(e){throw new Error(`[${this.pluginId}] ${e}`)}}function p({version:t}){try{const[i]=t.split(".");return i?Number(i):3}catch{return 3}}function b(t){return r.SUPPORTED_ANALYTICS_PLATFORMS.includes(t)?`$${t}Analytics`:""}function h({analytics:t,platform:e}){return(i,o)=>{if(!n.isBrowser)return;const a=new y({platform:e,...o});for(const c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c]);const u=Object.getPrototypeOf(a);Object.setPrototypeOf(t,u);const f=b(e);if(f)switch(p(i)){case 2:{i.prototype[f]=t;break}case 3:{i.config.globalProperties[f]=t;break}}}}function w(){const t={};return{baiduAnalytics:t,registerBaiduAnalytics:h({analytics:t,platform:"baidu"})}}function A(){const t={};return{cnzzAnalytics:t,registerCnzzAnalytics:h({analytics:t,platform:"cnzz"})}}function g({analytics:t,platform:e}){return{install:(i,{router:o,...a})=>{if(!n.isBrowser)return;const u=new y({platform:e,...a});for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&(t[d]=u[d]);const f=Object.getPrototypeOf(u);Object.setPrototypeOf(t,f);const c=b(e);if(c)switch(p(i)){case 2:{i.prototype[c]=t;break}case 3:{i.config.globalProperties[c]=t;break}}o&&o.afterEach(()=>{t.trackPageview({pageUrl:window.location.href})})}}}function P(){const t={};return{baiduAnalytics:t,registerBaiduAnalytics:g({analytics:t,platform:"baidu"})}}function z(){const t={};return{cnzzAnalytics:t,registerCnzzAnalytics:g({analytics:t,platform:"cnzz"})}}s.createVitePressBaiduAnalytics=w,s.createVitePressCnzzAnalytics=A,s.createVueBaiduAnalytics=P,s.createVueCnzzAnalytics=z,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
