{"ast":null,"code":"import \"vant/es/notify/style\";\nimport _Notify from \"vant/es/notify\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport axios from \"axios\";\nimport { i18n } from \"@/i18n\";\naxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n// 配置 环境的接口地址\n// const BASE_URL = window.location.protocol + \"//\" + window.location.host + '/wap/'\n\n// const BASE_URL = process.env.NODE_ENV === 'production' ? 'https://rfbhabkjk.com/wap/' : 'https://rfbhabkjk.com/wap/'\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/wap' : 'https://www.sparmalla.top/wap/'\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/wap' : 'https://tk04.coinhakopro.org/wap/'\nconst BASE_URL = \"https://tk09.adsshopm.org/wap\";\n// 创建\nconst request = axios.create({\n  baseURL: BASE_URL,\n  timeout: 30000,\n  // 超时时间\n  headers: {\n    \"Content-Type\": \"application/json;charset=UTF-8\"\n  }\n});\n\n// 拦截请求\nrequest.interceptors.request.use(config => {\n  if (config.loading) {\n    _Toast.loading({\n      duration: 0,\n      forbidClick: true\n    });\n  }\n  if (!config.params) {\n    // 放在哪里\n    config.params = {};\n  }\n  if (localStorage.getItem(\"token\")) {\n    config.params[\"token\"] = localStorage.getItem(\"token\");\n  }\n  if (i18n.locale === \"zh-CN\") {\n    config.params[\"lang\"] = \"cn\";\n  } else if (i18n.locale === \"CN\") {\n    config.params[\"lang\"] = \"tw\";\n  } else if (i18n.locale === \"ko\") {\n    config.params[\"lang\"] = \"en\";\n  } else if (i18n.locale === \"de\") {\n    config.params[\"lang\"] = \"de\";\n  } else {\n    config.params[\"lang\"] = \"en\";\n  }\n  return config;\n}, error => {\n  Promise.reject(error);\n});\n\n/**\r\n * 烤猫, [7/27/2022 9:08 PM]\r\n * 0 成功\r\n 1 直接显示\r\n 105 直接提示“当前还需交易“ + 返回的金额值 + ”,才可提币\"\r\n 401 是需要实名认证，问客户”未实名认证，是否认证？\"\r\n 403 无登录信息，跳转登录页面\r\n 506 \"账户异常需要进行C3认证，请联系在线客服。\"\r\n */\n\n// 拦截响应\nrequest.interceptors.response.use(res => {\n  // 200开头的\n  if (res.config.loading) {\n    _Toast.clear();\n  }\n  const {\n    code,\n    data,\n    msg\n  } = res.data;\n  switch (code / 1) {\n    case 0:\n      return Promise.resolve(data);\n    case 403:\n      localStorage.removeItem(\"token\");\n      // this.$router.push({path:'/login'})\n      // window.location = '/#/login'\n      return;\n    default:\n      _Notify({\n        color: \"#FFFFFF\",\n        background: \"#ff0000\",\n        message: i18n.t(msg)\n      });\n      _Toast.fail(i18n.t(msg));\n      console.log(\"错误\");\n      return Promise.reject(res.data);\n  }\n}, error => {\n  if (error && error.response) {\n    switch (error.response.status) {\n      case 400:\n        error.message = i18n.t(\"请求错误\");\n        break;\n      case 401:\n        error.message = i18n.t(\"未授权，请登录\");\n        break;\n      case 403:\n        error.message = i18n.t(\"拒绝访问\");\n        break;\n      case 404:\n        error.message = i18n.t(\"请求地址不存在:\") + error.response.config.url;\n        break;\n      case 408:\n        error.message = i18n.t(\"请求超时\");\n        break;\n      case 500:\n        error.message = i18n.t(\"服务器内部错误\");\n        break;\n      case 501:\n        error.message = i18n.t(\"服务未实现\");\n        break;\n      case 502:\n        error.message = i18n.t(\"网关错误\");\n        break;\n      case 503:\n        error.message = i18n.t(\"服务不可用\");\n        break;\n      case 504:\n        error.message = i18n.t(\"网关超时\");\n        break;\n      case 505:\n        error.message = i18n.t(\"HTTP版本不受支持\");\n        break;\n      default:\n        error.message = _Toast.fail({\n          // icon: 'none',\n          // message: i18n.t(msg)\n          message: i18n.t(\"网络波动请刷新页面\")\n        });\n        Promise.reject(error.data);\n        break;\n    }\n  }\n  // eslint-disable-next-line prefer-promise-reject-errors\n  return Promise.reject(error);\n});\nexport default request;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}