{"remainingRequest":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\src\\page\\productDetailsPage\\productComment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\src\\page\\productDetailsPage\\productComment.vue","mtime":1760944158215},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\babel-loader\\lib\\index.js","mtime":1761044716268},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyBnZXRQcm9kdWN0RXZhbHVhdGlvbkNhdGVnb3J5IH0gZnJvbSAiQC9hcGkiOw0KLy8gaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gImh0dHAiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRXNQcm9kdWN0Q29tbWVudCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgaXRlbW5hbWU6IHByb2Nlc3MuZW52LlZVRV9BUFBfSVRFTV9OQU1FLA0KICAgICAgcGFnZU51bTogMSwNCiAgICAgIHBhZ2VTaXplOiA1LA0KICAgICAgZXZhbHVhdGlvblR5cGVLZXk6IHVuZGVmaW5lZCwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgY2F0ZWdvcnlOdW06IHsNCiAgICAgICAgaGF2ZVBpY3R1cmU6IHsNCiAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCJtZXNzYWdlLmhvbWUuaGFzSW1hZ2UiKSwNCiAgICAgICAgICBudW06ICIwIiwNCiAgICAgICAgICBldmFsdWF0aW9uVHlwZTogLTIsDQogICAgICAgIH0sDQogICAgICAgIHBvc2l0aXZlQ29tbWVudHM6IHsNCiAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCJtZXNzYWdlLmhvbWUuaGlnaE9waW5pb24iKSwNCiAgICAgICAgICBudW06ICIwIiwNCiAgICAgICAgICBldmFsdWF0aW9uVHlwZTogMSwNCiAgICAgICAgfSwNCiAgICAgICAgbWVkaXVtUmV2aWV3OiB7DQogICAgICAgICAgdGV4dDogdGhpcy4kdCgibWVzc2FnZS5ob21lLm1lZGl1bU9waW5pb24iKSwNCiAgICAgICAgICBudW06ICIwIiwNCiAgICAgICAgICBldmFsdWF0aW9uVHlwZTogMiwNCiAgICAgICAgfSwNCiAgICAgICAgbmVnYXRpdmVDb21tZW50OiB7DQogICAgICAgICAgdGV4dDogdGhpcy4kdCgibWVzc2FnZS5ob21lLmxvd09waW5pb24iKSwNCiAgICAgICAgICBudW06ICIwIiwNCiAgICAgICAgICBldmFsdWF0aW9uVHlwZTogMywNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICBldmFsdWF0aW9uSW1hZ2VzOiBbXSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoInByb2R1Y3REZXRhaWxzIiwgWw0KICAgICAgInByb2R1Y3REZXRhaWxzIiwNCiAgICAgICJwcm9kdWN0Q29tbWVudCIsDQogICAgICAicHJvZHVjdENvbW1lbnRQYWdlSW5mbyIsDQogICAgICAicHJvZHVjdENvbW1lbnROdW0iLA0KICAgIF0pLA0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgYWJicmV2aWF0ZWROYW1lKHN0ciwgZnJvbnRMZW4gPSAyLCBlbmRMZW4gPSAyKSB7DQogICAgICBsZXQgbGVuID0gc3RyLmxlbmd0aCAtIGZyb250TGVuIC0gZW5kTGVuOw0KICAgICAgbGV0IHggPSAiIjsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgeCArPSAiKiI7DQogICAgICB9DQogICAgICByZXR1cm4gKA0KICAgICAgICBzdHIuc3Vic3RyaW5nKDAsIGZyb250TGVuKSArIHggKyBzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSBlbmRMZW4pDQogICAgICApOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgYXN5bmMgcHJvZHVjdERldGFpbHMobmV3VmFsdWUsIG9sZFZhbHVlKSB7DQogICAgICBpZiAobmV3VmFsdWUgJiYgb2xkVmFsdWUgJiYgbmV3VmFsdWUuaWQgIT09IG9sZFZhbHVlLmlkKSB7DQogICAgICAgIHRoaXMucmVxdWVzdENvbW1lbmQoKTsNCiAgICAgICAgdGhpcy5yZXF1ZXN0RXZhbHVhdGlvbkNhdGVnb3J5KCk7DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC4uLm1hcEFjdGlvbnMoInByb2R1Y3REZXRhaWxzIiwgWyJyZXF1ZXN0UmVjb21tZW5kTExpc3QiXSksDQogICAgLy8gc3ViVXNlcm5hbWUodXNlcikgew0KICAgIC8vICAgaWYgKHVzZXIuaW5kZXhPZigiQCIpIDwgMCkgew0KICAgIC8vICAgICBsZXQgc3RyID0gdXNlci5zdWJzdHJpbmcoMiwgdXNlci5sZW5ndGggLSAxKTsNCiAgICAvLyAgICAgbGV0IG5hbWUgPSB1c2VyLnJlcGxhY2Uoc3RyLCAiKioqIik7DQogICAgLy8gICAgIHJldHVybiBuYW1lOw0KICAgIC8vICAgfSBlbHNlIHsNCiAgICAvLyAgICAgbGV0IHN0ciA9IHVzZXIuc3Vic3RyaW5nKDEsIHVzZXIuaW5kZXhPZigiQCIpKTsNCiAgICAvLyAgICAgbGV0IG5hbWUgPSB1c2VyLnJlcGxhY2Uoc3RyLCAiKioqIik7DQogICAgLy8gICAgIHJldHVybiBuYW1lOw0KICAgIC8vICAgfQ0KICAgIC8vIH0sDQogICAgDQogICAgYXN5bmMgcmVxdWVzdENvbW1lbmQocGFyYW1zKSB7DQogICAgICB0cnkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICBwYXJhbXMgPSBwYXJhbXMgPz8gew0KICAgICAgICAgIHNlbGxlckdvb2RzSWQ6IHRoaXMucHJvZHVjdERldGFpbHMuaWQsDQogICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLA0KICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLA0KICAgICAgICB9Ow0KICAgICAgICBhd2FpdCB0aGlzLnJlcXVlc3RSZWNvbW1lbmRMTGlzdChwYXJhbXMpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnN0IHsgcGFnZUluZm8gfSA9IHJlczsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcGFnZUluZm8udG90YWxFbGVtZW50czsNCiAgICAgICAgfSk7DQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHRoaXMuZ2VuSW1hZ2VMaXN0KCk7DQogICAgfSwNCg0KICAgIGFzeW5jIHJlcXVlc3RFdmFsdWF0aW9uQ2F0ZWdvcnkoKSB7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRQcm9kdWN0RXZhbHVhdGlvbkNhdGVnb3J5KHsNCiAgICAgICAgZ29vZElkOiB0aGlzLnByb2R1Y3REZXRhaWxzLmlkLA0KICAgICAgfSk7DQogICAgICBpZiAocmVzICYmIHJlcy5jb2RlID09PSAiMCIpIHsNCiAgICAgICAgZm9yIChsZXQga2V5IGluIHJlcy5kYXRhKSB7DQogICAgICAgICAgdGhpcy5jYXRlZ29yeU51bVtrZXldLm51bSA9IHJlcy5kYXRhW2tleV07DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgZ2VuSW1hZ2VMaXN0KCkgew0KICAgICAgdGhpcy5ldmFsdWF0aW9uSW1hZ2VzID0gW107DQogICAgICBmb3IgKGxldCBldmFsdWF0aW9uIG9mIHRoaXMucHJvZHVjdENvbW1lbnQpIHsNCiAgICAgICAgY29uc3QgaW1nVXJscyA9IE9iamVjdC5rZXlzKGV2YWx1YXRpb24pDQogICAgICAgICAgLmZpbHRlcigoeCkgPT4geC5pbmNsdWRlcygiaW1nVXJsIikgJiYgISFldmFsdWF0aW9uW3hdKQ0KICAgICAgICAgIC5tYXAoKHgpID0+IGV2YWx1YXRpb25beF0pOw0KICAgICAgICB0aGlzLmV2YWx1YXRpb25JbWFnZXMucHVzaChpbWdVcmxzKTsNCiAgICAgICAgaWYgKGV2YWx1YXRpb24uY29udGVudCA9PSAiIikgew0KICAgICAgICAgIGV2YWx1YXRpb24uY29udGVudCA9IHRoaXMuJHQoIm1lc3NhZ2UuaG9tZS7nlKjmiLfmnKrlj5Hooajor4TorroiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZXZhbHVhdGlvbi5jb250ZW50ID09ICLns7vnu5/pu5jorqTlpb3or4QiKSB7DQogICAgICAgICAgZXZhbHVhdGlvbi5jb250ZW50ID0gdGhpcy4kdCgibWVzc2FnZS5ob21lLuezu+e7n+m7mOiupOWlveivhCIpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCg0KICAgIG9uRXZhbHVhdGlvbkNsaWNrKGtleSkgew0KICAgICAgdGhpcy5wYWdlTnVtID0gMDsNCiAgICAgIHRoaXMudG90YWwgPSAwOw0KICAgICAgdGhpcy5ldmFsdWF0aW9uVHlwZUtleSA9IGtleTsNCiAgICAgIHRoaXMucmVxdWVzdENvbW1lbmQoew0KICAgICAgICBzZWxsZXJHb29kc0lkOiB0aGlzLnByb2R1Y3REZXRhaWxzLmlkLA0KICAgICAgICBwYWdlTnVtOiB0aGlzLnBhZ2VOdW0sDQogICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLA0KICAgICAgICBldmFsdWF0aW9uVHlwZTogdGhpcy5jYXRlZ29yeU51bVtrZXldLmV2YWx1YXRpb25UeXBlLA0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGN1cnJlbnRDaGFuZ2UocGFnZSkgew0KICAgICAgdGhpcy5wYWdlTnVtID0gcGFnZTsNCiAgICAgIHRoaXMucmVxdWVzdENvbW1lbmQoKTsNCiAgICB9LA0KICAgIHRpbWVzdGFtcFRvVGltZSh0aW1lc3RhbXApIHsNCiAgICAgIHRpbWVzdGFtcCA9IHRpbWVzdGFtcCA/IHRpbWVzdGFtcCA6IG51bGw7DQogICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7IC8v5pe26Ze05oiz5Li6MTDkvY3pnIAqMTAwMO+8jOaXtumXtOaIs+S4ujEz5L2N55qE6K+d5LiN6ZyA5LmYMTAwMA0KICAgICAgbGV0IFkgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyAiLSI7DQogICAgICBsZXQgTSA9DQogICAgICAgIChkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTANCiAgICAgICAgICA/ICIwIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKQ0KICAgICAgICAgIDogZGF0ZS5nZXRNb250aCgpICsgMSkgKyAiLSI7DQogICAgICBsZXQgRCA9DQogICAgICAgIChkYXRlLmdldERhdGUoKSA8IDEwID8gIjAiICsgZGF0ZS5nZXREYXRlKCkgOiBkYXRlLmdldERhdGUoKSkgKyAiICI7DQogICAgICBsZXQgaCA9DQogICAgICAgIChkYXRlLmdldEhvdXJzKCkgPCAxMCA/ICIwIiArIGRhdGUuZ2V0SG91cnMoKSA6IGRhdGUuZ2V0SG91cnMoKSkgKyAiOiI7DQogICAgICBsZXQgbSA9DQogICAgICAgIChkYXRlLmdldE1pbnV0ZXMoKSA8IDEwID8gIjAiICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBkYXRlLmdldE1pbnV0ZXMoKSkgKw0KICAgICAgICAiOiI7DQogICAgICBsZXQgcyA9DQogICAgICAgIGRhdGUuZ2V0U2Vjb25kcygpIDwgMTAgPyAiMCIgKyBkYXRlLmdldFNlY29uZHMoKSA6IGRhdGUuZ2V0U2Vjb25kcygpOw0KICAgICAgcmV0dXJuICRmb3JtYXRab25lRGF0ZShZICsgTSArIEQgKyBoICsgbSArIHMpOw0KICAgIH0sDQogICAgaXNJbnRlZ2VyKG51bSkgew0KICAgICAgaWYgKHBhcnNlSW50KG51bSwgMTApID09PSBudW0pIHsNCiAgICAgICAgcmV0dXJuIG51bSArICIuMCI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gbnVtOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["productComment.vue"],"names":[],"mappings":";AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"productComment.vue","sourceRoot":"src/page/productDetailsPage","sourcesContent":["<template>\r\n  <div class=\"product-comment\">\r\n    <div class=\"p-header\">\r\n      <div class=\"title1\">\r\n        {{ this.$t(\"message.home.userEvaluation\" /**用户评价 */) }}\r\n        <span v-if=\"itemname !== 'Inchoi'\">({{ productCommentNum || 0 }})</span>\r\n       \r\n      </div>\r\n      <div style=\"display: flex; flex-direction: row\">\r\n        <div\r\n          v-for=\"item in Object.keys(categoryNum)\"\r\n          @click=\"onEvaluationClick(item)\"\r\n          class=\"button\"\r\n          :class=\"item === evaluationTypeKey ? 'active' : ''\"\r\n          :key=\"item\"\r\n        >\r\n          {{ categoryNum[item].text }}({{ categoryNum[item].num }})\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"product-comment-content\"\r\n      v-loading=\"loading\"\r\n      style=\"padding-top: 10px\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in productComment\"\r\n        :key=\"index\"\r\n        class=\"product-comment-item\"\r\n      >\r\n        <div class=\"product-comment-top flex-start\">\r\n          <div class=\"userInfo\">\r\n            <img\r\n              :src=\"\r\n                require(`@/assets/image/avatar/${\r\n                  item.avatar || Math.floor(Math.random() * 20)\r\n                }.png`)\r\n              \"\r\n              alt=\"User\"\r\n            />\r\n            <div>{{ item.userName }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"rate\">\r\n          <div class=\"rate-box\">\r\n            <el-rate disabled :value=\"item.rating\"></el-rate>\r\n            <span style=\"color: var(--color-main); font-size: 12px\">{{\r\n              $t(\"message.home.订单已完成\")\r\n            }}</span>\r\n          </div>\r\n        </div>\r\n        <!-- <div v-if=\"item.attributes\" class=\"attrbox\">\r\n          <div v-for=\"(i, d) in item.attributes\" :key=\"d\" class=\"attr\">\r\n            <div v-if=\"i.attrName\">\r\n              <span>{{ i.attrName }}</span\r\n              >:<span>{{ i.attrValue }}</span>\r\n            </div>\r\n          </div>\r\n        </div> -->\r\n        <p class=\"product-comment-text\">\r\n          {{ item.content }}\r\n        </p>\r\n        <div>\r\n          <el-image\r\n            class=\"evaluation-img\"\r\n            v-for=\"url in evaluationImages[index]\"\r\n            :src=\"url\"\r\n            :key=\"url\"\r\n            :preview-src-list=\"evaluationImages[index]\"\r\n          >\r\n          </el-image>\r\n        </div>\r\n        <span class=\"eval-time\"\r\n          ><span v-if=\"item.countryName && itemname !== 'Inchoi'&& itemname !== 'Green Mall'\"\r\n            >{{ item.countryName }}&nbsp;>>&nbsp; </span\r\n          >{{ $formatZoneDate(item.evaluationTime) }}</span\r\n        >\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-empty\r\n        :description=\"$t('message.home.noComments')\"\r\n        v-if=\"!productComment.length\"\r\n      ></el-empty>\r\n    </div>\r\n    <div class=\"product-comment-pagination\" v-if=\"total > 5\">\r\n      <el-pagination\r\n        background\r\n        layout=\"prev,next\"\r\n        class=\"es-pagination\"\r\n        :current-page=\"pageNum\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :prev-text=\"$t('message.home.prevPage')\"\r\n        :next-text=\"$t('message.home.nextPage')\"\r\n        @current-change=\"currentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport { getProductEvaluationCategory } from \"@/api\";\r\n// import { request } from \"http\";\r\nexport default {\r\n  name: \"EsProductComment\",\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      itemname: process.env.VUE_APP_ITEM_NAME,\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      evaluationTypeKey: undefined,\r\n      total: 0,\r\n      categoryNum: {\r\n        havePicture: {\r\n          text: this.$t(\"message.home.hasImage\"),\r\n          num: \"0\",\r\n          evaluationType: -2,\r\n        },\r\n        positiveComments: {\r\n          text: this.$t(\"message.home.highOpinion\"),\r\n          num: \"0\",\r\n          evaluationType: 1,\r\n        },\r\n        mediumReview: {\r\n          text: this.$t(\"message.home.mediumOpinion\"),\r\n          num: \"0\",\r\n          evaluationType: 2,\r\n        },\r\n        negativeComment: {\r\n          text: this.$t(\"message.home.lowOpinion\"),\r\n          num: \"0\",\r\n          evaluationType: 3,\r\n        },\r\n      },\r\n      evaluationImages: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"productDetails\", [\r\n      \"productDetails\",\r\n      \"productComment\",\r\n      \"productCommentPageInfo\",\r\n      \"productCommentNum\",\r\n    ]),\r\n  },\r\n  filters: {\r\n    abbreviatedName(str, frontLen = 2, endLen = 2) {\r\n      let len = str.length - frontLen - endLen;\r\n      let x = \"\";\r\n      for (let i = 0; i < len; i++) {\r\n        x += \"*\";\r\n      }\r\n      return (\r\n        str.substring(0, frontLen) + x + str.substring(str.length - endLen)\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    async productDetails(newValue, oldValue) {\r\n      if (newValue && oldValue && newValue.id !== oldValue.id) {\r\n        this.requestCommend();\r\n        this.requestEvaluationCategory();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"productDetails\", [\"requestRecommendLList\"]),\r\n    // subUsername(user) {\r\n    //   if (user.indexOf(\"@\") < 0) {\r\n    //     let str = user.substring(2, user.length - 1);\r\n    //     let name = user.replace(str, \"***\");\r\n    //     return name;\r\n    //   } else {\r\n    //     let str = user.substring(1, user.indexOf(\"@\"));\r\n    //     let name = user.replace(str, \"***\");\r\n    //     return name;\r\n    //   }\r\n    // },\r\n    \r\n    async requestCommend(params) {\r\n      try {\r\n        this.loading = true;\r\n        params = params ?? {\r\n          sellerGoodsId: this.productDetails.id,\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n        };\r\n        await this.requestRecommendLList(params).then((res) => {\r\n          const { pageInfo } = res;\r\n          this.total = pageInfo.totalElements;\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.genImageList();\r\n    },\r\n\r\n    async requestEvaluationCategory() {\r\n      const res = await getProductEvaluationCategory({\r\n        goodId: this.productDetails.id,\r\n      });\r\n      if (res && res.code === \"0\") {\r\n        for (let key in res.data) {\r\n          this.categoryNum[key].num = res.data[key];\r\n        }\r\n      }\r\n    },\r\n\r\n    genImageList() {\r\n      this.evaluationImages = [];\r\n      for (let evaluation of this.productComment) {\r\n        const imgUrls = Object.keys(evaluation)\r\n          .filter((x) => x.includes(\"imgUrl\") && !!evaluation[x])\r\n          .map((x) => evaluation[x]);\r\n        this.evaluationImages.push(imgUrls);\r\n        if (evaluation.content == \"\") {\r\n          evaluation.content = this.$t(\"message.home.用户未发表评论\");\r\n        }\r\n        if (evaluation.content == \"系统默认好评\") {\r\n          evaluation.content = this.$t(\"message.home.系统默认好评\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onEvaluationClick(key) {\r\n      this.pageNum = 0;\r\n      this.total = 0;\r\n      this.evaluationTypeKey = key;\r\n      this.requestCommend({\r\n        sellerGoodsId: this.productDetails.id,\r\n        pageNum: this.pageNum,\r\n        pageSize: this.pageSize,\r\n        evaluationType: this.categoryNum[key].evaluationType,\r\n      });\r\n    },\r\n\r\n    currentChange(page) {\r\n      this.pageNum = page;\r\n      this.requestCommend();\r\n    },\r\n    timestampToTime(timestamp) {\r\n      timestamp = timestamp ? timestamp : null;\r\n      let date = new Date(timestamp); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n      let Y = date.getFullYear() + \"-\";\r\n      let M =\r\n        (date.getMonth() + 1 < 10\r\n          ? \"0\" + (date.getMonth() + 1)\r\n          : date.getMonth() + 1) + \"-\";\r\n      let D =\r\n        (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()) + \" \";\r\n      let h =\r\n        (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) + \":\";\r\n      let m =\r\n        (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n        \":\";\r\n      let s =\r\n        date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\r\n      return $formatZoneDate(Y + M + D + h + m + s);\r\n    },\r\n    isInteger(num) {\r\n      if (parseInt(num, 10) === num) {\r\n        return num + \".0\";\r\n      } else {\r\n        return num;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.product-comment {\r\n  border: 1px solid var(--color-border);\r\n  width: 957px;\r\n  .product-comment-text {\r\n    display: -webkit-box;\r\n  }\r\n\r\n  .button {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 4px 10px;\r\n    // height: 28px;\r\n    border-radius: 14px;\r\n    color: #999999;\r\n    margin-right: 13px;\r\n    cursor: pointer;\r\n    background: #eeeeee;\r\n\r\n    &.active {\r\n      color: #ffffff;\r\n      // border: 1px solid var(--color-main);\r\n      background: var(--color-main);\r\n    }\r\n  }\r\n\r\n  .evaluation-img {\r\n    width: 87px;\r\n    height: 87px;\r\n    border: 1px solid #eeeeee;\r\n    border-radius: 4px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .p-header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    border-bottom: 1px solid #eee;\r\n    height: 70px;\r\n    padding-left: 37px;\r\n    padding-right: 16px;\r\n    // padding-bottom: 30px;\r\n    // background-color: #eee;\r\n  }\r\n\r\n  .title1 {\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    color: var(--color-title);\r\n    margin-left: 22px;\r\n    // border-bottom: 1px solid var(--color-border);\r\n    // padding: 20px 37px 19px 37px;\r\n  }\r\n\r\n  &-item {\r\n    padding: 15px 40px;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n\r\n  &-top {\r\n    font-size: 12px;\r\n    justify-content: space-between;\r\n\r\n    .userInfo {\r\n      display: flex;\r\n      align-items: center;\r\n      font-weight: 400;\r\n      font-size: 12px;\r\n      color: var(-color-black);\r\n      margin-bottom: 4px;\r\n\r\n      img {\r\n        width: 31px;\r\n        height: 31px;\r\n        object-fit: cover;\r\n        border-radius: 100%;\r\n        margin-right: 8px;\r\n      }\r\n\r\n      span {\r\n        color: var(--color-subtitle);\r\n      }\r\n    }\r\n  }\r\n  .rate {\r\n    .rate-box {\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 12px;\r\n      color: #000;\r\n    }\r\n  }\r\n  .eval-time {\r\n    font-size: 12px;\r\n    color: #999999;\r\n    margin-top: 10px;\r\n    display: inline-block;\r\n  }\r\n  &-text {\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    padding: 10px 0;\r\n    color: var(-color-black);\r\n    display: inherit !important;\r\n    word-wrap: break-word;\r\n  }\r\n\r\n  &-pagination {\r\n    width: 100%;\r\n    text-align: center;\r\n    padding: 40px 0;\r\n  }\r\n  .attrbox {\r\n    display: flex;\r\n    font-size: 12px;\r\n    color: #333;\r\n    .attr {\r\n      &:nth-child(2) {\r\n        margin-left: 5px;\r\n        padding-left: 5px;\r\n        border-left: 1px solid #999;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}