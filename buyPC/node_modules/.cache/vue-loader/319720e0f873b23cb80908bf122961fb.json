{"remainingRequest":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\src\\page\\settlementPage\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\src\\page\\settlementPage\\index.vue","mtime":1760944158217},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\babel-loader\\lib\\index.js","mtime":1761044716268},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsNCmltcG9ydCBFc0ljb25UaXBzIGZyb20gIkAvY29tcG9uZW50cy9pY29uVGlwcyI7DQppbXBvcnQgRXNPcmRlclN1bSBmcm9tICIuL29yZGVyU3VtLnZ1ZSI7DQppbXBvcnQgRXNPcmRlckxpc3QgZnJvbSAiLi9vcmRlckxpc3QudnVlIjsNCmltcG9ydCBFc1BheU1ldGhvZCBmcm9tICIuL3BheU1ldGhvZC52dWUiOw0KaW1wb3J0IEVzUGF5TW9kYWwgZnJvbSAiLi9wYXlNb2RhbC52dWUiOw0KaW1wb3J0IEFkZHJlc3NEaWFsb2cgZnJvbSAiLi9hZGRyZXNzIjsNCi8vIGltcG9ydCBBZGRBZGRyZXNzRGlhbG9nIGZyb20gJy4vYWRkQWRkcmVzcycNCmltcG9ydCB7IHNldFNob3BDYXJ0TG9jYWwsIGdldFNob3BDYXJ0TG9jYWwgfSBmcm9tICJAL3V0aWwvc2hvcCI7DQppbXBvcnQgeyBudW1iZXJGb3JtYXQgfSBmcm9tICJAL3V0aWwiOw0KaW1wb3J0IEVzQWRkQWRkcmVzcyBmcm9tICJAL2NvbXBvbmVudHMvYWRkQWRkcmVzcyI7DQoNCi8vIGltcG9ydCB7IFNldFNhZmV3b3JkQXBpIH0gZnJvbSAiQC9hcGkiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJFc1NldHRsZW1lbnQiLA0KICBjb21wb25lbnRzOiB7DQogICAgRXNJY29uVGlwcywNCiAgICBFc09yZGVyU3VtLA0KICAgIEVzT3JkZXJMaXN0LA0KICAgIEVzUGF5TWV0aG9kLA0KICAgIEVzUGF5TW9kYWwsDQogICAgQWRkcmVzc0RpYWxvZywNCiAgICAvLyBBZGRBZGRyZXNzRGlhbG9nLA0KICAgIEVzQWRkQWRkcmVzcywNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGF5TW9kYWxTaG93OiBmYWxzZSwNCiAgICAgIGFkZEFkZHJlc3NNb2RhbFNob3c6IGZhbHNlLA0KICAgICAgc2VsZWN0QWRkcmVzczoge30sDQogICAgICBjdXJyZW50U3VibWl0T3JkZXJJZHM6IFtdLA0KICAgICAgYWRkQWRkcmVzc1ZpZXc6IGZhbHNlLA0KICAgICAgY2hjZWtEYXRhOiBbXSwNCiAgICAgIGNoZWNrTnVtOiAwLA0KICAgICAgbGFzdFN1Ym1pdDogew0KICAgICAgICBvcmRlcklkczogIiIsDQogICAgICAgIGFkZHJlc3NJZDogIiIsDQogICAgICAgIG9yZGVySW5mbzoge30sDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyh7DQogICAgICBhZGRyZXNzTGlzdDogInVzZXIvYWRkcmVzc0xpc3QiLA0KICAgICAgZGVmYXVsdEFkZHJlc3M6ICJ1c2VyL2RlZmF1bHRBZGRyZXNzIiwNCiAgICAgIHBheVNlbGVjdEFkZHJlc3M6ICJ1c2VyL3BheVNlbGVjdEFkZHJlc3MiLA0KICAgICAgY2hlY2tQcm9kdWN0UGF5OiAic2hvcENhcnQvY2hlY2tQcm9kdWN0UGF5IiwNCiAgICAgIHVzZXJCYWxhbmNlOiAidXNlci91c2VyQmFsYW5jZSIsDQogICAgICB1c2VySW5mbzogInVzZXJJbmZvIiwNCiAgICB9KSwNCiAgICBjaGVja0NvdW50KCkgew0KICAgICAgcmV0dXJuIHRoaXMuY2hlY2tQcm9kdWN0UGF5LnJlZHVjZSgNCiAgICAgICAgKGEsIGIpID0+IGEgKyBiLmxpc3QucmVkdWNlKChpLCBsKSA9PiBpICsgbC5jaGVja1RvdGFsLCAwKSwNCiAgICAgICAgMA0KICAgICAgKTsNCiAgICB9LA0KICAgIGNoZWNrVG90YWxBbW91bnQoKSB7DQogICAgICByZXR1cm4gbnVtYmVyRm9ybWF0KA0KICAgICAgICB0aGlzLmdldENoY2VrRGF0YSgpLnJlZHVjZSgNCiAgICAgICAgICAoYSwgYikgPT4NCiAgICAgICAgICAgIGEgKw0KICAgICAgICAgICAgKChiLnByaWNlIHx8IGIuZGlzY291bnRQcmljZSB8fCBiLnNlbGxpbmdQcmljZSkgKw0KICAgICAgICAgICAgICAoYi5nb29kc1RheCA/PyAwKSArDQogICAgICAgICAgICAgIChiLmZyZWlnaHRBbW91bnQgPz8gMCkpICoNCiAgICAgICAgICAgICAgYi5jaGVja1RvdGFsLA0KICAgICAgICAgIDANCiAgICAgICAgKQ0KICAgICAgKTsNCiAgICB9LA0KICAgIGlzRGlzYWJsZWRQYXlCdG4oKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICB0aGlzLnVzZXJCYWxhbmNlIDw9IDAgfHwNCiAgICAgICAgdGhpcy5jaGVja0NvdW50IDw9IDAgfHwNCiAgICAgICAgdGhpcy51c2VyQmFsYW5jZSA8IHRoaXMuY2hlY2tUb3RhbEFtb3VudA0KICAgICAgKTsNCiAgICB9LA0KICAgIC8vIGNoZWNrUHJvZHVjdCgpIHsNCiAgICAvLyAgICAgY29uc29sZS5sb2coJy0tLS0tMTExMTExMTEtLS0tJykNCiAgICAvLyAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hjZWtEYXRhKCk7DQogICAgLy8gfQ0KICB9LA0KICBhc3luYyBtb3VudGVkKCkgew0KICAgIGF3YWl0IHRoaXMucmVxdWVzdEFkZHJlc3NMaXN0KCk7DQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgdGhpcy51cGRhdGVQYXlTZWxlY3RBZGRyZXNzKHRoaXMuZGVmYXVsdEFkZHJlc3MpOw0KICAgIH0pOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKHsNCiAgICAgIHVwZGF0ZVBheVNlbGVjdEFkZHJlc3M6ICJ1c2VyL3VwZGF0ZVBheVNlbGVjdEFkZHJlc3MiLA0KICAgICAgdXBkYXRlQ2hlY2tQcm9kdWN0UGF5OiAic2hvcENhcnQvdXBkYXRlQ2hlY2tQcm9kdWN0UGF5IiwNCiAgICAgIHVwZGF0ZVNob3BDYXJ0OiAic2hvcENhcnQvdXBkYXRlU2hvcENhcnQiLA0KICAgIH0pLA0KICAgIC4uLm1hcEFjdGlvbnMoew0KICAgICAgcmVxdWVzdEFkZHJlc3NMaXN0OiAidXNlci9yZXF1ZXN0QWRkcmVzc0xpc3QiLA0KICAgICAgcmVxdWVzdE9yZGVyUGF5OiAib3JkZXIvcmVxdWVzdE9yZGVyUGF5IiwNCiAgICAgIHNldFNhZmV3b3JkRnVuYzogIm9yZGVyL3NldFNhZmV3b3JkRnVuYyIsDQogICAgICByZXF1ZXN0T3JkZXJTdWJtaXQ6ICJvcmRlci9yZXF1ZXN0T3JkZXJTdWJtaXQiLA0KICAgIH0pLA0KICAgIGNoYW5nZVNob3dNb2RlbChlKSB7DQogICAgICB0aGlzLnNob3dNb2RlbCA9IGU7DQogICAgfSwNCiAgICBzaG93QWRkQWRkcmVzc1ZpZXcoYm9vbCkgew0KICAgICAgdGhpcy5hZGRBZGRyZXNzVmlldyA9ICF0aGlzLmFkZEFkZHJlc3NWaWV3Ow0KICAgICAgaWYgKCF0aGlzLmFkZEFkZHJlc3NWaWV3KSB7DQogICAgICAgIHRoaXMucmVxdWVzdEFkZHJlc3NMaXN0KCk7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRDaGNla0RhdGEoKSB7DQogICAgICBsZXQgZGF0YSA9IFtdOw0KICAgICAgdGhpcy5jaGVja1Byb2R1Y3RQYXkuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICBkYXRhID0gWw0KICAgICAgICAgIC4uLmRhdGEsDQogICAgICAgICAgLi4uaXRlbS5saXN0LmZpbHRlcigNCiAgICAgICAgICAgIChsaXN0SXRlbSkgPT4gaXRlbS5jaGVja0xpc3QuaW5kZXhPZihsaXN0SXRlbS5JZGVudGlmaWVyKSA+IC0xDQogICAgICAgICAgKSwNCiAgICAgICAgXTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5jaGNla0RhdGEgPSBkYXRhOw0KICAgICAgLy8gY29uc29sZS5sb2coInRoaXMuY2hlY2tEYXRhIC0+IiwgdGhpcy5kYXRhKTsNCiAgICAgIHRoaXMuY2hlY2tOdW0gPSBkYXRhLmxlbmd0aDsNCiAgICAgIHJldHVybiBkYXRhOw0KICAgIH0sDQogICAgYXN5bmMgcGF5KCkgew0KICAgICAgaWYgKCF0aGlzLnBheVNlbGVjdEFkZHJlc3M/LmlkKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKA0KICAgICAgICAgIHRoaXMuJHQoIm1lc3NhZ2UuaG9tZS5TaGlwcGluZ0FkZHJlc3NOb3RTZXQiIC8qIOacquiuvue9ruaUtui0p+WcsOWdgCAqLykNCiAgICAgICAgKTsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgY2hlY2tEYXRhID0gdGhpcy5nZXRDaGNla0RhdGEoKTsNCiAgICAgIC8vIGNvbnN0IGlkcyA9IGNoZWNrRGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW0uaWQpDQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBheVNlbGVjdEFkZHJlc3MsIHRoaXMuZGVmYXVsdEFkZHJlc3MpDQoNCiAgICAgIGNoZWNrRGF0YS5tYXAoKGl0ZW0pID0+IFtpdGVtLmlkLCBpdGVtLmNoZWNrVG90YWxdKS5qb2luKCIsIik7DQoNCiAgICAgIGNvbnN0IG9yZGVySW5mbyA9IGNoZWNrRGF0YQ0KICAgICAgICAubWFwKChpdGVtKSA9PiBbaXRlbS5pZCwgaXRlbS5za3VpZCB8fCAtMSwgaXRlbS5jaGVja1RvdGFsXSkNCiAgICAgICAgLmpvaW4oIiwiKTsNCiAgICAgIGlmICghb3JkZXJJbmZvKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKA0KICAgICAgICAgIHRoaXMuJHQoIm1lc3NhZ2UuaG9tZS5Ob1Byb2R1Y3RTZWxlY3RlZCIgLyog6K+36YCJ5oup5ZWG5ZOBICovKQ0KICAgICAgICApOw0KICAgICAgfQ0KICAgICAgY29uc3QgYWRkcmVzc0lkID0gdGhpcy5wYXlTZWxlY3RBZGRyZXNzLmlkOw0KICAgICAgaWYgKA0KICAgICAgICAhKA0KICAgICAgICAgIHRoaXMubGFzdFN1Ym1pdC5vcmRlcklkcyAmJg0KICAgICAgICAgIHRoaXMubGFzdFN1Ym1pdC5hZGRyZXNzSWQgPT0gYWRkcmVzc0lkICYmDQogICAgICAgICAgdGhpcy5sYXN0U3VibWl0Lm9yZGVySW5mbyA9PSBvcmRlckluZm8NCiAgICAgICAgKQ0KICAgICAgKSB7DQogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVxdWVzdE9yZGVyU3VibWl0KHsNCiAgICAgICAgICBvcmRlckluZm86IG9yZGVySW5mbywNCiAgICAgICAgICBhZGRyZXNzSWQ6IGFkZHJlc3NJZCwNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuY3VycmVudFN1Ym1pdE9yZGVySWRzID0gcmVzdWx0Lm9yZGVyTGlzdC5tYXAoDQogICAgICAgICAgKGl0ZW0pID0+IGl0ZW0ub3JkZXJJZA0KICAgICAgICApOw0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgNCiAgICAgICAgICAiY3VycmVudFN1Ym1pdE9yZGVySWRzIiwNCiAgICAgICAgICB0aGlzLmN1cnJlbnRTdWJtaXRPcmRlcklkcw0KICAgICAgICApOw0KICAgICAgICB0aGlzLmxhc3RTdWJtaXQgPSB7DQogICAgICAgICAgb3JkZXJJbmZvLA0KICAgICAgICAgIG9yZGVySWRzOiB0aGlzLmN1cnJlbnRTdWJtaXRPcmRlcklkcywNCiAgICAgICAgICBhZGRyZXNzSWQsDQogICAgICAgIH07DQogICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMubGFzdFN1Ym1pdCkpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygiLS0tLS11c2UgbGFzdCBzdWJtaXQtLS0tIik7DQogICAgICB9DQogICAgICBpZiAoIXRoaXMudXNlckluZm8uc2FmZXdvcmQpIHsNCiAgICAgICAgLy8g6K6+572u5pSv5LuY5a+G56CBDQogICAgICAgIHRoaXMucGF5TW9kYWxTaG93ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zaG93TW9kZWwgPSAxOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAoIXRoaXMuY2hlY2tvdXRBbW91bnQoKSkgew0KICAgICAgICBjb25zb2xlLmxvZygxMTExMTIyMik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMucGF5TW9kYWxTaG93ID0gdHJ1ZTsNCiAgICB9LA0KICAgIGNsZWFydENoZWNrRGF0YShpZHMpIHsNCiAgICAgIHRoaXMuY2hlY2tQcm9kdWN0UGF5LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgaXRlbS5saXN0ID0gaXRlbS5saXN0LmZpbHRlcigobGlzdEl0ZW0pID0+ICFpZHMuaW5jbHVkZXMobGlzdEl0ZW0uaWQpKTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy51cGRhdGVDaGVja1Byb2R1Y3RQYXkoDQogICAgICAgIHRoaXMuY2hlY2tQcm9kdWN0UGF5LmZpbHRlcigoaXRlbSkgPT4gISFpdGVtLmxpc3QubGVuZ3RoKQ0KICAgICAgKTsNCiAgICB9LA0KICAgIHNlbGVjdEFkZHJlc3NFdmVudCgpIHsNCiAgICAgIHRoaXMuYWRkQWRkcmVzc01vZGFsU2hvdyA9IHRydWU7DQogICAgfSwNCiAgICBhc3luYyBwYXlDYWxsYmFjayhwYXNzd29yZCwgc3VjY2Vzc0NhbGxCYWNrLCBmYWlsQ2FsbEJhY2spIHsNCiAgICAgIGlmICghdGhpcy5jaGVja291dEFtb3VudCgpKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5jdXJyZW50U3VibWl0T3JkZXJJZHMubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuY3VycmVudFN1Ym1pdE9yZGVySWRzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oDQogICAgICAgICAgImN1cnJlbnRTdWJtaXRPcmRlcklkcyINCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKCJ0aGlzLmN1cnJlbnRTdWJtaXRPcmRlcklkcyAtPiIsIHRoaXMuY3VycmVudFN1Ym1pdE9yZGVySWRzKTsNCiAgICAgIGF3YWl0IHRoaXMucmVxdWVzdE9yZGVyUGF5KHsNCiAgICAgICAgb3JkZXJJZDogdGhpcy5jdXJyZW50U3VibWl0T3JkZXJJZHMuam9pbigiLCIpLA0KICAgICAgICBzYWZld29yZDogcGFzc3dvcmQsDQogICAgICB9KQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgLy8gbGV0IHNob3BDYXJ0RGF0YSA9IGdldFNob3BDYXJ0TG9jYWwoKTsNCiAgICAgICAgICBjb25zdCBzaG9wQ2FydERhdGEgPSBnZXRTaG9wQ2FydExvY2FsKCkudGhlbihyZXN1bHQgPT57DQogICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0U2hvcENhcnRMb2NhbCAtPicsIHJlc3VsdCk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGNvbnN0IGNoZWNrRGF0YSA9IHRoaXMuZ2V0Q2hjZWtEYXRhKCk7DQogICAgICAgICAgaWYgKHNob3BDYXJ0RGF0YSAmJiBzaG9wQ2FydERhdGEubGVuZ3RoKSB7DQogICAgICAgICAgICBjb25zdCBjaGVja0lkcyA9IGNoZWNrRGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW0uYXR0clRpbWUpOw0KICAgICAgICAgICAgc2hvcENhcnREYXRhID0gc2hvcENhcnREYXRhLmZpbHRlcigNCiAgICAgICAgICAgICAgKGl0ZW0pID0+ICFjaGVja0lkcy5pbmNsdWRlcyhpdGVtLmF0dHJUaW1lKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCcyMjMyMzIzIC0+JywgMjIzMjMyMyk7DQogICAgICAgICAgICAvLyDmlK/ku5jmiJDlip/lkI7vvIzmuIXpmaTotK3nianovabkuK3nmoTorqLljZUNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzaG9wQ2FydERhdGEgLT4nLCBzaG9wQ2FydERhdGEpOw0KICAgICAgICAgICAgdGhpcy5nZXRTaG9wQ2FydExvY2FsKHNob3BDYXJ0RGF0YSk7DQogICAgICAgICAgfQ0KICAgICAgY29uc3QgbGlzdCA9IFtdDQogICAgICAgICAgdGhpcy51cGRhdGVTaG9wQ2FydChsaXN0KQ0KICAgICAgICAgIHN1Y2Nlc3NDYWxsQmFjayAmJiBzdWNjZXNzQ2FsbEJhY2soKTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL3BheVN1Y2Nlc3MiKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICBmYWlsQ2FsbEJhY2sgJiYgZmFpbENhbGxCYWNrKCk7DQogICAgICAgIH0pDQogICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiY3VycmVudFN1Ym1pdE9yZGVySWRzIik7DQogICAgICAgICAgdGhpcy5wYXlNb2RhbFNob3cgPSBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBjaGVja291dEFtb3VudCgpIHsNCiAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWRQYXlCdG4pIHsNCiAgICAgICAgaWYgKHRoaXMuY2hlY2tUb3RhbEFtb3VudC5hdCgwKSA9PSAiMCIpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoDQogICAgICAgICAgICAgICJtZXNzYWdlLmhvbWUuTm9Qcm9kdWN0U2VsZWN0ZWQiIC8qKui/mOacqumAieaLqeWVhuWTgSAqLw0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJtZXNzYWdlLmhvbWUuYmFsYW5jZU5vdCIgLyoq5L2Z6aKd5LiN6Laz77yM6K+35YWF5YC8ICovKSwNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5wYXlNb2RhbFNob3cgPSBmYWxzZTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/page/settlementPage","sourcesContent":["<template>\r\n  <div class=\"settlement\">\r\n    <EsHeaderView />\r\n    <div class=\"settlement-content app-container\">\r\n      <h1 class=\"title\">{{ $t(\"message.home.checkout\") }}</h1>\r\n      <h2 class=\"subtitle\">{{ $t(\"message.home.shippingAddress\") }}</h2>\r\n      <div class=\"settlement-receiver flex-between\" @click=\"selectAddressEvent\">\r\n        <div>\r\n          <div class=\"userinfo\">\r\n            <span>\r\n              {{ paySelectAddress.contacts }} +{{ paySelectAddress.phone }}\r\n            </span>\r\n          </div>\r\n          <p class=\"address\">\r\n            {{ paySelectAddress.country }} {{ paySelectAddress.province }}\r\n            {{ paySelectAddress.city }}\r\n            {{ paySelectAddress.address }}\r\n          </p>\r\n        </div>\r\n        <div><i class=\"el-icon-arrow-right\"></i></div>\r\n      </div>\r\n      <EsOrderList />\r\n      <EsOrderSum :checkGoods=\"chcekData\" />\r\n      <EsPayMethod />\r\n      <div class=\"settlement-pay flex-between\">\r\n        <div class=\"settlement-pay-label\">\r\n          {{ $t(\"message.home.Opt\") }}\r\n          <span>{{ checkNum }}</span>\r\n          {{ $t(\"message.home.piece\") }}\r\n        </div>\r\n        <el-button type=\"primary\" @click=\"pay\">\r\n          <span>{{ $t(\"message.home.subOrder\") }}</span>\r\n          <span>${{ checkTotalAmount }}</span>\r\n        </el-button>\r\n      </div>\r\n      <EsIconTips />\r\n    </div>\r\n    <EsFooterView />\r\n    <EsPayModal\r\n      v-model=\"payModalShow\"\r\n      :payCallback=\"payCallback\"\r\n      @changeShowModel=\"changeShowModel\"\r\n    />\r\n    <AddressDialog\r\n      v-model=\"addAddressModalShow\"\r\n      @showAddAddressView=\"showAddAddressView\"\r\n    />\r\n    <!-- <AddAddressDialog :addAddressView=\"addAddressView\" @showAddAddressView=\"showAddAddressView\" /> -->\r\n    <EsAddAddress v-model=\"addAddressView\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions, mapMutations } from \"vuex\";\r\nimport EsIconTips from \"@/components/iconTips\";\r\nimport EsOrderSum from \"./orderSum.vue\";\r\nimport EsOrderList from \"./orderList.vue\";\r\nimport EsPayMethod from \"./payMethod.vue\";\r\nimport EsPayModal from \"./payModal.vue\";\r\nimport AddressDialog from \"./address\";\r\n// import AddAddressDialog from './addAddress'\r\nimport { setShopCartLocal, getShopCartLocal } from \"@/util/shop\";\r\nimport { numberFormat } from \"@/util\";\r\nimport EsAddAddress from \"@/components/addAddress\";\r\n\r\n// import { SetSafewordApi } from \"@/api\";\r\n\r\nexport default {\r\n  name: \"EsSettlement\",\r\n  components: {\r\n    EsIconTips,\r\n    EsOrderSum,\r\n    EsOrderList,\r\n    EsPayMethod,\r\n    EsPayModal,\r\n    AddressDialog,\r\n    // AddAddressDialog,\r\n    EsAddAddress,\r\n  },\r\n  data() {\r\n    return {\r\n      payModalShow: false,\r\n      addAddressModalShow: false,\r\n      selectAddress: {},\r\n      currentSubmitOrderIds: [],\r\n      addAddressView: false,\r\n      chcekData: [],\r\n      checkNum: 0,\r\n      lastSubmit: {\r\n        orderIds: \"\",\r\n        addressId: \"\",\r\n        orderInfo: {},\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      addressList: \"user/addressList\",\r\n      defaultAddress: \"user/defaultAddress\",\r\n      paySelectAddress: \"user/paySelectAddress\",\r\n      checkProductPay: \"shopCart/checkProductPay\",\r\n      userBalance: \"user/userBalance\",\r\n      userInfo: \"userInfo\",\r\n    }),\r\n    checkCount() {\r\n      return this.checkProductPay.reduce(\r\n        (a, b) => a + b.list.reduce((i, l) => i + l.checkTotal, 0),\r\n        0\r\n      );\r\n    },\r\n    checkTotalAmount() {\r\n      return numberFormat(\r\n        this.getChcekData().reduce(\r\n          (a, b) =>\r\n            a +\r\n            ((b.price || b.discountPrice || b.sellingPrice) +\r\n              (b.goodsTax ?? 0) +\r\n              (b.freightAmount ?? 0)) *\r\n              b.checkTotal,\r\n          0\r\n        )\r\n      );\r\n    },\r\n    isDisabledPayBtn() {\r\n      return (\r\n        this.userBalance <= 0 ||\r\n        this.checkCount <= 0 ||\r\n        this.userBalance < this.checkTotalAmount\r\n      );\r\n    },\r\n    // checkProduct() {\r\n    //     console.log('-----11111111----')\r\n    //     return this.getChcekData();\r\n    // }\r\n  },\r\n  async mounted() {\r\n    await this.requestAddressList();\r\n    this.$nextTick(() => {\r\n      this.updatePaySelectAddress(this.defaultAddress);\r\n    });\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      updatePaySelectAddress: \"user/updatePaySelectAddress\",\r\n      updateCheckProductPay: \"shopCart/updateCheckProductPay\",\r\n      updateShopCart: \"shopCart/updateShopCart\",\r\n    }),\r\n    ...mapActions({\r\n      requestAddressList: \"user/requestAddressList\",\r\n      requestOrderPay: \"order/requestOrderPay\",\r\n      setSafewordFunc: \"order/setSafewordFunc\",\r\n      requestOrderSubmit: \"order/requestOrderSubmit\",\r\n    }),\r\n    changeShowModel(e) {\r\n      this.showModel = e;\r\n    },\r\n    showAddAddressView(bool) {\r\n      this.addAddressView = !this.addAddressView;\r\n      if (!this.addAddressView) {\r\n        this.requestAddressList();\r\n      }\r\n    },\r\n    getChcekData() {\r\n      let data = [];\r\n      this.checkProductPay.forEach((item) => {\r\n        data = [\r\n          ...data,\r\n          ...item.list.filter(\r\n            (listItem) => item.checkList.indexOf(listItem.Identifier) > -1\r\n          ),\r\n        ];\r\n      });\r\n      this.chcekData = data;\r\n      // console.log(\"this.checkData ->\", this.data);\r\n      this.checkNum = data.length;\r\n      return data;\r\n    },\r\n    async pay() {\r\n      if (!this.paySelectAddress?.id) {\r\n        return this.$message.error(\r\n          this.$t(\"message.home.ShippingAddressNotSet\" /* 未设置收货地址 */)\r\n        );\r\n      }\r\n\r\n      const checkData = this.getChcekData();\r\n      // const ids = checkData.map((item) => item.id)\r\n      // console.log(this.paySelectAddress, this.defaultAddress)\r\n\r\n      checkData.map((item) => [item.id, item.checkTotal]).join(\",\");\r\n\r\n      const orderInfo = checkData\r\n        .map((item) => [item.id, item.skuid || -1, item.checkTotal])\r\n        .join(\",\");\r\n      if (!orderInfo) {\r\n        return this.$message.error(\r\n          this.$t(\"message.home.NoProductSelected\" /* 请选择商品 */)\r\n        );\r\n      }\r\n      const addressId = this.paySelectAddress.id;\r\n      if (\r\n        !(\r\n          this.lastSubmit.orderIds &&\r\n          this.lastSubmit.addressId == addressId &&\r\n          this.lastSubmit.orderInfo == orderInfo\r\n        )\r\n      ) {\r\n        const result = await this.requestOrderSubmit({\r\n          orderInfo: orderInfo,\r\n          addressId: addressId,\r\n        });\r\n        this.currentSubmitOrderIds = result.orderList.map(\r\n          (item) => item.orderId\r\n        );\r\n        localStorage.setItem(\r\n          \"currentSubmitOrderIds\",\r\n          this.currentSubmitOrderIds\r\n        );\r\n        this.lastSubmit = {\r\n          orderInfo,\r\n          orderIds: this.currentSubmitOrderIds,\r\n          addressId,\r\n        };\r\n        // console.log(JSON.stringify(this.lastSubmit))\r\n      } else {\r\n        console.log(\"-----use last submit----\");\r\n      }\r\n      if (!this.userInfo.safeword) {\r\n        // 设置支付密码\r\n        this.payModalShow = true;\r\n        this.showModel = 1;\r\n        return;\r\n      }\r\n      if (!this.checkoutAmount()) {\r\n        console.log(11111222);\r\n        return;\r\n      }\r\n      this.payModalShow = true;\r\n    },\r\n    cleartCheckData(ids) {\r\n      this.checkProductPay.forEach((item) => {\r\n        item.list = item.list.filter((listItem) => !ids.includes(listItem.id));\r\n      });\r\n      this.updateCheckProductPay(\r\n        this.checkProductPay.filter((item) => !!item.list.length)\r\n      );\r\n    },\r\n    selectAddressEvent() {\r\n      this.addAddressModalShow = true;\r\n    },\r\n    async payCallback(password, successCallBack, failCallBack) {\r\n      if (!this.checkoutAmount()) {\r\n        return;\r\n      }\r\n      if (!this.currentSubmitOrderIds.length) {\r\n        this.currentSubmitOrderIds = localStorage.getItem(\r\n          \"currentSubmitOrderIds\"\r\n        );\r\n      }\r\n      console.log(\"this.currentSubmitOrderIds ->\", this.currentSubmitOrderIds);\r\n      await this.requestOrderPay({\r\n        orderId: this.currentSubmitOrderIds.join(\",\"),\r\n        safeword: password,\r\n      })\r\n        .then(() => {\r\n          // let shopCartData = getShopCartLocal();\r\n          const shopCartData = getShopCartLocal().then(result =>{\r\n            console.log('getShopCartLocal ->', result);\r\n            return result;\r\n          });\r\n          const checkData = this.getChcekData();\r\n          if (shopCartData && shopCartData.length) {\r\n            const checkIds = checkData.map((item) => item.attrTime);\r\n            shopCartData = shopCartData.filter(\r\n              (item) => !checkIds.includes(item.attrTime)\r\n            );\r\n            // console.log('2232323 ->', 2232323);\r\n            // 支付成功后，清除购物车中的订单\r\n            // console.log('shopCartData ->', shopCartData);\r\n            this.getShopCartLocal(shopCartData);\r\n          }\r\n      const list = []\r\n          this.updateShopCart(list)\r\n          successCallBack && successCallBack();\r\n          this.$router.replace(\"/paySuccess\");\r\n        })\r\n        .catch(() => {\r\n          failCallBack && failCallBack();\r\n        })\r\n        .finally(() => {\r\n          localStorage.removeItem(\"currentSubmitOrderIds\");\r\n          this.payModalShow = false;\r\n        });\r\n    },\r\n    checkoutAmount() {\r\n      if (this.isDisabledPayBtn) {\r\n        if (this.checkTotalAmount.at(0) == \"0\") {\r\n          this.$message({\r\n            message: this.$t(\r\n              \"message.home.NoProductSelected\" /**还未选择商品 */\r\n            ),\r\n            type: \"error\",\r\n          });\r\n        } else {\r\n          this.$message({\r\n            message: this.$t(\"message.home.balanceNot\" /**余额不足，请充值 */),\r\n            type: \"error\",\r\n          });\r\n        }\r\n        this.payModalShow = false;\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.settlement {\r\n  &-content {\r\n    .title {\r\n      font-weight: 600;\r\n      font-size: 24px;\r\n      color: var(--color-title);\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    .subtitle {\r\n      font-weight: 600;\r\n      font-size: 20px;\r\n      color: var(--color-title);\r\n      margin-bottom: 15px;\r\n    }\r\n  }\r\n\r\n  &-receiver {\r\n    border: 1px solid var(--color-border);\r\n    padding: 16px 20px;\r\n    border-radius: 4px;\r\n    margin-bottom: 12px;\r\n    cursor: pointer;\r\n\r\n    .userinfo {\r\n      font-weight: 500;\r\n      font-size: 12px;\r\n      color: var(--color-title);\r\n      margin-bottom: 5px;\r\n    }\r\n\r\n    .address {\r\n      display: inline-block;\r\n      font-weight: 500;\r\n      max-width: 1000px !important;\r\n      overflow:hidden; //超出的文本隐藏\r\n      text-overflow:ellipsis; //溢出用省略号显示\r\n      white-space:nowrap; //溢出不换行\r\n      font-size: 12px;\r\n      color: var(--color-subtitle);\r\n    }\r\n\r\n    div:first-child {\r\n      flex: 1;\r\n    }\r\n\r\n    div:last-child {\r\n      width: 50px;\r\n      text-align: right;\r\n    }\r\n  }\r\n\r\n  &-pay {\r\n    border: 1px solid var(--color-border);\r\n    padding: 11px 20px;\r\n    margin: 40px 0;\r\n\r\n    &-label {\r\n      font-weight: 500;\r\n      font-size: 12px;\r\n      color: var(--color-title);\r\n\r\n      span {\r\n        color: var(--color-main);\r\n      }\r\n    }\r\n\r\n    .el-button {\r\n      font-weight: 700;\r\n      font-size: 14px;\r\n      color: var(--color-white);\r\n\r\n      span:first-child {\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}