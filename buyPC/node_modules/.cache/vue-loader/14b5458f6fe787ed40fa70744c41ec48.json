{"remainingRequest":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\src\\page\\storePage\\sort.vue?vue&type=style&index=0&id=61246818&lang=scss","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\src\\page\\storePage\\sort.vue","mtime":1760944158217},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\css-loader\\dist\\cjs.js","mtime":1761044715569},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1761044717168},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\postcss-loader\\src\\index.js","mtime":1761044716266},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1761044715084},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tiktok08-2\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpodG1sW2Rpcj0icnRsIl17DQogIC5maXJzdC1pdGVtew0KICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICB9DQp9DQouc29ydC1hY3RpdmUgew0KICBjb2xvcjogdmFyKC0tY29sb3ItbWFpbik7DQp9DQouZmlyc3QtaXRlbXsNCiB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KLmxpc3Qgew0KICBkaXNwbGF5OiBmbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQp9DQoubGlzdC1pdGVtIHsNCiAgbGkgew0KICAgIHRleHQtaW5kZW50OiAxMHB4Ow0KICAgIHBhZGRpbmc6IDVweCAwOw0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgY29sb3I6IHZhcigtLWNvbG9yLWJsYWNrKSAhaW1wb3J0YW50Ow0KICAgICY6bnRoLWNoaWxkKDEpew0KICAgICAgbWFyZ2luLXRvcDogMTVweDsNCiAgICB9DQogICAgJjpob3ZlciB7DQogICAgICBjb2xvcjogdmFyKC0tY29sb3ItbWFpbikgIWltcG9ydGFudDsNCiAgICAgIC8vIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWNvbG9yLW1haW4pOw0KICAgIH0NCiAgICAmLmFjdGl2ZSB7DQogICAgICBjb2xvcjogdmFyKC0tY29sb3ItbWFpbikgIWltcG9ydGFudDsNCiAgICAgIC8vIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWNvbG9yLW1haW4pOw0KICAgIH0NCiAgfQ0KfQ0KLnNvcnQtaWNvbiB7DQogIGhlaWdodDogMTBweDsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICB3aWR0aDogMTRweDsNCg0KICBpIHsNCiAgICBjb2xvcjogI2Q5ZDlkOTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIH0NCg0KICAuc29ydC1hY3RpdmUgew0KICAgIGNvbG9yOiB2YXIoLS1jb2xvci1tYWluKTsNCiAgfQ0KfQ0KLnNvcnQtaWNvbi11cCB7DQogIGkgew0KICAgIGJvdHRvbTogNHB4Ow0KICB9DQp9DQouc29ydC1pY29uLWRvd24gew0KICBpIHsNCiAgICB0b3A6IC00cHg7DQogIH0NCn0NCg=="},{"version":3,"sources":["sort.vue"],"names":[],"mappings":";AAuSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sort.vue","sourceRoot":"src/page/storePage","sourcesContent":["<template>\r\n  <div class=\"commodity\">\r\n    <div class=\"app-container\">\r\n      <div class=\"commodity-wrap flex-start\">\r\n        <div class=\"commodity-filter\">\r\n          <h2>{{ this.$t(\"message.home.classification\" /**分类 */) }}</h2>\r\n          <ul>\r\n            <li\r\n        :class=\"{\r\n          'commodity-filter-item': true,\r\n          'commodity-filter-item-active': currentFilterValue === 'explme',\r\n        }\"\r\n        class=\"first-item\"\r\n        @click=\"changeFilter('explme', 'explme')\"\r\n       \r\n      >{{ $t(\"message.home.AllProducts\") }}\r\n      \r\n      </li>\r\n            <li\r\n              v-for=\"(item, index) in category\"\r\n              :key=\"index\"\r\n              :class=\"{\r\n                'commodity-filter-item': true,\r\n                'commodity-filter-item-active': currentFilterValue === index,\r\n              }\"\r\n              @click=\"changeFilter(item, index)\"\r\n            >\r\n              <div class=\"list\" @click=\"openList = !openList\">\r\n                {{ item.name }}\r\n                <i\r\n                  :class=\"\r\n                    openList &&parCategoryId == item.categoryId ? 'el-icon-arrow-down' : 'el-icon-arrow-right'\r\n                  \"\r\n                  v-if=\"item.subList.length\"\r\n                ></i>\r\n              </div>\r\n              <div class=\"list-item\" v-if=\"openList && parCategoryId == item.categoryId\">\r\n                <ul v-if=\"item.subList.length\">\r\n                  <li\r\n                    v-for=\"(subItem, subIndex) in item.subList\"\r\n                    :key=\"subIndex\"\r\n                    @click.stop=\"changeFilter(item, subIndex, subItem)\"\r\n                    :class=\"subItem.categoryId == categoryId ? 'active' : ''\"\r\n                  >\r\n                    {{ subItem.name }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"commodity-content\">\r\n          <EsSortView\r\n            :search-show=\"true\"\r\n            @sort=\"sortEvent\"\r\n            @search=\"searchHandle\"\r\n            ref=\"sortView\"\r\n          />\r\n          <div>\r\n            <div ref=\"commodityList\">\r\n              <EsLoadingView :loading=\"loading\" >\r\n              <div class=\"commodity-content-list\">\r\n                <EsProductView\r\n                  v-for=\"(item, index) in merchantGoodsList\"\r\n                  :key=\"index\"\r\n                  :item=\"item\"\r\n                />\r\n              </div>\r\n              <div class=\"no-data\" v-if=\"!merchantGoodsList.length\">\r\n                <el-empty :description=\"$t('message.home.noData')\"></el-empty>\r\n              </div>\r\n            </EsLoadingView>\r\n            </div>\r\n            <div\r\n              class=\"commodity-content-pagination\"\r\n              v-if=\"merchantGoodsList.length\"\r\n            >\r\n              <el-pagination\r\n                background\r\n                class=\"es-pagination\"\r\n                layout=\"prev, pager, next\"\r\n                :page-size=\"pageSize\"\r\n                :current-page=\"pageNum\"\r\n                :total=\"total\"\r\n                @current-change=\"currentChange\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EsProductView from \"@/components/product\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport EsSortView from \"@/page/commodityPage/sort.vue\";\r\n// import { CategoryApiList } from \"@/api/home\";\r\nimport { SellerClass } from \"@/api/productDetails\";\r\nimport { searchSellerGoods } from \"@/api/home\";\r\nexport default {\r\n  name: \"EsStroeSort\",\r\n  components: { EsProductView, EsSortView },\r\n  data() {\r\n    return {\r\n      currentFilterValue: 'explme',\r\n      loading: false,\r\n      pageNum: 1,\r\n      pageSize: 20,\r\n      total: 0,\r\n      currentParams: {},\r\n      beforeSortParams: {},\r\n      category: [],\r\n      openList: false,\r\n      categoryId: \"\",\r\n      parCategoryId: \"\",\r\n      itemname: process.env.VUE_APP_ITEM_NAME,\r\n      // itemname: \r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"home\", [\"merchantGoodsList\", \"categoryList\"]),\r\n  },\r\n  mounted() {\r\n    // this.requestCategoryList();\r\n  if(this.itemname!=='Argos'||itemname !== 'ArgosShop'){\r\n    this.requestData();\r\n  }\r\n    this.getCategoryList();\r\n\r\n  },\r\n  activated() {\r\n    const params = JSON.parse(localStorage.getItem(\"sortParams\"));\r\n    const CategoryId = JSON.parse(localStorage.getItem(\"sortCategoryId\"));\r\n    // console.log(\"CategoryId ->\", CategoryId);\r\n    \r\n    this.getCategoryList();\r\n    if (CategoryId) {\r\n      this.requestData({ categoryId: CategoryId });\r\n    }\r\n    this.sortEvent(params);\r\n  },\r\n  watch: {\r\n    \"$route.query.id\": {\r\n      handler(val) {\r\n        // this.requestCategoryList();\r\n        this.requestData();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"home\", [\r\n      \"requestMerchantGoodsList\",\r\n      // \"requestCategoryList\",\r\n      \"updateMerchantGoodsListHandle\",\r\n    ]),\r\n    async getCategoryList() {\r\n      const res = await SellerClass({\r\n        sellerId: this.$router.currentRoute.query.storeId,\r\n      });\r\n      this.category = res.data.filter((item) => {\r\n        if (item.name && item.subList.length > 0) {\r\n          item.subList = item.subList.filter((subItem) => subItem.name);\r\n        }\r\n        return item.name;\r\n      });\r\n      // this.category = res.data;\r\n      console.log('this.category ->', res.data);\r\n    },\r\n    searchHandle(keyword) {\r\n      console.log(\r\n        \"this.$router.currentRoute.query.id ->\",\r\n        this.$router.currentRoute.query.storeId\r\n      );\r\n      if (keyword) {\r\n        this.loading = true;\r\n        searchSellerGoods({\r\n          sellerId: this.$router.currentRoute.query.storeId,\r\n          keyword,\r\n        })\r\n          .then((res) => {\r\n            this.updateMerchantGoodsListHandle(res.data);\r\n            this.loading = false;\r\n          })\r\n          .catch(() => {\r\n            this.loading = false;\r\n          });\r\n      } else {\r\n        this.pageNum = 1;\r\n        this.requestData();\r\n      }\r\n    },\r\n    // async getCategoryList() {\r\n    //   let res = [];\r\n    //   res = await SellerClass({\r\n    //     sellerId: this.$router.currentRoute.query.storeId,\r\n    //   });\r\n    //   const all = [{ name: this.$t(\"message.home.all\"), categoryId: \"\" }];\r\n    //   this.category = [...all, ...res.data];\r\n    // },\r\n    async requestData(params = {}) {\r\n      const currentRouter = this.$router.currentRoute;\r\n      try {\r\n        this.loading = true;\r\n        const sortParams = Object.prototype.hasOwnProperty.call(\r\n          params,\r\n          \"categoryId\"\r\n        )\r\n          ? this.beforeSortParams\r\n          : {};\r\n        const qureyParams = JSON.parse(\r\n          JSON.stringify({\r\n            ...{\r\n              sellerId: currentRouter.query.storeId,\r\n              pageNum: this.pageNum,\r\n              pageSize: this.pageSize,\r\n            },\r\n            ...sortParams,\r\n            ...this.currentParams,\r\n            ...params,\r\n          })\r\n        );\r\n        for (const key in qureyParams) {\r\n          if (!qureyParams[key]) {\r\n            delete qureyParams[key];\r\n          }\r\n        }\r\n        await this.requestMerchantGoodsList({\r\n          ...qureyParams,\r\n        }).then((res) => {\r\n          this.total = res.pageInfo.totalElements;\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n       this.$Gsap.fromTo(this.$refs.commodityList, {\r\n              delay: 0,\r\n              duration:.5,\r\n              y: '100',\r\n              autoAlpha: 0,\r\n              ease: \"back.out(1.7)\"\r\n            },{\r\n              delay: 0.5,\r\n              duration: 1,\r\n              y: '0',\r\n              autoAlpha: 1,\r\n              ease: \"back.out(1.7)\"\r\n            })\r\n      }\r\n    },\r\n    changeFilter(item, index, subItem) {\r\n      this.$refs.sortView.searchKey=''\r\n      // console.log('this.$refs.sortView ->', );\r\n      this.categoryId = ''\r\n      if (subItem) {\r\n        this.categoryId = subItem.categoryId;\r\n        this.currentParams = {\r\n          ...this.currentParams,\r\n          ...{ categoryId: subItem.categoryId },\r\n        };\r\n        localStorage.setItem(\r\n          \"sortCategoryId\",\r\n          JSON.stringify(subItem.categoryId)\r\n        );\r\n        this.requestData({ categoryId: subItem.categoryId });\r\n      } else {\r\n        this.currentFilterValue = index;\r\n        this.parCategoryId = item.categoryId;\r\n        this.currentParams = {\r\n          ...this.currentParams,\r\n          ...{ categoryId: item.categoryId },\r\n        };\r\n        localStorage.setItem(\"sortCategoryId\", JSON.stringify(item.categoryId));\r\n        this.requestData({ categoryId: item.categoryId });\r\n      }\r\n      // this.currentFilterValue = index;\r\n    },\r\n    currentChange(page) {\r\n      this.pageNum = page;\r\n      window.scrollTo(0, 0);\r\n      this.requestData();\r\n    },\r\n    sortEvent(params) {\r\n      console.log(\"params ->\", params);\r\n      localStorage.setItem(\"sortParams\", JSON.stringify(params));\r\n      this.pageNum = 1;\r\n      this.beforeSortParams = params;\r\n      this.requestData(params);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nhtml[dir=\"rtl\"]{\r\n  .first-item{\r\n    text-align: right;\r\n  }\r\n}\r\n.sort-active {\r\n  color: var(--color-main);\r\n}\r\n.first-item{\r\n text-align: left;\r\n}\r\n.list {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.list-item {\r\n  li {\r\n    text-indent: 10px;\r\n    padding: 5px 0;\r\n    text-align: left;\r\n    color: var(--color-black) !important;\r\n    &:nth-child(1){\r\n      margin-top: 15px;\r\n    }\r\n    &:hover {\r\n      color: var(--color-main) !important;\r\n      // border-right: 2px solid var(--color-main);\r\n    }\r\n    &.active {\r\n      color: var(--color-main) !important;\r\n      // border-right: 2px solid var(--color-main);\r\n    }\r\n  }\r\n}\r\n.sort-icon {\r\n  height: 10px;\r\n  position: relative;\r\n  width: 14px;\r\n\r\n  i {\r\n    color: #d9d9d9;\r\n    position: absolute;\r\n  }\r\n\r\n  .sort-active {\r\n    color: var(--color-main);\r\n  }\r\n}\r\n.sort-icon-up {\r\n  i {\r\n    bottom: 4px;\r\n  }\r\n}\r\n.sort-icon-down {\r\n  i {\r\n    top: -4px;\r\n  }\r\n}\r\n</style>\r\n"]}]}