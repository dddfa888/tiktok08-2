{"remainingRequest":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\searchResultPage\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\searchResultPage\\index.vue","mtime":1760944158216},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\babel-loader\\lib\\index.js","mtime":1761044716268},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIC8vIGltcG9ydCBFc1N0b3JlIGZyb20gJ0AvY29tcG9uZW50cy9zdG9yZScNCiAgaW1wb3J0IEVzU29ydFZpZXcgZnJvbSAiQC9wYWdlL2NvbW1vZGl0eVBhZ2Uvc29ydC52dWUiOw0KICBpbXBvcnQgRXNQcm9kdWN0VmlldyBmcm9tICJAL2NvbXBvbmVudHMvcHJvZHVjdCI7DQogIGltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOw0KICAvLyBpbXBvcnQgeyBTZWFyY2hBcGkgfSBmcm9tICJAL2FwaSI7DQogIGNvbnN0IGVtcHR5UGFyYW0gPSBbdW5kZWZpbmVkLCBudWxsLCAiIl07DQoNCiAgZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJFc1NlYXJjaFJlc3VsdCIsDQogICAgY29tcG9uZW50czogeyBFc1NvcnRWaWV3LCBFc1Byb2R1Y3RWaWV3IH0sDQogICAgcHJvcHM6IHsNCiAgICAgIC8vIOexu+WeiyBzdG9yZSDllYbpk7rvvIwgcHJvZHVjdCDllYblk4ENCiAgICAgIHR5cGU6IHsNCiAgICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgICBkZWZhdWx0OiAicHJvZHVjdCIsDQogICAgICB9LA0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGh0dHBMb2FkaW5nOiBmYWxzZSwNCiAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgcGFnZVNpemU6IDEyLA0KICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgc2VhcmNoTGlzdEluZm86IFtdLA0KICAgICAgICBiZWZvcmVTb3J0UGFyYW1zOiB7fSwNCiAgICAgICAgZGF0YVR5cGU6ICIiLA0KICAgICAgfTsNCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICBnb29kc0xpc3QodmFsKSB7DQogICAgICAgIC8vIGRlYnVnZ2VyOw0KICAgICAgICB0aGlzLnNlcmFjaFJlc3VsdExpc3QgPSB2YWw7DQogICAgICB9LA0KICAgICAgcm91dGU6ICJyZXF1ZXN0RGF0YSIsDQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgLi4ubWFwR2V0dGVycyh7DQogICAgICAgIHN0b3JlU2VhcmNoVmFsdWU6ICJob21lL3N0b3JlU2VhcmNoVmFsdWUiLA0KICAgICAgICBzZXJhY2hSZXN1bHRMaXN0OiAidXNlci9zZXJhY2hSZXN1bHRMaXN0IiwNCiAgICAgIH0pLA0KICAgICAgaXNTdG9yZVZpZXcoKSB7DQogICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICJzdG9yZSI7DQogICAgICB9LA0KICAgICAgZ29vZHNMaXN0KCkgew0KICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiRVNfU0VBUkNIX1JFU1VMVCIpIHx8ICJbXSIpOw0KICAgICAgfSwNCiAgICAgIA0KICAgIH0sDQogICBhY3RpdmF0ZWQgKCkgew0KICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICBjb25zdCB7IGsgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5DQogICAgICBpZiAoaykgew0KICAgICAgdGhpcy5wYWdlSW5pdChrKQ0KICAgICAgfQ0KICAgIH0pDQogIH0sDQogICAgDQogICAgbWV0aG9kczogew0KICAgICAgLi4ubWFwQWN0aW9ucyh7DQogICAgICAgIHJlcXVlc3RTZWFyY2hSZXN1bHRMaXN0OiAidXNlci9yZXF1ZXN0U2VhcmNoUmVzdWx0TGlzdCIsDQogICAgICB9KSwNCiAgICAgIC4uLm1hcE11dGF0aW9ucyh7DQogICAgICAgIHVwZGF0ZVNlcmFjaFJlc3VsdExpc3Q6ICJ1c2VyL3VwZGF0ZVNlcmFjaFJlc3VsdExpc3QiLA0KICAgICAgfSksDQogICAgICBwYWdlSW5pdChrKSB7DQogICAgICAvLyBpZiAoaykgew0KICAgICAgLy8gICB0aGlzLmtleXdvcmQgPSBrDQogICAgICAvLyAgIHRoaXMucmVxdWVzdERhdGEoKQ0KICAgICAgLy8gfSBlbHNlIHsNCiAgICAgIC8vICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQ0KICAgICAgLy8gfQ0KICAgIH0sDQogICAgICBhc3luYyByZXF1ZXN0RGF0YShwYXJhbXMgPSB7fSkgew0KICAgICAgICBjb25zdCBrZXl3b3JkcyA9IHRoaXMuc3RvcmVTZWFyY2hWYWx1ZTsNCiAgICAgICAgY29uc29sZS5sb2coJzMzMzMgLT4nLCAzMzMzKTsNCiAgICAgICAgLy8gaWYgKGtleXdvcmRzLmluZGV4T2YoJyYnKSAhPT0gLTEpew0KICAgICAgICAvLyAgICAgY29uc3QgdmFsICA9IEpTT04ucGFyc2Uoa2V5d29yZHMpDQogICAgICAgIC8vICAgICBrZXl3b3JkcyA9ICBTdHJpbmcoZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkpLnRyaW0oKQ0KICAgICAgICAvLyAgICAgfWVsc2V7DQogICAgICAgIC8vICAgICBjb25zdCB2YWwgID0gSlNPTi5wYXJzZShrZXl3b3JkcykNCiAgICAgICAgLy8gICAgIGtleXdvcmRzID0gU3RyaW5nKHZhbCkudHJpbSgpDQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKHBhcmFtcykgew0KICAgICAgICAgIGNvbnN0IGhhc0lkID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhcmFtcywgImtleXdvcmQiKTsNCiAgICAgICAgICBjb25zdCBzb3J0UGFyYW1zID0gaGFzSWQgPyB0aGlzLmJlZm9yZVNvcnRQYXJhbXMgOiB7fTsNCiAgICAgICAgICBhd2FpdCB0aGlzLnJlcXVlc3RTZWFyY2hSZXN1bHRMaXN0KHsNCiAgICAgICAgICAgIGtleXdvcmQ6IGhhc0lkID8gcGFyYW1zLmNhdGVnb3J5SWQgOiBrZXl3b3JkcywNCiAgICAgICAgICAgIC4uLnNvcnRQYXJhbXMsDQogICAgICAgICAgICAuLi5wYXJhbXMsDQogICAgICAgICAgICBwYWdlTnVtOiB0aGlzLnBhZ2VOdW0sDQogICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwNCiAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMudG90YWwgPQ0KICAgICAgICAgICAgICB0aGlzLnBhZ2VOdW0gPT09IDEgJiYgIXJlcy5wYWdlTGlzdC5sZW5ndGgNCiAgICAgICAgICAgICAgICA/IDANCiAgICAgICAgICAgICAgICA6IHJlcy5wYWdlTGlzdC5sZW5ndGggPCB0aGlzLnBhZ2VTaXplDQogICAgICAgICAgICAgICAgPyByZXMucGFnZUluZm8ucGFnZU51bSAqIHRoaXMucGFnZVNpemUNCiAgICAgICAgICAgICAgICA6IHJlcy5wYWdlSW5mby5wYWdlTnVtICogdGhpcy5wYWdlU2l6ZSArIDE7DQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChlbXB0eVBhcmFtLmluY2x1ZGVzKGtleXdvcmRzKSkgew0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmh0dHBMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVxdWVzdFNlYXJjaFJlc3VsdExpc3Qoew0KICAgICAgICAgICAgICAuLi5iZWZvcmVTb3J0UGFyYW1zLA0KICAgICAgICAgICAgICBrZXl3b3JkOiBrZXl3b3JkcywNCiAgICAgICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLA0KICAgICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0NCiAgICAgICAgICAgICAgICAgIHRoaXMucGFnZU51bSA9PT0gMSAmJiAhcmVzLnBhZ2VMaXN0Lmxlbmd0aA0KICAgICAgICAgICAgICAgICAgICA/IDANCiAgICAgICAgICAgICAgICAgICAgOiByZXMucGFnZUxpc3QubGVuZ3RoIDwgdGhpcy5wYWdlU2l6ZQ0KICAgICAgICAgICAgICAgICAgICA/IHJlcy5wYWdlSW5mby5wYWdlTnVtICogdGhpcy5wYWdlU2l6ZQ0KICAgICAgICAgICAgICAgICAgICA6IHJlcy5wYWdlSW5mby5wYWdlTnVtICogdGhpcy5wYWdlU2l6ZSArIDE7DQogICAgICAgICAgICAgICAgdGhpcy5odHRwTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuaHR0cExvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHRoaXMuaHR0cExvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBjdXJyZW50Q2hhbmdlKHBhZ2UpIHsNCiAgICAgICAgdGhpcy5wYWdlTnVtID0gcGFnZTsNCiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSgpOw0KICAgICAgfSwNCiAgICAgIHNlYXJjaFZhbHVlQ2hhbmdlKHZhbCkgew0KICAgICAgICBpZiAoIWVtcHR5UGFyYW0uaW5jbHVkZXModmFsKSkgew0KICAgICAgICAgIHRoaXMucGFnZU51bSA9IDE7DQogICAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSh7IGtleXdvcmQ6IHZhbCB9KTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHNvcnRFdmVudChwYXJhbXMpIHsNCiAgICAgICAgdGhpcy5iZWZvcmVTb3J0UGFyYW1zID0gcGFyYW1zOw0KICAgICAgICBpZiAoIXRoaXMuc3RvcmVTZWFyY2hWYWx1ZSkgew0KICAgICAgICAgIHRoaXMudXBkYXRlU2VyYWNoUmVzdWx0TGlzdCh7IHBhZ2VMaXN0OiBbXSB9KTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnBhZ2VOdW0gPSAxOw0KICAgICAgICB0aGlzLnJlcXVlc3REYXRhKHBhcmFtcyk7DQogICAgICB9LA0KICAgIH0sDQogICAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLlrp7kvovplIDmr4HlrozmiJAiKTsNCiAgICB9LA0KICB9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAuCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/page/searchResultPage","sourcesContent":["<template>\r\n  <div class=\"serach-result\">\r\n    <EsHeaderView @searchValueChange=\"searchValueChange\" />\r\n    <div class=\"serach-result-wrap app-container app-center\">\r\n      <EsLoadingView :loading=\"httpLoading\">\r\n        <div class=\"serach-result-product\">\r\n          <EsSortView @sort=\"sortEvent\" />\r\n          <div class=\"product-list\" v-if=\"serachResultList.length\">\r\n            <EsProductView\r\n              v-for=\"(item, index) in serachResultList\"\r\n              :key=\"index\"\r\n              :item=\"item\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"common-pagination\"\r\n            v-if=\"serachResultList.length || total\"\r\n          >\r\n            <el-pagination\r\n              background\r\n              layout=\"prev, pager, next\"\r\n              class=\"es-pagination\"\r\n              :page-size=\"pageSize\"\r\n              :current-page=\"pageNum\"\r\n              :total=\"total\"\r\n              @current-change=\"currentChange\"\r\n            />\r\n          </div>\r\n          <div class=\"no-data\" v-if=\"!serachResultList.length\">\r\n            <el-empty :description=\"$t('message.home.noData')\"></el-empty>\r\n          </div>\r\n        </div>\r\n      </EsLoadingView>\r\n    </div>\r\n    <EsFooterView />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // import EsStore from '@/components/store'\r\n  import EsSortView from \"@/page/commodityPage/sort.vue\";\r\n  import EsProductView from \"@/components/product\";\r\n  import { mapActions, mapGetters, mapMutations } from \"vuex\";\r\n  // import { SearchApi } from \"@/api\";\r\n  const emptyParam = [undefined, null, \"\"];\r\n\r\n  export default {\r\n    name: \"EsSearchResult\",\r\n    components: { EsSortView, EsProductView },\r\n    props: {\r\n      // 类型 store 商铺， product 商品\r\n      type: {\r\n        type: String,\r\n        default: \"product\",\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        httpLoading: false,\r\n        pageNum: 1,\r\n        pageSize: 12,\r\n        total: 0,\r\n        searchListInfo: [],\r\n        beforeSortParams: {},\r\n        dataType: \"\",\r\n      };\r\n    },\r\n    watch: {\r\n      goodsList(val) {\r\n        // debugger;\r\n        this.serachResultList = val;\r\n      },\r\n      route: \"requestData\",\r\n    },\r\n    computed: {\r\n      ...mapGetters({\r\n        storeSearchValue: \"home/storeSearchValue\",\r\n        serachResultList: \"user/serachResultList\",\r\n      }),\r\n      isStoreView() {\r\n        return this.type === \"store\";\r\n      },\r\n      goodsList() {\r\n        return JSON.parse(localStorage.getItem(\"ES_SEARCH_RESULT\") || \"[]\");\r\n      },\r\n      \r\n    },\r\n   activated () {\r\n    this.$nextTick(() => {\r\n       const { k } = this.$route.query\r\n      if (k) {\r\n      this.pageInit(k)\r\n      }\r\n    })\r\n  },\r\n    \r\n    methods: {\r\n      ...mapActions({\r\n        requestSearchResultList: \"user/requestSearchResultList\",\r\n      }),\r\n      ...mapMutations({\r\n        updateSerachResultList: \"user/updateSerachResultList\",\r\n      }),\r\n      pageInit(k) {\r\n      // if (k) {\r\n      //   this.keyword = k\r\n      //   this.requestData()\r\n      // } else {\r\n      //   this.$router.push('/')\r\n      // }\r\n    },\r\n      async requestData(params = {}) {\r\n        const keywords = this.storeSearchValue;\r\n        console.log('3333 ->', 3333);\r\n        // if (keywords.indexOf('&') !== -1){\r\n        //     const val  = JSON.parse(keywords)\r\n        //     keywords =  String(encodeURIComponent(val)).trim()\r\n        //     }else{\r\n        //     const val  = JSON.parse(keywords)\r\n        //     keywords = String(val).trim()\r\n        // }\r\n        if (params) {\r\n          const hasId = Object.prototype.hasOwnProperty.call(params, \"keyword\");\r\n          const sortParams = hasId ? this.beforeSortParams : {};\r\n          await this.requestSearchResultList({\r\n            keyword: hasId ? params.categoryId : keywords,\r\n            ...sortParams,\r\n            ...params,\r\n            pageNum: this.pageNum,\r\n            pageSize: this.pageSize,\r\n          }).then((res) => {\r\n            this.total =\r\n              this.pageNum === 1 && !res.pageList.length\r\n                ? 0\r\n                : res.pageList.length < this.pageSize\r\n                ? res.pageInfo.pageNum * this.pageSize\r\n                : res.pageInfo.pageNum * this.pageSize + 1;\r\n          });\r\n        } else {\r\n          try {\r\n            if (emptyParam.includes(keywords)) {\r\n              return;\r\n            }\r\n            this.httpLoading = true;\r\n            await this.requestSearchResultList({\r\n              ...beforeSortParams,\r\n              keyword: keywords,\r\n              pageNum: this.pageNum,\r\n              pageSize: this.pageSize,\r\n            })\r\n              .then((res) => {\r\n                this.total =\r\n                  this.pageNum === 1 && !res.pageList.length\r\n                    ? 0\r\n                    : res.pageList.length < this.pageSize\r\n                    ? res.pageInfo.pageNum * this.pageSize\r\n                    : res.pageInfo.pageNum * this.pageSize + 1;\r\n                this.httpLoading = false;\r\n              })\r\n              .catch(() => {\r\n                this.httpLoading = false;\r\n              });\r\n          } finally {\r\n            this.httpLoading = false;\r\n          }\r\n        }\r\n      },\r\n      currentChange(page) {\r\n        this.pageNum = page;\r\n        this.requestData();\r\n      },\r\n      searchValueChange(val) {\r\n        if (!emptyParam.includes(val)) {\r\n          this.pageNum = 1;\r\n          this.requestData({ keyword: val });\r\n        }\r\n      },\r\n      sortEvent(params) {\r\n        this.beforeSortParams = params;\r\n        if (!this.storeSearchValue) {\r\n          this.updateSerachResultList({ pageList: [] });\r\n          return;\r\n        }\r\n\r\n        this.pageNum = 1;\r\n        this.requestData(params);\r\n      },\r\n    },\r\n    beforeDestroy() {\r\n      console.log(\"实例销毁完成\");\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .app-container {\r\n    width: 1200px;\r\n  }\r\n  .serach-result {\r\n    &-wrap {\r\n      min-height: calc(100vh - 390px);\r\n      position: relative;\r\n      padding-bottom: 112px;\r\n\r\n      .common-pagination {\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n      }\r\n    }\r\n\r\n    .commodity-content-title {\r\n      padding: 0px 40px;\r\n    }\r\n    .no-data {\r\n      display: flex;\r\n      justify-content: center;\r\n    }\r\n  }\r\n</style>\r\n"]}]}