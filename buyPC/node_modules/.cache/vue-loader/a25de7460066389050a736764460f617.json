{"remainingRequest":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\productDetailsPage\\productComment.vue?vue&type=style&index=0&id=71d90fb6&lang=scss","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\productDetailsPage\\productComment.vue","mtime":1760944158215},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\css-loader\\dist\\cjs.js","mtime":1761044715569},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1761044717168},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\postcss-loader\\src\\index.js","mtime":1761044716266},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1761044715084},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucHJvZHVjdC1jb21tZW50IHsNCiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItYm9yZGVyKTsNCiAgd2lkdGg6IDk1N3B4Ow0KICAucHJvZHVjdC1jb21tZW50LXRleHQgew0KICAgIGRpc3BsYXk6IC13ZWJraXQtYm94Ow0KICB9DQoNCiAgLmJ1dHRvbiB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIHBhZGRpbmc6IDRweCAxMHB4Ow0KICAgIC8vIGhlaWdodDogMjhweDsNCiAgICBib3JkZXItcmFkaXVzOiAxNHB4Ow0KICAgIGNvbG9yOiAjOTk5OTk5Ow0KICAgIG1hcmdpbi1yaWdodDogMTNweDsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgYmFja2dyb3VuZDogI2VlZWVlZTsNCg0KICAgICYuYWN0aXZlIHsNCiAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgLy8gYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItbWFpbik7DQogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1tYWluKTsNCiAgICB9DQogIH0NCg0KICAuZXZhbHVhdGlvbi1pbWcgew0KICAgIHdpZHRoOiA4N3B4Ow0KICAgIGhlaWdodDogODdweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlZWVlOw0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogIH0NCg0KICAucC1oZWFkZXIgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IHJvdzsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsNCiAgICBoZWlnaHQ6IDcwcHg7DQogICAgcGFkZGluZy1sZWZ0OiAzN3B4Ow0KICAgIHBhZGRpbmctcmlnaHQ6IDE2cHg7DQogICAgLy8gcGFkZGluZy1ib3R0b206IDMwcHg7DQogICAgLy8gYmFja2dyb3VuZC1jb2xvcjogI2VlZTsNCiAgfQ0KDQogIC50aXRsZTEgew0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgZm9udC1zaXplOiAyMHB4Ow0KICAgIGNvbG9yOiB2YXIoLS1jb2xvci10aXRsZSk7DQogICAgbWFyZ2luLWxlZnQ6IDIycHg7DQogICAgLy8gYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7DQogICAgLy8gcGFkZGluZzogMjBweCAzN3B4IDE5cHggMzdweDsNCiAgfQ0KDQogICYtaXRlbSB7DQogICAgcGFkZGluZzogMTVweCA0MHB4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICB9DQoNCiAgJi10b3Agew0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQoNCiAgICAudXNlckluZm8gew0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgY29sb3I6IHZhcigtY29sb3ItYmxhY2spOw0KICAgICAgbWFyZ2luLWJvdHRvbTogNHB4Ow0KDQogICAgICBpbWcgew0KICAgICAgICB3aWR0aDogMzFweDsNCiAgICAgICAgaGVpZ2h0OiAzMXB4Ow0KICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogMTAwJTsNCiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICB9DQoNCiAgICAgIHNwYW4gew0KICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itc3VidGl0bGUpOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICAucmF0ZSB7DQogICAgLnJhdGUtYm94IHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgY29sb3I6ICMwMDA7DQogICAgfQ0KICB9DQogIC5ldmFsLXRpbWUgew0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBjb2xvcjogIzk5OTk5OTsNCiAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgfQ0KICAmLXRleHQgew0KICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIHBhZGRpbmc6IDEwcHggMDsNCiAgICBjb2xvcjogdmFyKC1jb2xvci1ibGFjayk7DQogICAgZGlzcGxheTogaW5oZXJpdCAhaW1wb3J0YW50Ow0KICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsNCiAgfQ0KDQogICYtcGFnaW5hdGlvbiB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIHBhZGRpbmc6IDQwcHggMDsNCiAgfQ0KICAuYXR0cmJveCB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgY29sb3I6ICMzMzM7DQogICAgLmF0dHIgew0KICAgICAgJjpudGgtY2hpbGQoMikgew0KICAgICAgICBtYXJnaW4tbGVmdDogNXB4Ow0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDVweDsNCiAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjOTk5Ow0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["productComment.vue"],"names":[],"mappings":";AAkRA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"productComment.vue","sourceRoot":"src/page/productDetailsPage","sourcesContent":["<template>\r\n  <div class=\"product-comment\">\r\n    <div class=\"p-header\">\r\n      <div class=\"title1\">\r\n        {{ this.$t(\"message.home.userEvaluation\" /**用户评价 */) }}\r\n        <span v-if=\"itemname !== 'Inchoi'\">({{ productCommentNum || 0 }})</span>\r\n       \r\n      </div>\r\n      <div style=\"display: flex; flex-direction: row\">\r\n        <div\r\n          v-for=\"item in Object.keys(categoryNum)\"\r\n          @click=\"onEvaluationClick(item)\"\r\n          class=\"button\"\r\n          :class=\"item === evaluationTypeKey ? 'active' : ''\"\r\n          :key=\"item\"\r\n        >\r\n          {{ categoryNum[item].text }}({{ categoryNum[item].num }})\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"product-comment-content\"\r\n      v-loading=\"loading\"\r\n      style=\"padding-top: 10px\"\r\n    >\r\n      <div\r\n        v-for=\"(item, index) in productComment\"\r\n        :key=\"index\"\r\n        class=\"product-comment-item\"\r\n      >\r\n        <div class=\"product-comment-top flex-start\">\r\n          <div class=\"userInfo\">\r\n            <img\r\n              :src=\"\r\n                require(`@/assets/image/avatar/${\r\n                  item.avatar || Math.floor(Math.random() * 20)\r\n                }.png`)\r\n              \"\r\n              alt=\"User\"\r\n            />\r\n            <div>{{ item.userName }}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"rate\">\r\n          <div class=\"rate-box\">\r\n            <el-rate disabled :value=\"item.rating\"></el-rate>\r\n            <span style=\"color: var(--color-main); font-size: 12px\">{{\r\n              $t(\"message.home.订单已完成\")\r\n            }}</span>\r\n          </div>\r\n        </div>\r\n        <!-- <div v-if=\"item.attributes\" class=\"attrbox\">\r\n          <div v-for=\"(i, d) in item.attributes\" :key=\"d\" class=\"attr\">\r\n            <div v-if=\"i.attrName\">\r\n              <span>{{ i.attrName }}</span\r\n              >:<span>{{ i.attrValue }}</span>\r\n            </div>\r\n          </div>\r\n        </div> -->\r\n        <p class=\"product-comment-text\">\r\n          {{ item.content }}\r\n        </p>\r\n        <div>\r\n          <el-image\r\n            class=\"evaluation-img\"\r\n            v-for=\"url in evaluationImages[index]\"\r\n            :src=\"url\"\r\n            :key=\"url\"\r\n            :preview-src-list=\"evaluationImages[index]\"\r\n          >\r\n          </el-image>\r\n        </div>\r\n        <span class=\"eval-time\"\r\n          ><span v-if=\"item.countryName && itemname !== 'Inchoi'&& itemname !== 'Green Mall'\"\r\n            >{{ item.countryName }}&nbsp;>>&nbsp; </span\r\n          >{{ $formatZoneDate(item.evaluationTime) }}</span\r\n        >\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-empty\r\n        :description=\"$t('message.home.noComments')\"\r\n        v-if=\"!productComment.length\"\r\n      ></el-empty>\r\n    </div>\r\n    <div class=\"product-comment-pagination\" v-if=\"total > 5\">\r\n      <el-pagination\r\n        background\r\n        layout=\"prev,next\"\r\n        class=\"es-pagination\"\r\n        :current-page=\"pageNum\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :prev-text=\"$t('message.home.prevPage')\"\r\n        :next-text=\"$t('message.home.nextPage')\"\r\n        @current-change=\"currentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport { getProductEvaluationCategory } from \"@/api\";\r\n// import { request } from \"http\";\r\nexport default {\r\n  name: \"EsProductComment\",\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      itemname: process.env.VUE_APP_ITEM_NAME,\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      evaluationTypeKey: undefined,\r\n      total: 0,\r\n      categoryNum: {\r\n        havePicture: {\r\n          text: this.$t(\"message.home.hasImage\"),\r\n          num: \"0\",\r\n          evaluationType: -2,\r\n        },\r\n        positiveComments: {\r\n          text: this.$t(\"message.home.highOpinion\"),\r\n          num: \"0\",\r\n          evaluationType: 1,\r\n        },\r\n        mediumReview: {\r\n          text: this.$t(\"message.home.mediumOpinion\"),\r\n          num: \"0\",\r\n          evaluationType: 2,\r\n        },\r\n        negativeComment: {\r\n          text: this.$t(\"message.home.lowOpinion\"),\r\n          num: \"0\",\r\n          evaluationType: 3,\r\n        },\r\n      },\r\n      evaluationImages: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"productDetails\", [\r\n      \"productDetails\",\r\n      \"productComment\",\r\n      \"productCommentPageInfo\",\r\n      \"productCommentNum\",\r\n    ]),\r\n  },\r\n  filters: {\r\n    abbreviatedName(str, frontLen = 2, endLen = 2) {\r\n      let len = str.length - frontLen - endLen;\r\n      let x = \"\";\r\n      for (let i = 0; i < len; i++) {\r\n        x += \"*\";\r\n      }\r\n      return (\r\n        str.substring(0, frontLen) + x + str.substring(str.length - endLen)\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    async productDetails(newValue, oldValue) {\r\n      if (newValue && oldValue && newValue.id !== oldValue.id) {\r\n        this.requestCommend();\r\n        this.requestEvaluationCategory();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"productDetails\", [\"requestRecommendLList\"]),\r\n    // subUsername(user) {\r\n    //   if (user.indexOf(\"@\") < 0) {\r\n    //     let str = user.substring(2, user.length - 1);\r\n    //     let name = user.replace(str, \"***\");\r\n    //     return name;\r\n    //   } else {\r\n    //     let str = user.substring(1, user.indexOf(\"@\"));\r\n    //     let name = user.replace(str, \"***\");\r\n    //     return name;\r\n    //   }\r\n    // },\r\n    \r\n    async requestCommend(params) {\r\n      try {\r\n        this.loading = true;\r\n        params = params ?? {\r\n          sellerGoodsId: this.productDetails.id,\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n        };\r\n        await this.requestRecommendLList(params).then((res) => {\r\n          const { pageInfo } = res;\r\n          this.total = pageInfo.totalElements;\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.genImageList();\r\n    },\r\n\r\n    async requestEvaluationCategory() {\r\n      const res = await getProductEvaluationCategory({\r\n        goodId: this.productDetails.id,\r\n      });\r\n      if (res && res.code === \"0\") {\r\n        for (let key in res.data) {\r\n          this.categoryNum[key].num = res.data[key];\r\n        }\r\n      }\r\n    },\r\n\r\n    genImageList() {\r\n      this.evaluationImages = [];\r\n      for (let evaluation of this.productComment) {\r\n        const imgUrls = Object.keys(evaluation)\r\n          .filter((x) => x.includes(\"imgUrl\") && !!evaluation[x])\r\n          .map((x) => evaluation[x]);\r\n        this.evaluationImages.push(imgUrls);\r\n        if (evaluation.content == \"\") {\r\n          evaluation.content = this.$t(\"message.home.用户未发表评论\");\r\n        }\r\n        if (evaluation.content == \"系统默认好评\") {\r\n          evaluation.content = this.$t(\"message.home.系统默认好评\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onEvaluationClick(key) {\r\n      this.pageNum = 0;\r\n      this.total = 0;\r\n      this.evaluationTypeKey = key;\r\n      this.requestCommend({\r\n        sellerGoodsId: this.productDetails.id,\r\n        pageNum: this.pageNum,\r\n        pageSize: this.pageSize,\r\n        evaluationType: this.categoryNum[key].evaluationType,\r\n      });\r\n    },\r\n\r\n    currentChange(page) {\r\n      this.pageNum = page;\r\n      this.requestCommend();\r\n    },\r\n    timestampToTime(timestamp) {\r\n      timestamp = timestamp ? timestamp : null;\r\n      let date = new Date(timestamp); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n      let Y = date.getFullYear() + \"-\";\r\n      let M =\r\n        (date.getMonth() + 1 < 10\r\n          ? \"0\" + (date.getMonth() + 1)\r\n          : date.getMonth() + 1) + \"-\";\r\n      let D =\r\n        (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()) + \" \";\r\n      let h =\r\n        (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) + \":\";\r\n      let m =\r\n        (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n        \":\";\r\n      let s =\r\n        date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\r\n      return $formatZoneDate(Y + M + D + h + m + s);\r\n    },\r\n    isInteger(num) {\r\n      if (parseInt(num, 10) === num) {\r\n        return num + \".0\";\r\n      } else {\r\n        return num;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.product-comment {\r\n  border: 1px solid var(--color-border);\r\n  width: 957px;\r\n  .product-comment-text {\r\n    display: -webkit-box;\r\n  }\r\n\r\n  .button {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 4px 10px;\r\n    // height: 28px;\r\n    border-radius: 14px;\r\n    color: #999999;\r\n    margin-right: 13px;\r\n    cursor: pointer;\r\n    background: #eeeeee;\r\n\r\n    &.active {\r\n      color: #ffffff;\r\n      // border: 1px solid var(--color-main);\r\n      background: var(--color-main);\r\n    }\r\n  }\r\n\r\n  .evaluation-img {\r\n    width: 87px;\r\n    height: 87px;\r\n    border: 1px solid #eeeeee;\r\n    border-radius: 4px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .p-header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    border-bottom: 1px solid #eee;\r\n    height: 70px;\r\n    padding-left: 37px;\r\n    padding-right: 16px;\r\n    // padding-bottom: 30px;\r\n    // background-color: #eee;\r\n  }\r\n\r\n  .title1 {\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    color: var(--color-title);\r\n    margin-left: 22px;\r\n    // border-bottom: 1px solid var(--color-border);\r\n    // padding: 20px 37px 19px 37px;\r\n  }\r\n\r\n  &-item {\r\n    padding: 15px 40px;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n\r\n  &-top {\r\n    font-size: 12px;\r\n    justify-content: space-between;\r\n\r\n    .userInfo {\r\n      display: flex;\r\n      align-items: center;\r\n      font-weight: 400;\r\n      font-size: 12px;\r\n      color: var(-color-black);\r\n      margin-bottom: 4px;\r\n\r\n      img {\r\n        width: 31px;\r\n        height: 31px;\r\n        object-fit: cover;\r\n        border-radius: 100%;\r\n        margin-right: 8px;\r\n      }\r\n\r\n      span {\r\n        color: var(--color-subtitle);\r\n      }\r\n    }\r\n  }\r\n  .rate {\r\n    .rate-box {\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 12px;\r\n      color: #000;\r\n    }\r\n  }\r\n  .eval-time {\r\n    font-size: 12px;\r\n    color: #999999;\r\n    margin-top: 10px;\r\n    display: inline-block;\r\n  }\r\n  &-text {\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    padding: 10px 0;\r\n    color: var(-color-black);\r\n    display: inherit !important;\r\n    word-wrap: break-word;\r\n  }\r\n\r\n  &-pagination {\r\n    width: 100%;\r\n    text-align: center;\r\n    padding: 40px 0;\r\n  }\r\n  .attrbox {\r\n    display: flex;\r\n    font-size: 12px;\r\n    color: #333;\r\n    .attr {\r\n      &:nth-child(2) {\r\n        margin-left: 5px;\r\n        padding-left: 5px;\r\n        border-left: 1px solid #999;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}