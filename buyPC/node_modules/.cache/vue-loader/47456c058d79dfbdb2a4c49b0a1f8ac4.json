{"remainingRequest":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\commodityPage\\filter.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\commodityPage\\filter.vue","mtime":1760944158210},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\babel-loader\\lib\\index.js","mtime":1761044716268},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyBDYXRlZ29yeUFwaUxpc3QgfSBmcm9tICJAL2FwaS9ob21lIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkVzRmlsdGVyIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY3VycmVudEZpbHRlclZhbHVlOiAiIiwNCiAgICAgIGNhdGVnb3J5TGlzdDogW10sDQogICAgICBvcGVuTGlzdDogZmFsc2UsDQogICAgICBjYXRlZ29yeUlkOiAiIiwNCiAgICAgIHBhckNhdGVnb3J5SWQ6ICIiLA0KICAgICAgc2Nyb2xsVG9wOiAwLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLy8gLi4ubWFwR2V0dGVycygiaG9tZSIsIFsiY2F0ZWdvcnlMaXN0Il0pLA0KICB9LA0KICBhY3RpdmF0ZWQoKSB7DQogICAgdGhpcy5nZXRDYXRlZ29yeUxpc3QoKTsNCiAgICBjb25zdCBjdXJyZW50Um91dGVyID0gdGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZTsNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhpcy53aW5kb3dTY3JvbGwpOw0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgaWYgKHRoaXMuY2F0ZWdvcnlMaXN0Lmxlbmd0aCkgew0KICAgICAgICBpZihjdXJyZW50Um91dGVyLnF1ZXJ5LnBhcmVudElkKXsNCiAgICAgICAgICBjb25zb2xlLmxvZygncGFyZW50SWQgLT4nLCBjdXJyZW50Um91dGVyLnF1ZXJ5LnBhcmVudElkKTsNCiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2F0ZWdvcnlMaXN0LmZpbmRJbmRleCgNCiAgICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmNhdGVnb3J5SWQgPT09IGN1cnJlbnRSb3V0ZXIucXVlcnkucGFyZW50SWQNCiAgICAgICAgICApOw0KICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyVmFsdWUgPSBpbmRleDsNCiAgICAgICAgICAgIHRoaXMucGFyQ2F0ZWdvcnlJZCA9IGN1cnJlbnRSb3V0ZXIucXVlcnkucGFyZW50SWQ7DQogICAgICAgICAgICB0aGlzLmNhdGVnb3J5SWQgPSBjdXJyZW50Um91dGVyLnF1ZXJ5LmlkOw0KICAgICAgICAgICAgdGhpcy5vcGVuTGlzdCA9IHRydWUNCiAgICAgICAgICANCiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGVyLnF1ZXJ5LmlkKSB7DQogICAgICAgICAgdGhpcy5vcGVuTGlzdCA9IGZhbHNlDQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImNhdGVnb3J5X2lkIiwgY3VycmVudFJvdXRlci5xdWVyeS5pZCk7DQogICAgICAgICAgdGhpcy4kZW1pdCgNCiAgICAgICAgICAgICJmaWx0ZXJDaGFuZ2UiLA0KICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QuZmluZCgNCiAgICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0uY2F0ZWdvcnlJZCA9PT0gY3VycmVudFJvdXRlci5xdWVyeS5pZA0KICAgICAgICAgICAgKS5jYXRlZ29yeUlkDQogICAgICAgICAgKTsNCiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2F0ZWdvcnlMaXN0LmZpbmRJbmRleCgNCiAgICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmNhdGVnb3J5SWQgPT09IGN1cnJlbnRSb3V0ZXIucXVlcnkuaWQNCiAgICAgICAgICApOw0KICAgICAgICAgIGlmIChpbmRleCkgew0KICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyVmFsdWUgPSBpbmRleDsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyVmFsdWUgPSAiZXhwbG1lIjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sIDEwMDApOw0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIEV2ZW50QnVzLiRvbigic29ydCIsIChkYXRhKSA9PiB7DQogICAgLy8gICBjb25zb2xlLmxvZygiZGF0YSAtPiIsIGRhdGEpOw0KICAgIC8vIH0pOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucygiaG9tZSIsIFsicmVxdWVzdENhdGVnb3J5TGlzdCJdKSwNCg0KLy8gd2luZG93U2Nyb2xsKCkgew0KLy8gICAgIHRoaXMuc2Nyb2xsVG9wID0NCi8vICAgICB3aW5kb3cucGFnZVlPZmZzZXQgfHwNCi8vICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8DQovLyAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ANCi8vICAgICBjb25zb2xlLmxvZyh0aGlzLnNjcm9sbFRvcCkNCi8vIH0sDQogICAgYXN5bmMgZ2V0Q2F0ZWdvcnlMaXN0KCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgQ2F0ZWdvcnlBcGlMaXN0KCk7DQogICAgICAvLyB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhLmZpbHRlcigoaXRlbSkgPT4gew0KICAgICAgLy8gICBpZiAoaXRlbS5uYW1lICYmIGl0ZW0uc3ViTGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAvLyAgICAgaXRlbS5zdWJMaXN0ID0gaXRlbS5zdWJMaXN0LmZpbHRlcigoc3ViSXRlbSkgPT4gc3ViSXRlbS5uYW1lKTsNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gICByZXR1cm4gaXRlbS5uYW1lOw0KICAgICAgLy8gfSk7DQogICAgICAvLyBjb25zb2xlLmxvZygidGhpcy5jYXRlZ29yeUxpc3QgLT4iLCB0aGlzLmNhdGVnb3J5TGlzdCk7DQogICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhOw0KICAgICAgLy8gY29uc29sZS5sb2coInJlcyAtPiIsIHRoaXMuY2F0ZWdvcnlMaXN0KTsNCiAgICB9LA0KICAgIGNoYW5nZUZpbHRlcihpdGVtLCBpbmRleCwgc3ViSXRlbSkgew0KICAgICAgY29uc3QgY3VycmVudFJvdXRlciA9IHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGU7DQogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJDb21tb2RpdHlTY3JvbGxUb3AiLCB0aGlzLnNjcm9sbFRvcCk7DQogICAgICB0aGlzLmNhdGVnb3J5SWQgPSAiIjsNCiAgICAgIGlmIChzdWJJdGVtKSB7DQogICAgICAgIHRoaXMuY2F0ZWdvcnlJZCA9IHN1Ykl0ZW0uY2F0ZWdvcnlJZDsNCiAgICAgICAgaWYgKGN1cnJlbnRSb3V0ZXIucXVlcnkuaWQgIT09IHN1Ykl0ZW0uY2F0ZWdvcnlJZCkgew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsNCiAgICAgICAgICAgIHBhdGg6ICIvY29tbW9kaXR5IiwNCiAgICAgICAgICAgIHF1ZXJ5OiB7IGlkOiBzdWJJdGVtLmNhdGVnb3J5SWQgfSwNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjYXRlZ29yeV9pZCIsIGl0ZW0uY2F0ZWdvcnlJZCk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMucGFyQ2F0ZWdvcnlJZCA9IGl0ZW0uY2F0ZWdvcnlJZDsNCiAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyVmFsdWUgPSBpbmRleDsNCiAgICAgICAgaWYgKGN1cnJlbnRSb3V0ZXIucXVlcnkuaWQgIT09IGl0ZW0uY2F0ZWdvcnlJZCkgew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsNCiAgICAgICAgICAgIHBhdGg6ICIvY29tbW9kaXR5IiwNCiAgICAgICAgICAgIHF1ZXJ5OiB7IGlkOiBpdGVtLmNhdGVnb3J5SWQgfSwNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjYXRlZ29yeV9pZCIsIGl0ZW0uY2F0ZWdvcnlJZCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLyoqDQogICAgICAgKiDpmLLmraLliLfmlrDmjonnm67lvZXlj4LmlbANCiAgICAgICAqLw0KICAgICAgdGhpcy4kcGFyZW50LmNoYW5nZXBhZ2UoKQ0KICAgICAgdGhpcy4kZW1pdCgiZmlsdGVyQ2hhbmdlIiwgaXRlbS5jYXRlZ29yeUlkKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["filter.vue"],"names":[],"mappings":";AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"filter.vue","sourceRoot":"src/page/commodityPage","sourcesContent":["<template>\r\n  <div class=\"filter commodity-filter\">\r\n    <h2>{{ this.$t(\"message.home.classification\" /**分类 */) }}</h2>\r\n    <ul>\r\n      <li\r\n        :class=\"{\r\n          'commodity-filter-item': true,\r\n          'commodity-filter-item-active': currentFilterValue === 'explme',\r\n        }\"\r\n        class=\"first-item\"\r\n        @click=\"changeFilter('explme', 'explme')\"\r\n      >\r\n        {{ $t(\"message.home.AllProducts\") }}\r\n      </li>\r\n      <li\r\n        v-for=\"(item, index) in categoryList\"\r\n        :key=\"index\"\r\n        :class=\"{\r\n          'commodity-filter-item': true,\r\n          'commodity-filter-item-active': currentFilterValue === index,\r\n        }\"\r\n        @click=\"changeFilter(item, index)\"\r\n      >\r\n        <div class=\"list\" @click=\"openList = !openList\">\r\n          {{ item.name }}\r\n          <i\r\n            :class=\"\r\n              openList && parCategoryId == item.categoryId\r\n                ? 'el-icon-arrow-down'\r\n                : 'el-icon-arrow-right'\r\n            \"\r\n            v-if=\"item.subList.length\"\r\n            style=\"margin-left: 5px\"\r\n          ></i>\r\n        </div>\r\n        <div\r\n          class=\"list-item\"\r\n          v-if=\"openList && parCategoryId == item.categoryId\"\r\n        >\r\n          <ul v-if=\"item.subList.length\">\r\n            <li\r\n              v-for=\"(subItem, subIndex) in item.subList\"\r\n              :key=\"subIndex\"\r\n              @click.stop=\"changeFilter(item, subIndex, subItem)\"\r\n              :class=\"subItem.categoryId == categoryId ? 'active' : ''\"\r\n            >\r\n              {{ subItem.name }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport { CategoryApiList } from \"@/api/home\";\r\nexport default {\r\n  name: \"EsFilter\",\r\n  data() {\r\n    return {\r\n      currentFilterValue: \"\",\r\n      categoryList: [],\r\n      openList: false,\r\n      categoryId: \"\",\r\n      parCategoryId: \"\",\r\n      scrollTop: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    // ...mapGetters(\"home\", [\"categoryList\"]),\r\n  },\r\n  activated() {\r\n    this.getCategoryList();\r\n    const currentRouter = this.$router.currentRoute;\r\n    window.addEventListener(\"scroll\", this.windowScroll);\r\n    setTimeout(() => {\r\n      if (this.categoryList.length) {\r\n        if(currentRouter.query.parentId){\r\n          console.log('parentId ->', currentRouter.query.parentId);\r\n          const index = this.categoryList.findIndex(\r\n            (item) => item.categoryId === currentRouter.query.parentId\r\n          );\r\n            this.currentFilterValue = index;\r\n            this.parCategoryId = currentRouter.query.parentId;\r\n            this.categoryId = currentRouter.query.id;\r\n            this.openList = true\r\n          \r\n        } else if (currentRouter.query.id) {\r\n          this.openList = false\r\n          localStorage.setItem(\"category_id\", currentRouter.query.id);\r\n          this.$emit(\r\n            \"filterChange\",\r\n            this.categoryList.find(\r\n              (item) => item.categoryId === currentRouter.query.id\r\n            ).categoryId\r\n          );\r\n          const index = this.categoryList.findIndex(\r\n            (item) => item.categoryId === currentRouter.query.id\r\n          );\r\n          if (index) {\r\n            this.currentFilterValue = index;\r\n          }\r\n        } else {\r\n          this.currentFilterValue = \"explme\";\r\n        }\r\n      }\r\n    }, 1000);\r\n  },\r\n  created() {\r\n    // EventBus.$on(\"sort\", (data) => {\r\n    //   console.log(\"data ->\", data);\r\n    // });\r\n  },\r\n  methods: {\r\n    ...mapActions(\"home\", [\"requestCategoryList\"]),\r\n\r\n// windowScroll() {\r\n//     this.scrollTop =\r\n//     window.pageYOffset ||\r\n//     document.documentElement.scrollTop ||\r\n//     document.body.scrollTop\r\n//     console.log(this.scrollTop)\r\n// },\r\n    async getCategoryList() {\r\n      const res = await CategoryApiList();\r\n      // this.categoryList = res.data.filter((item) => {\r\n      //   if (item.name && item.subList.length > 0) {\r\n      //     item.subList = item.subList.filter((subItem) => subItem.name);\r\n      //   }\r\n      //   return item.name;\r\n      // });\r\n      // console.log(\"this.categoryList ->\", this.categoryList);\r\n      this.categoryList = res.data;\r\n      // console.log(\"res ->\", this.categoryList);\r\n    },\r\n    changeFilter(item, index, subItem) {\r\n      const currentRouter = this.$router.currentRoute;\r\n      sessionStorage.setItem(\"CommodityScrollTop\", this.scrollTop);\r\n      this.categoryId = \"\";\r\n      if (subItem) {\r\n        this.categoryId = subItem.categoryId;\r\n        if (currentRouter.query.id !== subItem.categoryId) {\r\n          this.$router.replace({\r\n            path: \"/commodity\",\r\n            query: { id: subItem.categoryId },\r\n          });\r\n\r\n          localStorage.setItem(\"category_id\", item.categoryId);\r\n        }\r\n      } else {\r\n        this.parCategoryId = item.categoryId;\r\n        this.currentFilterValue = index;\r\n        if (currentRouter.query.id !== item.categoryId) {\r\n          this.$router.replace({\r\n            path: \"/commodity\",\r\n            query: { id: item.categoryId },\r\n          });\r\n\r\n          localStorage.setItem(\"category_id\", item.categoryId);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * 防止刷新掉目录参数\r\n       */\r\n      this.$parent.changepage()\r\n      this.$emit(\"filterChange\", item.categoryId);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nhtml[dir=\"rtl\"]{\r\n  .first-item{\r\n    text-align: right;\r\n  } \r\n  .commodity-filter h2{\r\n    text-align: center;\r\n  }\r\n}\r\n.commodity-filter {\r\n  width: 180px;\r\n  border-right: 1px solid var(--color-border);\r\n  h2 {\r\n    width: 100%;\r\n    // text-align: center;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    color: var(--color-title);\r\n    border-bottom: 1px solid var(--color-border);\r\n    padding: 20px 0;\r\n    margin-bottom: 20px;\r\n  }\r\n  .first-item{\r\n    text-align: left;font-size: 14px;\r\n  }\r\n  &-item {\r\n    // text-align: center;\r\n    width: 100%;\r\n    font-weight: 400;\r\n    font-size: 12px;\r\n    color: var(--color-black);\r\n    padding: 20px 0;\r\n    cursor: pointer;\r\n    &:hover {\r\n      color: var(--color-main);\r\n      border-right: 2px solid var(--color-main);\r\n    }\r\n    &-active {\r\n      color: var(--color-main);\r\n      border-right: 2px solid var(--color-main);\r\n    }\r\n    .list {\r\n      display: flex;\r\n      // justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n    .list-item {\r\n      margin-top: 15px;\r\n      li {\r\n        text-indent: 10px;\r\n        font-size: 12px;\r\n        padding: 5px 0;\r\n        color: var(--color-black) !important;\r\n        &:hover {\r\n          color: var(--color-main) !important;\r\n          // border-right: 2px solid var(--color-main);\r\n        }\r\n        &.active {\r\n          color: var(--color-main) !important;\r\n          // border-right: 2px solid var(--color-main);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}