{"remainingRequest":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\commodityPage\\filter.vue?vue&type=style&index=0&id=0906e602&lang=scss","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\commodityPage\\filter.vue","mtime":1760944158210},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\css-loader\\dist\\cjs.js","mtime":1761044715569},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1761044717168},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\postcss-loader\\src\\index.js","mtime":1761044716266},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1761044715084},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpodG1sW2Rpcj0icnRsIl17DQogIC5maXJzdC1pdGVtew0KICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICB9IA0KICAuY29tbW9kaXR5LWZpbHRlciBoMnsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIH0NCn0NCi5jb21tb2RpdHktZmlsdGVyIHsNCiAgd2lkdGg6IDE4MHB4Ow0KICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1ib3JkZXIpOw0KICBoMiB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLy8gdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIGNvbG9yOiB2YXIoLS1jb2xvci10aXRsZSk7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7DQogICAgcGFkZGluZzogMjBweCAwOw0KICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogIH0NCiAgLmZpcnN0LWl0ZW17DQogICAgdGV4dC1hbGlnbjogbGVmdDtmb250LXNpemU6IDE0cHg7DQogIH0NCiAgJi1pdGVtIHsNCiAgICAvLyB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgd2lkdGg6IDEwMCU7DQogICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgY29sb3I6IHZhcigtLWNvbG9yLWJsYWNrKTsNCiAgICBwYWRkaW5nOiAyMHB4IDA7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICY6aG92ZXIgew0KICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW1haW4pOw0KICAgICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgdmFyKC0tY29sb3ItbWFpbik7DQogICAgfQ0KICAgICYtYWN0aXZlIHsNCiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1tYWluKTsNCiAgICAgIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWNvbG9yLW1haW4pOw0KICAgIH0NCiAgICAubGlzdCB7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgLy8ganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICB9DQogICAgLmxpc3QtaXRlbSB7DQogICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgbGkgew0KICAgICAgICB0ZXh0LWluZGVudDogMTBweDsNCiAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICBwYWRkaW5nOiA1cHggMDsNCiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWJsYWNrKSAhaW1wb3J0YW50Ow0KICAgICAgICAmOmhvdmVyIHsNCiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItbWFpbikgIWltcG9ydGFudDsNCiAgICAgICAgICAvLyBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCB2YXIoLS1jb2xvci1tYWluKTsNCiAgICAgICAgfQ0KICAgICAgICAmLmFjdGl2ZSB7DQogICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW1haW4pICFpbXBvcnRhbnQ7DQogICAgICAgICAgLy8gYm9yZGVyLXJpZ2h0OiAycHggc29saWQgdmFyKC0tY29sb3ItbWFpbik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["filter.vue"],"names":[],"mappings":";AA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"filter.vue","sourceRoot":"src/page/commodityPage","sourcesContent":["<template>\r\n  <div class=\"filter commodity-filter\">\r\n    <h2>{{ this.$t(\"message.home.classification\" /**分类 */) }}</h2>\r\n    <ul>\r\n      <li\r\n        :class=\"{\r\n          'commodity-filter-item': true,\r\n          'commodity-filter-item-active': currentFilterValue === 'explme',\r\n        }\"\r\n        class=\"first-item\"\r\n        @click=\"changeFilter('explme', 'explme')\"\r\n      >\r\n        {{ $t(\"message.home.AllProducts\") }}\r\n      </li>\r\n      <li\r\n        v-for=\"(item, index) in categoryList\"\r\n        :key=\"index\"\r\n        :class=\"{\r\n          'commodity-filter-item': true,\r\n          'commodity-filter-item-active': currentFilterValue === index,\r\n        }\"\r\n        @click=\"changeFilter(item, index)\"\r\n      >\r\n        <div class=\"list\" @click=\"openList = !openList\">\r\n          {{ item.name }}\r\n          <i\r\n            :class=\"\r\n              openList && parCategoryId == item.categoryId\r\n                ? 'el-icon-arrow-down'\r\n                : 'el-icon-arrow-right'\r\n            \"\r\n            v-if=\"item.subList.length\"\r\n            style=\"margin-left: 5px\"\r\n          ></i>\r\n        </div>\r\n        <div\r\n          class=\"list-item\"\r\n          v-if=\"openList && parCategoryId == item.categoryId\"\r\n        >\r\n          <ul v-if=\"item.subList.length\">\r\n            <li\r\n              v-for=\"(subItem, subIndex) in item.subList\"\r\n              :key=\"subIndex\"\r\n              @click.stop=\"changeFilter(item, subIndex, subItem)\"\r\n              :class=\"subItem.categoryId == categoryId ? 'active' : ''\"\r\n            >\r\n              {{ subItem.name }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport { CategoryApiList } from \"@/api/home\";\r\nexport default {\r\n  name: \"EsFilter\",\r\n  data() {\r\n    return {\r\n      currentFilterValue: \"\",\r\n      categoryList: [],\r\n      openList: false,\r\n      categoryId: \"\",\r\n      parCategoryId: \"\",\r\n      scrollTop: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    // ...mapGetters(\"home\", [\"categoryList\"]),\r\n  },\r\n  activated() {\r\n    this.getCategoryList();\r\n    const currentRouter = this.$router.currentRoute;\r\n    window.addEventListener(\"scroll\", this.windowScroll);\r\n    setTimeout(() => {\r\n      if (this.categoryList.length) {\r\n        if(currentRouter.query.parentId){\r\n          console.log('parentId ->', currentRouter.query.parentId);\r\n          const index = this.categoryList.findIndex(\r\n            (item) => item.categoryId === currentRouter.query.parentId\r\n          );\r\n            this.currentFilterValue = index;\r\n            this.parCategoryId = currentRouter.query.parentId;\r\n            this.categoryId = currentRouter.query.id;\r\n            this.openList = true\r\n          \r\n        } else if (currentRouter.query.id) {\r\n          this.openList = false\r\n          localStorage.setItem(\"category_id\", currentRouter.query.id);\r\n          this.$emit(\r\n            \"filterChange\",\r\n            this.categoryList.find(\r\n              (item) => item.categoryId === currentRouter.query.id\r\n            ).categoryId\r\n          );\r\n          const index = this.categoryList.findIndex(\r\n            (item) => item.categoryId === currentRouter.query.id\r\n          );\r\n          if (index) {\r\n            this.currentFilterValue = index;\r\n          }\r\n        } else {\r\n          this.currentFilterValue = \"explme\";\r\n        }\r\n      }\r\n    }, 1000);\r\n  },\r\n  created() {\r\n    // EventBus.$on(\"sort\", (data) => {\r\n    //   console.log(\"data ->\", data);\r\n    // });\r\n  },\r\n  methods: {\r\n    ...mapActions(\"home\", [\"requestCategoryList\"]),\r\n\r\n// windowScroll() {\r\n//     this.scrollTop =\r\n//     window.pageYOffset ||\r\n//     document.documentElement.scrollTop ||\r\n//     document.body.scrollTop\r\n//     console.log(this.scrollTop)\r\n// },\r\n    async getCategoryList() {\r\n      const res = await CategoryApiList();\r\n      // this.categoryList = res.data.filter((item) => {\r\n      //   if (item.name && item.subList.length > 0) {\r\n      //     item.subList = item.subList.filter((subItem) => subItem.name);\r\n      //   }\r\n      //   return item.name;\r\n      // });\r\n      // console.log(\"this.categoryList ->\", this.categoryList);\r\n      this.categoryList = res.data;\r\n      // console.log(\"res ->\", this.categoryList);\r\n    },\r\n    changeFilter(item, index, subItem) {\r\n      const currentRouter = this.$router.currentRoute;\r\n      sessionStorage.setItem(\"CommodityScrollTop\", this.scrollTop);\r\n      this.categoryId = \"\";\r\n      if (subItem) {\r\n        this.categoryId = subItem.categoryId;\r\n        if (currentRouter.query.id !== subItem.categoryId) {\r\n          this.$router.replace({\r\n            path: \"/commodity\",\r\n            query: { id: subItem.categoryId },\r\n          });\r\n\r\n          localStorage.setItem(\"category_id\", item.categoryId);\r\n        }\r\n      } else {\r\n        this.parCategoryId = item.categoryId;\r\n        this.currentFilterValue = index;\r\n        if (currentRouter.query.id !== item.categoryId) {\r\n          this.$router.replace({\r\n            path: \"/commodity\",\r\n            query: { id: item.categoryId },\r\n          });\r\n\r\n          localStorage.setItem(\"category_id\", item.categoryId);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * 防止刷新掉目录参数\r\n       */\r\n      this.$parent.changepage()\r\n      this.$emit(\"filterChange\", item.categoryId);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nhtml[dir=\"rtl\"]{\r\n  .first-item{\r\n    text-align: right;\r\n  } \r\n  .commodity-filter h2{\r\n    text-align: center;\r\n  }\r\n}\r\n.commodity-filter {\r\n  width: 180px;\r\n  border-right: 1px solid var(--color-border);\r\n  h2 {\r\n    width: 100%;\r\n    // text-align: center;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    color: var(--color-title);\r\n    border-bottom: 1px solid var(--color-border);\r\n    padding: 20px 0;\r\n    margin-bottom: 20px;\r\n  }\r\n  .first-item{\r\n    text-align: left;font-size: 14px;\r\n  }\r\n  &-item {\r\n    // text-align: center;\r\n    width: 100%;\r\n    font-weight: 400;\r\n    font-size: 12px;\r\n    color: var(--color-black);\r\n    padding: 20px 0;\r\n    cursor: pointer;\r\n    &:hover {\r\n      color: var(--color-main);\r\n      border-right: 2px solid var(--color-main);\r\n    }\r\n    &-active {\r\n      color: var(--color-main);\r\n      border-right: 2px solid var(--color-main);\r\n    }\r\n    .list {\r\n      display: flex;\r\n      // justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n    .list-item {\r\n      margin-top: 15px;\r\n      li {\r\n        text-indent: 10px;\r\n        font-size: 12px;\r\n        padding: 5px 0;\r\n        color: var(--color-black) !important;\r\n        &:hover {\r\n          color: var(--color-main) !important;\r\n          // border-right: 2px solid var(--color-main);\r\n        }\r\n        &.active {\r\n          color: var(--color-main) !important;\r\n          // border-right: 2px solid var(--color-main);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}