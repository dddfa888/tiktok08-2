{"remainingRequest":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\userInfo\\dashboard\\recharge\\recharge-dialog.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\src\\page\\userInfo\\dashboard\\recharge\\recharge-dialog.vue","mtime":1760944158219},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\babel.config.js","mtime":1760944158066},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\babel-loader\\lib\\index.js","mtime":1761044716268},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1761044715083},{"path":"C:\\Users\\HP\\Desktop\\tk08\\tiktok08\\buyPC\\node_modules\\vue-loader\\lib\\index.js","mtime":1761044716737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maW5kLmpzIjsKaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgVnVlUXIgZnJvbSAidnVlLXFyIjsKaW1wb3J0IHsgY29weVRleHRUb0NsaXBib2FyZCwgZG93bmxvYWRJbWFnZSwgZW1wdHlTdHIgfSBmcm9tICJAL3V0aWwiOwppbXBvcnQgeyBVcGxvYWRBcGksIGdldEZlZUFwaSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IHsgRVNfVE9LRU4gfSBmcm9tICJAL2NvbW1vbiI7CmltcG9ydCBjb21tb24gZnJvbSAiQC91dGlsL2NvbW1vbiI7CmltcG9ydCBFc1JlY2hhcmdlUmVjb3JkRGlhbG9nIGZyb20gIi4vcmVjaGFyZ2VSZWNvcmREaWFsb2ciOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJlY2hhcmdlLWRpYWxvZyIsCiAgY29tcG9uZW50czogewogICAgVnVlUXIsCiAgICBFc1JlY2hhcmdlUmVjb3JkRGlhbG9nCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBjdXJyZW50Q29pbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVmlzaWJsZTogdGhpcy52YWx1ZSB8fCBmYWxzZSwKICAgICAgcmVjaGFyZ2VSZWNvcmRWaXNpYmxlOiBmYWxzZSwKICAgICAgc2VsZWN0ZWQ6ICJiYWxhbmNlIiwKICAgICAgZm9ybTogewogICAgICAgIG5ldHdvcms6ICIiLAogICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgIHF1YW50aXR5OiAiIiwKICAgICAgICBhcnJpdmFsOiAiIiwKICAgICAgICBpbWFnZTogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBxdWFudGl0eTogW2NvbW1vbi5ydWxlVXRpbHMuZ2V0UnVsZSgicmVxdWlyZWQiLCB0aGlzLiR0KCJtZXNzYWdlLmhvbWUucGxlYXNlRW50ZXJRdWFudGl0eSIpKSwgY29tbW9uLnJ1bGVVdGlscy5nZXRSdWxlKCJkZWNpbWFsRXhjZWVkWmVybyIpLCBjb21tb24ucnVsZVV0aWxzLmdldFJ1bGUoInZhbGlkYXRvciIsICIiLCB7CiAgICAgICAgICB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgICAgaWYgKE51bWJlcih2YWx1ZSkgPiAxMGU4KSB7CiAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy4kdCgibWVzc2FnZS5ob21lLnZhbGlkYXRvck1heE51bWJlciIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfQogICAgICAgIH0pXSwKICAgICAgICBpbWFnZTogW2NvbW1vbi5ydWxlVXRpbHMuZ2V0UnVsZSgicmVxdWlyZWQiLCB0aGlzLiR0KCJtZXNzYWdlLmhvbWUudXBsb2FkUGhvdG8iKSldCiAgICAgIH0sCiAgICAgIGN1cnJlbnRTZWxlY3RCbG9jazoge30sCiAgICAgIGNvaW5JbmZvOiBbXSwKICAgICAgVXBsb2FkQXBpLAogICAgICB1cGxvYWRQYXJhbXM6IHsKICAgICAgICBtb2R1bGVOYW1lOiAicmVjaGFyZ2UiLAogICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShFU19UT0tFTikKICAgICAgfQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZSh2YWwpIHsKICAgICAgaWYgKCF2YWwpIHsKICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICBuZXR3b3JrOiAiIiwKICAgICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgICAgcXVhbnRpdHk6ICIiLAogICAgICAgICAgYXJyaXZhbDogIiIsCiAgICAgICAgICBpbWFnZTogIiIKICAgICAgICB9OwogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHZhbDsKICAgIH0sCiAgICBkaWFsb2dWaXNpYmxlKHZhbCkgewogICAgICBpZiAodmFsICE9PSB0aGlzLnZhbHVlKSB7CiAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB2YWwpOwogICAgICB9CiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLnJlcXVlc3RTZXNzaW9uVG9rZW4oKTsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5yZWNoYXJnZUFkZHJlc3MuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jb2luID09PSB0aGlzLmN1cnJlbnRDb2luKTsKICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5mb3JtLm5ldHdvcmsgPSBkYXRhWzBdLmJsb2NrY2hhaW5fbmFtZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb2luSW5mbyA9IFsuLi5kYXRhXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX3RoaXMkJHJlZnMkcmVjaGFyZ2VGOwogICAgICAgIChfdGhpcyQkcmVmcyRyZWNoYXJnZUYgPSB0aGlzLiRyZWZzLnJlY2hhcmdlRm9ybSkgPT09IG51bGwgfHwgX3RoaXMkJHJlZnMkcmVjaGFyZ2VGID09PSB2b2lkIDAgfHwgX3RoaXMkJHJlZnMkcmVjaGFyZ2VGLnJlc2V0RmllbGRzKCk7CiAgICAgIH0KICAgIH0sCiAgICAiZm9ybS5uZXR3b3JrIjogewogICAgICBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnJlY2hhcmdlQWRkcmVzcy5maW5kKGl0ZW0gPT4gaXRlbS5ibG9ja2NoYWluX25hbWUgPT09IG5ld1ZhbHVlKTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICB0aGlzLmZvcm0uYWRkcmVzcyA9IGRhdGEuYWRkcmVzczsKICAgICAgICAgICAgdGhpcy5mb3JtLnF1YW50aXR5ID0gIiI7CiAgICAgICAgICAgIHRoaXMuZm9ybS5hcnJpdmFsID0gMDsKICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0QmxvY2sgPSB7CiAgICAgICAgICAgICAgLi4uZGF0YQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmdldEF1dG9GZWUoZGF0YS5jb2luKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgICJmb3JtLnF1YW50aXR5IjogewogICAgICBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgICAgIHRoaXMuZm9ybS5hcnJpdmFsID0gKG5ld1ZhbHVlICogdGhpcy5jdXJyZW50U2VsZWN0QmxvY2suZmVlKS50b0ZpeGVkKDIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoInJlY2hhcmdlIiwgWyJzZXNzaW9uVG9rZW4iLCAiaHR0cExvYWRpbmciLCAiYnRuTG9hZGluZyIsICJyZWNoYXJnZUFkZHJlc3MiXSksCiAgICBpc0Rpc2FibGVkKCkgewogICAgICByZXR1cm4gZW1wdHlTdHIodGhpcy5mb3JtLmFkZHJlc3MpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygicmVjaGFyZ2UiLCBbInJlcXVlc3RTZXNzaW9uVG9rZW4iLCAicmVxdWVzUmVjaGFyZ2UiLCAicmVxdWVzdFJlY2hhcmdlQWRkcmVzcyJdKSwKICAgIGFzeW5jIGdldEF1dG9GZWUoY29pbikgewogICAgICB2YXIgX3Jlc3AkZGF0YTsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGdldEZlZUFwaShjb2luKTsKICAgICAgaWYgKHJlc3AuY29kZSA9PT0gIjAiICYmIChfcmVzcCRkYXRhID0gcmVzcC5kYXRhKSAhPT0gbnVsbCAmJiBfcmVzcCRkYXRhICE9PSB2b2lkIDAgJiYgX3Jlc3AkZGF0YS5wcmljZSkgewogICAgICAgIHRoaXMuY3VycmVudFNlbGVjdEJsb2NrLmZlZSA9IHJlc3AuZGF0YS5wcmljZTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdEN1cnJlbmN5KHZhbCkgewogICAgICB0aGlzLiRlbWl0KCJzZWxlY3QtY3VycmVuY3kiLCB2YWwpOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBjb3B5KCkgewogICAgICBpZiAoIWVtcHR5U3RyKHRoaXMuZm9ybS5hZGRyZXNzKSkgewogICAgICAgIGNvcHlUZXh0VG9DbGlwYm9hcmQodGhpcy5mb3JtLmFkZHJlc3MpOwogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogdGhpcy4kdCgibWVzc2FnZS5ob21lLnN1Y2Nlc3NUaXBzIiAvKirmiJDlip8gKi8pLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgibWVzc2FnZS5ob21lLmNvcHlTdWNjZXNzIiAvKirmj5DnjrDmiJDlip8gKi8pLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlSW1hZ2UoKSB7CiAgICAgIGNvbnN0ICQkcXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNxckNvZGUgaW1nIik7CiAgICAgIGlmICgkJHFySW1hZ2UpIHsKICAgICAgICBkb3dubG9hZEltYWdlKCQkcXJJbWFnZS5zcmMpOwogICAgICB9CiAgICB9LAogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgibWVzc2FnZS5ob21lLnVwbG9hZGluZyIpLAogICAgICAgIHR5cGU6ICJpbmZvIgogICAgICAgIC8vIGR1cmF0aW9uOjAsCiAgICAgIH0pOwogICAgfSwKICAgIG9uUHJvZ3Jlc3MoKSB7CiAgICAgIC8vIHRoaXMuJG1lc3NhZ2UoewogICAgICAvLyAgICAgbWVzc2FnZTp0aGlzLiR0KCdtZXNzYWdlLmhvbWUudXBsb2FkaW5nJyksCiAgICAgIC8vICAgICB0eXBlOiJpbmZvIiwKICAgICAgLy8gICAgIGR1cmF0aW9uOjAsCiAgICAgIC8vIH0pCiAgICB9LAogICAgb25VcGxvYWRFcnJvcigpIHsKICAgICAgdGhpcy4kbWVzc2FnZS5jbG9zZSgpOwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJtZXNzYWdlLmhvbWUudXBsb2FkRXJyb3IiKSwKICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgIH0pOwogICAgfSwKICAgIG9uU3VjY2VzcyhyZXNwb25zZSkgewogICAgICB0aGlzLmZvcm0uaW1hZ2UgPSByZXNwb25zZS5kYXRhOwogICAgICB0aGlzLiRtZXNzYWdlLmNsb3NlKCk7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIm1lc3NhZ2UuaG9tZS51cGxvYWRTdWNjZXNzIiksCiAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgIH0pOwogICAgfSwKICAgIHJlY2hhcmdlKCkgewogICAgICB0aGlzLiRyZWZzLnJlY2hhcmdlRm9ybS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLnJlcXVlc1JlY2hhcmdlKHsKICAgICAgICAgICAgc2Vzc2lvbl90b2tlbjogdGhpcy5zZXNzaW9uVG9rZW4sCiAgICAgICAgICAgIGFtb3VudDogdGhpcy5mb3JtLnF1YW50aXR5LAogICAgICAgICAgICBmcm9tOiAiMTIzIiwKICAgICAgICAgICAgYmxvY2tjaGFpbl9uYW1lOiB0aGlzLmZvcm0ubmV0d29yaywKICAgICAgICAgICAgaW1nOiB0aGlzLmZvcm0uaW1hZ2UsCiAgICAgICAgICAgIGNvaW46IHRoaXMuY3VycmVudENvaW4sCiAgICAgICAgICAgIGNoYW5uZWxfYWRkcmVzczogdGhpcy5mb3JtLmFkZHJlc3MsCiAgICAgICAgICAgIHR4OiAiMTIzIgogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgibWVzc2FnZS5ob21lLnN1Y2Nlc3NUaXBzIiksCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIm1lc3NhZ2UuaG9tZS53aXRoZHJhd1N1Y2Nlc3MiKSwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapActions","mapGetters","VueQr","copyTextToClipboard","downloadImage","emptyStr","UploadApi","getFeeApi","ES_TOKEN","common","EsRechargeRecordDialog","name","components","props","value","type","Boolean","default","currentCoin","String","data","dialogVisible","rechargeRecordVisible","selected","form","network","address","quantity","arrival","image","rules","ruleUtils","getRule","$t","validator","rule","callback","Number","currentSelectBlock","coinInfo","uploadParams","moduleName","token","localStorage","getItem","watch","val","$emit","requestSessionToken","rechargeAddress","filter","item","coin","length","blockchain_name","_this$$refs$rechargeF","$refs","rechargeForm","resetFields","handler","newValue","oldValue","find","getAutoFee","immediate","fee","toFixed","computed","isDisabled","methods","_resp$data","resp","code","price","selectCurrency","copy","$notify","title","message","saveImage","$$qrImage","document","querySelector","src","beforeUpload","file","$message","onProgress","onUploadError","close","onSuccess","response","recharge","validate","valid","requesRecharge","session_token","sessionToken","amount","from","img","channel_address","tx"],"sources":["src/page/userInfo/dashboard/recharge/recharge-dialog.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    custom-class=\"wallet-dialog\"\r\n    :title=\"$t('message.home.recharge')\"\r\n    :visible.sync=\"dialogVisible\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n  >\r\n    <el-form\r\n      ref=\"rechargeForm\"\r\n      label-position=\"top\"\r\n      :model=\"form\"\r\n      :rules=\"rules\"\r\n      v-loading=\"httpLoading\"\r\n    >\r\n      <div class=\"network-select\">\r\n        <div class=\"right\" @click=\"rechargeRecordVisible = true\">\r\n          {{ $t(\"message.home.records\") }}\r\n        </div>\r\n        <el-form-item\r\n          :label=\"$t('message.home.blockchainNetwork' /**区块链网络 */)\"\r\n          prop=\"network\"\r\n        >\r\n          <el-radio-group v-model=\"form.network\">\r\n            <el-radio-button\r\n              v-for=\"item in coinInfo\"\r\n              :key=\"item.blockchain_name\"\r\n              :label=\"item.blockchain_name\"\r\n            ></el-radio-button>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n      </div>\r\n\r\n      <div class=\"qr-code\">\r\n        <div id=\"qrCode\" class=\"qr-code-wrap flex-center\">\r\n          <VueQr :size=\"132\" :text=\"form.address\" :margin=\"0\" />\r\n        </div>\r\n\r\n        <!-- <img src=\"@/assets/image/qrcode.svg\" alt=\"qrcode\" /> -->\r\n        <el-button @click=\"saveImage\">\r\n          {{ $t(\"message.home.saveQr\" /**保存二維碼 */) }}\r\n        </el-button>\r\n      </div>\r\n\r\n      <el-form-item\r\n        :label=\"$t('message.home.rechargeAddress')\"\r\n        class=\"wallet-address\"\r\n        prop=\"address\"\r\n      >\r\n        <el-input\r\n          v-model=\"form.address\"\r\n          :placeholder=\"$t('message.home.plaseEnterRechargeAddress')\"\r\n        />\r\n        <span\r\n          :class=\"{\r\n            'copy-btn': true,\r\n            disabled: isDisabled,\r\n          }\"\r\n          @click=\"copy\"\r\n        >\r\n          {{ $t(\"message.home.copy\") }}\r\n        </span>\r\n      </el-form-item>\r\n\r\n      <el-form-item :label=\"$t('message.home.quantity')\" prop=\"quantity\">\r\n        <el-input\r\n          v-model=\"form.quantity\"\r\n          maxlength=\"10\"\r\n          :placeholder=\"$t('message.home.pleaseEnterAmount')\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item\r\n        :label=\"`${$t('message.home.expectedArrival')}(${$t(\r\n          'message.home.currentRate'\r\n        )}1:${currentSelectBlock.fee})`\"\r\n      >\r\n        <el-input\r\n          v-model=\"form.arrival\"\r\n          disabled\r\n          :placeholder=\"$t('message.home.expectedArrival')\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item\r\n        :label=\"$t('message.home.uploadTips')\"\r\n        class=\"image-uploader\"\r\n        prop=\"image\"\r\n      >\r\n        <el-upload\r\n          :action=\"UploadApi\"\r\n          :show-file-list=\"false\"\r\n          :on-progress=\"onProgress\"\r\n          :on-error=\"onUploadError\"\r\n          :before-upload=\"beforeUpload\"\r\n          :on-success=\"onSuccess\"\r\n          :data=\"uploadParams\"\r\n        >\r\n          <img v-if=\"form.image\" :src=\"form.image\" class=\"image\" alt=\"image\" />\r\n          <img v-else src=\"@/assets/image/camera.png\" alt=\"camera\" />\r\n        </el-upload>\r\n        <div class=\"label\">{{ $t(\"message.home.clickUpload\") }}</div>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button class=\"submit-btn\" :loading=\"btnLoading\" @click=\"recharge\">\r\n          {{ $t(\"message.home.confirm\") }}\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <EsRechargeRecordDialog v-model=\"rechargeRecordVisible\" />\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n  import { mapActions, mapGetters } from \"vuex\";\r\n  import VueQr from \"vue-qr\";\r\n  import { copyTextToClipboard, downloadImage, emptyStr } from \"@/util\";\r\n  import { UploadApi, getFeeApi } from \"@/api\";\r\n  import { ES_TOKEN } from \"@/common\";\r\n  import common from \"@/util/common\";\r\n  import EsRechargeRecordDialog from \"./rechargeRecordDialog\";\r\n\r\n  export default {\r\n    name: \"recharge-dialog\",\r\n    components: { VueQr, EsRechargeRecordDialog },\r\n    props: {\r\n      value: {\r\n        type: Boolean,\r\n        default: false,\r\n      },\r\n      currentCoin: {\r\n        type: String,\r\n        default: \"\",\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        dialogVisible: this.value || false,\r\n        rechargeRecordVisible: false,\r\n        selected: \"balance\",\r\n        form: {\r\n          network: \"\",\r\n          address: \"\",\r\n          quantity: \"\",\r\n          arrival: \"\",\r\n          image: \"\",\r\n        },\r\n        rules: {\r\n          quantity: [\r\n            common.ruleUtils.getRule(\r\n              \"required\",\r\n              this.$t(\"message.home.pleaseEnterQuantity\")\r\n            ),\r\n            common.ruleUtils.getRule(\"decimalExceedZero\"),\r\n            common.ruleUtils.getRule(\"validator\", \"\", {\r\n              validator: (rule, value, callback) => {\r\n                if (Number(value) > 10e8) {\r\n                  callback(this.$t(\"message.home.validatorMaxNumber\"));\r\n                }\r\n                callback();\r\n              },\r\n            }),\r\n          ],\r\n          image: [\r\n            common.ruleUtils.getRule(\r\n              \"required\",\r\n              this.$t(\"message.home.uploadPhoto\")\r\n            ),\r\n          ],\r\n        },\r\n        currentSelectBlock: {},\r\n        coinInfo: [],\r\n        UploadApi,\r\n        uploadParams: {\r\n          moduleName: \"recharge\",\r\n          token: localStorage.getItem(ES_TOKEN),\r\n        },\r\n      };\r\n    },\r\n    watch: {\r\n      value(val) {\r\n        if (!val) {\r\n          this.form = {\r\n            network: \"\",\r\n            address: \"\",\r\n            quantity: \"\",\r\n            arrival: \"\",\r\n            image: \"\",\r\n          };\r\n        }\r\n        this.dialogVisible = val;\r\n      },\r\n      dialogVisible(val) {\r\n        if (val !== this.value) {\r\n          this.$emit(\"input\", val);\r\n        }\r\n        if (val) {\r\n          this.requestSessionToken();\r\n          const data = this.rechargeAddress.filter(\r\n            (item) => item.coin === this.currentCoin\r\n          );\r\n          if (data && data.length) {\r\n            this.form.network = data[0].blockchain_name;\r\n          }\r\n          this.coinInfo = [...data];\r\n        } else {\r\n          this.$refs.rechargeForm?.resetFields();\r\n        }\r\n      },\r\n      \"form.network\": {\r\n        handler(newValue, oldValue) {\r\n          if (newValue !== oldValue) {\r\n            const data = this.rechargeAddress.find(\r\n              (item) => item.blockchain_name === newValue\r\n            );\r\n            // console.log(data)\r\n            if (data) {\r\n              this.form.address = data.address;\r\n              this.form.quantity = \"\";\r\n              this.form.arrival = 0;\r\n              this.currentSelectBlock = { ...data };\r\n              this.getAutoFee(data.coin);\r\n            }\r\n          }\r\n        },\r\n        immediate: true,\r\n      },\r\n      \"form.quantity\": {\r\n        handler(newValue, oldValue) {\r\n          if (newValue !== oldValue) {\r\n            this.form.arrival = (\r\n              newValue * this.currentSelectBlock.fee\r\n            ).toFixed(2);\r\n          }\r\n        },\r\n      },\r\n    },\r\n    computed: {\r\n      ...mapGetters(\"recharge\", [\r\n        \"sessionToken\",\r\n        \"httpLoading\",\r\n        \"btnLoading\",\r\n        \"rechargeAddress\",\r\n      ]),\r\n      isDisabled() {\r\n        return emptyStr(this.form.address);\r\n      },\r\n    },\r\n    methods: {\r\n      ...mapActions(\"recharge\", [\r\n        \"requestSessionToken\",\r\n        \"requesRecharge\",\r\n        \"requestRechargeAddress\",\r\n      ]),\r\n\r\n      async getAutoFee(coin) {\r\n        const resp = await getFeeApi(coin);\r\n        if (resp.code === \"0\" && resp.data?.price) {\r\n          this.currentSelectBlock.fee = resp.data.price;\r\n        }\r\n      },\r\n\r\n      selectCurrency(val) {\r\n        this.$emit(\"select-currency\", val);\r\n        this.dialogVisible = false;\r\n      },\r\n      copy() {\r\n        if (!emptyStr(this.form.address)) {\r\n          copyTextToClipboard(this.form.address);\r\n          this.$notify({\r\n            title: this.$t(\"message.home.successTips\" /**成功 */),\r\n            message: this.$t(\"message.home.copySuccess\" /**提现成功 */),\r\n            type: \"success\",\r\n          });\r\n        }\r\n      },\r\n      saveImage() {\r\n        const $$qrImage = document.querySelector(\"#qrCode img\");\r\n        if ($$qrImage) {\r\n          downloadImage($$qrImage.src);\r\n        }\r\n      },\r\n      beforeUpload(file) {\r\n        this.$message({\r\n          message: this.$t(\"message.home.uploading\"),\r\n          type: \"info\",\r\n          // duration:0,\r\n        });\r\n      },\r\n      onProgress() {\r\n        // this.$message({\r\n        //     message:this.$t('message.home.uploading'),\r\n        //     type:\"info\",\r\n        //     duration:0,\r\n        // })\r\n      },\r\n      onUploadError() {\r\n        this.$message.close();\r\n        this.$message({\r\n          message: this.$t(\"message.home.uploadError\"),\r\n          type: \"error\",\r\n        });\r\n      },\r\n      onSuccess(response) {\r\n        this.form.image = response.data;\r\n        this.$message.close();\r\n        this.$message({\r\n          message: this.$t(\"message.home.uploadSuccess\"),\r\n          type: \"success\",\r\n        });\r\n      },\r\n      recharge() {\r\n        this.$refs.rechargeForm.validate(async (valid) => {\r\n          if (valid) {\r\n            await this.requesRecharge({\r\n              session_token: this.sessionToken,\r\n              amount: this.form.quantity,\r\n              from: \"123\",\r\n              blockchain_name: this.form.network,\r\n              img: this.form.image,\r\n              coin: this.currentCoin,\r\n              channel_address: this.form.address,\r\n              tx: \"123\",\r\n            });\r\n            this.$notify({\r\n              title: this.$t(\"message.home.successTips\"),\r\n              message: this.$t(\"message.home.withdrawSuccess\"),\r\n              type: \"success\",\r\n            });\r\n            this.$emit(\"input\", false);\r\n          }\r\n        });\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .qr-code-wrap {\r\n    width: 150px;\r\n    height: 150px;\r\n    background-color: var(--color-white);\r\n    border: 1px solid var(--color-border);\r\n  }\r\n\r\n  .right {\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}