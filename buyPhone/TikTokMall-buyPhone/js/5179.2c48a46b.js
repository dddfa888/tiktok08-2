"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[5179],{90894:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAATCAYAAACDW21BAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD3SURBVHgB3ZI9DoJAEEZn4QJaQucNNITE0tLWI3gC4xHsLD2Ona0F4B6BCryCBeBMgdkM2WWRxcKXwA6zP182PIB/R9AriqILDgf4AaItMPSGwwamRXptVVXVvmmaHCaCzsaMnVCbcRwv67qmm87AMRi2kFLmvtosiuIZBMFLCLEFh+B5xyzLrlT7fLIsy3sYhnMs1+AADDslSXL+fOsWOpJIpmm6UhuebuVYiVpJeF+YNo2RqJWE933Tpm8lUiUZFEgMlYhL0pkHSywl6kjC8cCSPol0knCsb0iYJNJJwun9hyo6iUySjAokuER9kjiDJMLnAQN5AwgPjbeTqmD3AAAAAElFTkSuQmCC"},95179:function(t,i,s){s.r(i),s.d(i,{default:function(){return u}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"page-content",staticStyle:{"min-height":"100vh"}},[i("Vcode",{staticStyle:{direction:"ltr"},attrs:{imgs:[t.img1,t.img2,t.img3,t.img4,t.img5],show:t.show,canvasHeight:200,sliderText:t.$t("拖动滑块以完成拼图"),successText:t.$t("验证通过!"),failText:t.$t("验证失败,请重试")},on:{success:t.onSuccess,close:function(i){t.show=!1}}}),i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("邮箱绑定"),"left-arrow":""},on:{"click-left":t.onClickLeft}}),i("div",{staticClass:"h46",staticStyle:{width:"100%"}}),i("div",{staticClass:"form-content"},[i("div",{staticClass:"form-item"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("邮箱")))]),i("div",{staticClass:"input-content"},[i("el-input",{attrs:{placeholder:t.$t("请输入邮箱"),maxlength:"40",clearable:""},model:{value:t.formData.email,callback:function(i){t.$set(t.formData,"email",i)},expression:" formData.email "}})],1)]),i("div",{staticClass:"form-item"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("验证码")))]),i("div",{staticClass:"input-content code"},[i("el-input",{attrs:{placeholder:t.$t("请输入验证码"),maxlength:"6"},model:{value:t.formData.verifcode,callback:function(i){t.$set(t.formData,"verifcode",i)},expression:" formData.verifcode "}}),i("div",{staticClass:"btn",class:{disabled:t.btnDisabled},on:{click:t.getCode}},[t._v(t._s(t.codeBtnTxt))])],1)]),i("div",{staticClass:"submit-btn",on:{click:t.submitVertify}},[t._v(t._s(t.$t("提交")))])])],1)},a=[],n=(s(74884),s(91981)),o=(s(44114),s(94363)),c=s.n(o),l=s(34931),r=s(97797),h={name:"BindEmail",components:{Vcode:c()},data(){return{img1:s(57125),img2:s(29294),img3:s(28791),img4:s(6648),img5:s(44129),triangleDown:s(90894),show:!1,codeBtnTxt:this.$t("收取验证码"),count:60,interval:null,btnDisabled:!1,formData:{email:"",verifcode:""}}},methods:{onClickLeft(){this.$router.push({path:"/Setting",dir:"left"})},onSuccess(){this.submitHandle(),this.show=!1},getCode(){if(""===this.formData.email)return void(0,n.A)(this.$t("请输入邮箱"));{const t=/^([A-Za-z0-9_\-\.\w{3,}])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(!t.test(this.formData.email))return void(0,n.A)(this.$t("邮箱格式有误"))}n.A.loading({duration:0,message:this.$t("发送中"),forbidClick:!0});const t={target:this.formData.email};(0,l.$4)(t).then(()=>{n.A.clear(),n.A.success(this.$t("发送成功")),this.timerFn()}).catch(t=>{n.A.clear()})},timerFn(){this.codeBtnTxt=`${this.$t("再次获取")} ${this.count} s`,this.btnDisabled=!0,this.interval=setInterval(()=>{1===this.count?(this.count=60,this.codeBtnTxt=this.$t("再次获取"),this.btnDisabled=!1,clearInterval(this.interval)):(this.count-=1,this.codeBtnTxt=`${this.$t("再次获取")} ${this.count} s`)},1e3)},submitVertify(){if(""!==this.formData.email){{const t=/^([A-Za-z0-9_\-\.\w{3,}])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(!t.test(this.formData.email))return void(0,n.A)(this.$t("邮箱格式有误"))}""!==this.formData.verifcode?this.show=!0:(0,n.A)(this.$t("请输入验证码"))}else(0,n.A)(this.$t("请输入邮箱"))},submitHandle(){n.A.loading({duration:0,message:this.$t("提交中"),forbidClick:!0});const t={...this.formData};(0,r.uY)(t).then(async()=>{n.A.success(this.$t("绑定成功")),await this.$store.dispatch("getUserInfo"),this.onClickLeft()}).catch(t=>{n.A.clear()})}}},A=h,m=s(81656),d=(0,m.A)(A,e,a,!1,null,"35163b9e",null),u=d.exports}}]);