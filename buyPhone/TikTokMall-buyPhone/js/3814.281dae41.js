"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[3814],{43883:function(t,n,o){o.r(n),o.d(n,{default:function(){return g}});var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"account_cancellation"},[n("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("账号注销"),"left-arrow":""},on:{"click-left":t.onClickLeft}}),n("div",{staticClass:"h46",staticStyle:{width:"100%"}}),n("el-form",{staticClass:"acc_form",attrs:{"label-position":"top","label-width":"80px",model:t.formLabelAlign}},[n("el-form-item",{attrs:{label:t.$t("您的账号")}},[n("el-input",{attrs:{maxlength:"50",disabled:""},model:{value:t.formLabelAlign.account,callback:function(n){t.$set(t.formLabelAlign,"account","string"===typeof n?n.trim():n)},expression:"formLabelAlign.account"}})],1),n("el-form-item",{attrs:{label:t.$t("为什么要离开?")}},[n("el-input",{attrs:{type:"textarea",maxlength:"1000",autosize:{minRows:6,maxRows:8}},model:{value:t.formLabelAlign.reason,callback:function(n){t.$set(t.formLabelAlign,"reason","string"===typeof n?n.trim():n)},expression:"formLabelAlign.reason"}})],1)],1),n("div",{staticClass:"logout",on:{click:t.onLogout}},[t._v(t._s(t.$t("注销账号")))]),n("van-popup",{attrs:{position:"bottom"},model:{value:t.pwtStatus,callback:function(n){t.pwtStatus=n},expression:"pwtStatus"}},[n("enter-Password",{attrs:{isPasswordShow:t.pwtStatus},on:{close:function(n){t.pwtStatus=!1},getPassword:t.getPassword}})],1)],1)},i=[],s=(o(69437),o(46579)),a=(o(93093),o(75187)),l=o(93518),r=o(97797),c=o(10891),u=o(94348),h={components:{EnterPassword:c.A,[a.A.name]:a.A,[s.A.name]:s.A},data(){return{itemName:"TikTokMall",formLabelAlign:{account:"",reason:"",cashPassword:""},pwtStatus:!1}},async created(){const{username:t}=await(0,r.ZW)({});this.formLabelAlign.account=t},computed:{...(0,l.L8)({userInfo:"userInfo"})},methods:{onClickLeft(){this.$router.go(-1)},onLogout(){if(""==this.formLabelAlign.account.trim())return void this.$notify(this.$t("请输入您的账号"),"warning");if(""==this.formLabelAlign.reason.trim())return void this.$notify(this.$t("请输入您的离开原因"),"warning");let t=this.$t("警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。");({NODE_ENV:"production",VUE_APP_FOOTER_COLOR:"#f89900",VUE_APP_ITEM_NAME:"TikTokMall",VUE_APP_MAIN_COLOR:"#f89900",BASE_URL:"./"}).VUE_APP_PUT_ON_SHELVES&&(t=this.$t("警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。")),s.A.alert({title:this.$t("您确认要注销账号吗？"),message:t,messageAlign:"left",showCancelButton:!0,confirmButtonText:this.$t("同意注销"),confirmButtonColor:"#FF0000",cancelButtonText:this.$t("取消"),cancelButtonColor:"#999999"}).then(async()=>{this.$toast.loading();const{money:t}=await(0,r.b5)();if(0!==t)return this.$notify(this.$t("该账号存在可用余额, 不可注销!"),"warning"),void this.$toast.clear();0==this.userInfo.safeword?this.getPassword(null):this.pwtStatus=!0})},async getPassword(t){if(this.formLabelAlign.cashPassword=t,this.$toast.loading(),""==t)return this.$notify(this.$t("请输入密码"),"warning"),void this.$toast.clear();try{await(0,r.Yx)(this.formLabelAlign);this.$toast.clear(),this.$notify(this.$t("注销成功"),"success"),this.$router.replace("/login")}catch(n){u.log("error ::->",n)}}}},f=h,d=o(81656),m=(0,d.A)(f,e,i,!1,null,"e8925214",null),g=m.exports},46579:function(t,n,o){o.d(n,{A:function(){return T}});var e,i=o(51137),s=o(66848),a=o(4250),l=o.n(a),r=o(55685),c=o(33448),u=o(83462),h=o(56374),f=o(20105),d=o(87555),m=o(39504),g=(0,r.Y)("goods-action"),p=g[0],v=g[1],w=p({mixins:[(0,m.G)("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:v({unfit:!this.safeAreaInsetBottom})},[this.slots()])}}),y=o(39763),C=(0,r.Y)("goods-action-button"),A=C[0],B=C[1],b=A({mixins:[(0,m.b)("vanGoodsAction")],props:(0,i.A)({},y.aI,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var t=this.parent&&this.parent.children[this.index-1];return!t||t.$options.name!==this.$options.name},isLast:function(){var t=this.parent&&this.parent.children[this.index+1];return!t||t.$options.name!==this.$options.name}},methods:{onClick:function(t){this.$emit("click",t),(0,y.wE)(this.$router,this)}},render:function(){var t=arguments[0];return t(d.A,{class:B([{first:this.isFirst,last:this.isLast},this.type]),attrs:{size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}}),$=(0,r.Y)("dialog"),k=$[0],x=$[1],S=$[2],L=k({mixins:[(0,f.i)()],props:{title:String,theme:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,overlay:{type:Boolean,default:!0},allowHtml:{type:Boolean,default:!0},transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var n=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,function(o){!1!==o&&n.loading[t]&&n.onClose(t),n.loading.confirm=!1,n.loading.cancel=!1})):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){var t=this;this.$emit("opened"),this.$nextTick(function(){var n;null==(n=t.$refs.dialog)||n.focus()})},onClosed:function(){this.$emit("closed")},onKeydown:function(t){var n=this;if("Escape"===t.key||"Enter"===t.key){if(t.target!==this.$refs.dialog)return;var o={Enter:this.showConfirmButton?function(){return n.handleAction("confirm")}:c.lQ,Escape:this.showCancelButton?function(){return n.handleAction("cancel")}:c.lQ};o[t.key](),this.$emit("keydown",t)}},genRoundButtons:function(){var t=this,n=this.$createElement;return n(w,{class:x("footer")},[this.showCancelButton&&n(b,{attrs:{size:"large",type:"warning",text:this.cancelButtonText||S("cancel"),color:this.cancelButtonColor,loading:this.loading.cancel},class:x("cancel"),on:{click:function(){t.handleAction("cancel")}}}),this.showConfirmButton&&n(b,{attrs:{size:"large",type:"danger",text:this.confirmButtonText||S("confirm"),color:this.confirmButtonColor,loading:this.loading.confirm},class:x("confirm"),on:{click:function(){t.handleAction("confirm")}}})])},genButtons:function(){var t,n=this,o=this.$createElement,e=this.showCancelButton&&this.showConfirmButton;return o("div",{class:[h.Bn,x("footer")]},[this.showCancelButton&&o(d.A,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||S("cancel"),nativeType:"button"},class:x("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){n.handleAction("cancel")}}}),this.showConfirmButton&&o(d.A,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||S("confirm"),nativeType:"button"},class:[x("confirm"),(t={},t[h.TL]=e,t)],style:{color:this.confirmButtonColor},on:{click:function(){n.handleAction("confirm")}}})])},genContent:function(t,n){var o=this.$createElement;if(n)return o("div",{class:x("content")},[n]);var e=this.message,i=this.messageAlign;if(e){var s,a,r={class:x("message",(s={"has-title":t},s[i]=i,s)),domProps:(a={},a[this.allowHtml?"innerHTML":"textContent"]=e,a)};return o("div",{class:x("content",{isolated:!t})},[o("div",l()([{},r]))])}}},render:function(){var t=arguments[0];if(this.shouldRender){var n=this.message,o=this.slots(),e=this.slots("title")||this.title,i=e&&t("div",{class:x("header",{isolated:!n&&!o})},[e]);return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||n,tabIndex:0},class:[x([this.theme]),this.className],style:{width:(0,u._)(this.width)},ref:"dialog",on:{keydown:this.onKeydown}},[i,this.genContent(e,o),"round-button"===this.theme?this.genRoundButtons():this.genButtons()])])}}});function O(t){return document.body.contains(t)}function E(){e&&e.$destroy(),e=new(s["default"].extend(L))({el:document.createElement("div"),propsData:{lazyRender:!1}}),e.$on("input",function(t){e.value=t})}function P(t){return c.S$?Promise.resolve():new Promise(function(n,o){e&&O(e.$el)||E(),(0,i.A)(e,P.currentOptions,t,{resolve:n,reject:o})})}P.defaultOptions={value:!0,title:"",width:"",theme:null,message:"",overlay:!0,className:"",allowHtml:!0,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,callback:function(t){e["confirm"===t?"resolve":"reject"](t)}},P.alert=P,P.confirm=function(t){return P((0,i.A)({showCancelButton:!0},t))},P.close=function(){e&&(e.value=!1)},P.setDefaultOptions=function(t){(0,i.A)(P.currentOptions,t)},P.resetDefaultOptions=function(){P.currentOptions=(0,i.A)({},P.defaultOptions)},P.resetDefaultOptions(),P.install=function(){s["default"].use(L)},P.Component=L,s["default"].prototype.$dialog=P;var T=P},69437:function(t,n,o){o(76952),o(69176),o(98992),o(22795),o(65270),o(45396),o(24976)}}]);