"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[6378],{16443:function(t,i,e){e(76952),e(45396)},22278:function(t,i,e){e(76952)},30531:function(t,i,e){var s=e(46518),o=e(69565),a=e(79306),n=e(28551),r=e(1767),l=e(48646),c=e(19462),u=e(9539),h=e(96395),d=e(30684),m=e(84549),g=!h&&!d("flatMap",function(){}),f=!h&&!g&&m("flatMap",TypeError),v=h||g||f,p=c(function(){var t,i,e=this.iterator,s=this.mapper;while(1){if(i=this.inner)try{if(t=n(o(i.next,i.iterator)),!t.done)return t.value;this.inner=null}catch(a){u(e,"throw",a)}if(t=n(o(this.next,e)),this.done=!!t.done)return;try{this.inner=l(s(t.value,this.counter++),!1)}catch(a){u(e,"throw",a)}}});s({target:"Iterator",proto:!0,real:!0,forced:v},{flatMap:function(t){n(this);try{a(t)}catch(i){u(this,"throw",i)}return f?o(f,this,t):new p(r(this),{mapper:t,inner:null})}})},37302:function(t,i,e){e(76952)},48041:function(t,i,e){e(76952),e(98992),e(22795)},48646:function(t,i,e){var s=e(69565),o=e(28551),a=e(1767),n=e(50851);t.exports=function(t,i){i&&"string"===typeof t||o(t);var e=n(t);return a(o(void 0!==e?s(e,t):t))}},54365:function(t,i,e){e(44114),e(18111),e(7588),e(61701);var s=e(55685),o=e(83462),a=e(48499),n=e(28722),r=e(77965),l=e(96874),c=(0,s.Y)("rate"),u=c[0],h=c[1];function d(t,i,e){return t>=i?"full":t+.5>=i&&e?"half":"void"}i.A=u({mixins:[n.B,r.Y],props:{size:[Number,String],color:String,gutter:[Number,String],readonly:Boolean,disabled:Boolean,allowHalf:Boolean,voidColor:String,iconPrefix:String,disabledColor:String,value:{type:Number,default:0},icon:{type:String,default:"star"},voidIcon:{type:String,default:"star-o"},count:{type:[Number,String],default:5},touchable:{type:Boolean,default:!0}},computed:{list:function(){for(var t=[],i=1;i<=this.count;i++)t.push(d(this.value,i,this.allowHalf));return t},sizeWithUnit:function(){return(0,o._)(this.size)},gutterWithUnit:function(){return(0,o._)(this.gutter)}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{select:function(t){this.disabled||this.readonly||t===this.value||(this.$emit("input",t),this.$emit("change",t))},onTouchStart:function(t){var i=this;if(!this.readonly&&!this.disabled&&this.touchable){this.touchStart(t);var e=this.$refs.items.map(function(t){return t.getBoundingClientRect()}),s=[];e.forEach(function(t,e){i.allowHalf?s.push({score:e+.5,left:t.left},{score:e+1,left:t.left+t.width/2}):s.push({score:e+1,left:t.left})}),this.ranges=s}},onTouchMove:function(t){if(!this.readonly&&!this.disabled&&this.touchable&&(this.touchMove(t),"horizontal"===this.direction)){(0,a.wo)(t);var i=t.touches[0].clientX;this.select(this.getScoreByPosition(i))}},getScoreByPosition:function(t){for(var i=this.ranges.length-1;i>0;i--)if(t>this.ranges[i].left)return this.ranges[i].score;return this.allowHalf?.5:1},genStar:function(t,i){var e,s=this,o=this.$createElement,a=this.icon,n=this.color,r=this.count,c=this.voidIcon,u=this.disabled,d=this.voidColor,m=this.disabledColor,g=i+1,f="full"===t,v="void"===t;return this.gutterWithUnit&&g!==+r&&(e={paddingRight:this.gutterWithUnit}),o("div",{ref:"items",refInFor:!0,key:i,attrs:{role:"radio",tabindex:"0","aria-setsize":r,"aria-posinset":g,"aria-checked":String(!v)},style:e,class:h("item")},[o(l.A,{attrs:{size:this.sizeWithUnit,name:f?a:c,color:u?m:f?n:d,classPrefix:this.iconPrefix,"data-score":g},class:h("icon",{disabled:u,full:f}),on:{click:function(){s.select(g)}}}),this.allowHalf&&o(l.A,{attrs:{size:this.sizeWithUnit,name:v?c:a,color:u?m:v?d:n,classPrefix:this.iconPrefix,"data-score":g-.5},class:h("icon",["half",{disabled:u,full:!v}]),on:{click:function(){s.select(g-.5)}}})])}},render:function(){var t=this,i=arguments[0];return i("div",{class:h({readonly:this.readonly,disabled:this.disabled}),attrs:{tabindex:"0",role:"radiogroup"}},[this.list.map(function(i,e){return t.genStar(i,e)})])}})},60945:function(t,i,e){e.d(i,{Kr:function(){return a},VA:function(){return r},WO:function(){return n},X1:function(){return c},df:function(){return l},lN:function(){return o}});var s=e(63793);const o=t=>(0,s.A)({url:"api/category!tree.action",method:"get",params:t}),a=t=>(0,s.A)({url:"api/sellerGoods!list.action",method:"post",params:t}),n=t=>(0,s.A)({url:"api/seller!list.action",method:"post",params:t}),r=t=>(0,s.A)({url:"api/sellerGoods!recommend_new.action",method:"post",params:t}),l=t=>(0,s.A)({url:"api/banner!bannerList.action",method:"post",params:t}),c=t=>(0,s.A)({url:"api/category!recommend.action",method:"post",params:t})},63212:function(t,i,e){e(76952),e(98992),e(22795)},65315:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAMAAAAocOYLAAAAqFBMVEUAAADk8v/w9P7p8P/d7P/u8v7k7f/k7v/j6v/e6f/s8v/s8v/m7v7j7P/k7//v9P/u8/7t8//m7//m7v/n7//h7f/t9P/t8v/s8v7p8P/o8P/o8P/o7v7m7//i6//m7//l7f/f6f/h+f/n8P7n8P/o8P/j7f/2+P7U2u319/7y9f7c4fHw9P3s7/na3/DV2+709/7f5PPZ3u/u8frv8vvp7fjl6fXm6vbhpV3wAAAAJ3RSTlMABvm/EfV5TCQJ18uYbzbx6+dnZDAc9eDbw7eUkHxfVD8jFLirqH5ZNpboAAABR0lEQVQoz4WSV3bCMBBFxx3c6D1AIEVWcaXtf2exkTzIhJzcP+tKT++MBTozL/p2d3EfXmDE4UIwQghljjU+PuvexiQPWLDvhBiez0gH862v6WiAAiOsHvqJoxvcMFN6OqTkBYW6wrZQs1tZXhh22Mt0XDjzPElyLtQnDY7NcR8DeXKHY9y49h4ePyWKc7ti1T7E2y+tT9sVp24YYOG09Se8IAYYoReV1BUm0h2ANvdL3ug8JYgLIAhCU15VXGr0ndEXQuizpBHAkuhQ2tnuAawf6deSZxkvryfaNp4BuIUql+WJIs9Uh0Xzchw5+0Snkolh7Y0v+pc34/vvlxNK9fz7BNnGgIYt7fa7yX7UVy/MXr16P3TwDorDqvitnQiQw5o9++HYgAf2tvtGhaXCkennvGijmT+x4Rmj534s58IcBaGH9l9+AAwiaYe513xrAAAAAElFTkSuQmCC"},76411:function(t,i,e){e.d(i,{A:function(){return h}});var s=e(55685),o=e(83462),a="van-empty-network-",n={render:function(){var t=arguments[0],i=function(i,e,s){return t("stop",{attrs:{"stop-color":i,offset:e+"%","stop-opacity":s}})};return t("svg",{attrs:{viewBox:"0 0 160 160",xmlns:"http://www.w3.org/2000/svg"}},[t("defs",[t("linearGradient",{attrs:{id:a+"1",x1:"64.022%",y1:"100%",x2:"64.022%",y2:"0%"}},[i("#FFF",0,.5),i("#F2F3F5",100)]),t("linearGradient",{attrs:{id:a+"2",x1:"50%",y1:"0%",x2:"50%",y2:"84.459%"}},[i("#EBEDF0",0),i("#DCDEE0",100,0)]),t("linearGradient",{attrs:{id:a+"3",x1:"100%",y1:"0%",x2:"100%",y2:"100%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("linearGradient",{attrs:{id:a+"4",x1:"100%",y1:"100%",x2:"100%",y2:"0%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("linearGradient",{attrs:{id:a+"5",x1:"0%",y1:"43.982%",x2:"100%",y2:"54.703%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("linearGradient",{attrs:{id:a+"6",x1:"94.535%",y1:"43.837%",x2:"5.465%",y2:"54.948%"}},[i("#EAEDF0",0),i("#DCDEE0",100)]),t("radialGradient",{attrs:{id:a+"7",cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54835 0 .5 -.5)"}},[i("#EBEDF0",0),i("#FFF",100,0)])]),t("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[t("g",{attrs:{opacity:".8"}},[t("path",{attrs:{d:"M0 124V46h20v20h14v58H0z",fill:"url(#"+a+"1)",transform:"matrix(-1 0 0 1 36 7)"}}),t("path",{attrs:{d:"M121 8h22.231v14H152v77.37h-31V8z",fill:"url(#"+a+"1)",transform:"translate(2 7)"}})]),t("path",{attrs:{fill:"url(#"+a+"7)",d:"M0 139h160v21H0z"}}),t("path",{attrs:{d:"M37 18a7 7 0 013 13.326v26.742c0 1.23-.997 2.227-2.227 2.227h-1.546A2.227 2.227 0 0134 58.068V31.326A7 7 0 0137 18z",fill:"url(#"+a+"2)","fill-rule":"nonzero",transform:"translate(43 36)"}}),t("g",{attrs:{opacity:".6","stroke-linecap":"round","stroke-width":"7"}},[t("path",{attrs:{d:"M20.875 11.136a18.868 18.868 0 00-5.284 13.121c0 5.094 2.012 9.718 5.284 13.12",stroke:"url(#"+a+"3)",transform:"translate(43 36)"}}),t("path",{attrs:{d:"M9.849 0C3.756 6.225 0 14.747 0 24.146c0 9.398 3.756 17.92 9.849 24.145",stroke:"url(#"+a+"3)",transform:"translate(43 36)"}}),t("path",{attrs:{d:"M57.625 11.136a18.868 18.868 0 00-5.284 13.121c0 5.094 2.012 9.718 5.284 13.12",stroke:"url(#"+a+"4)",transform:"rotate(-180 76.483 42.257)"}}),t("path",{attrs:{d:"M73.216 0c-6.093 6.225-9.849 14.747-9.849 24.146 0 9.398 3.756 17.92 9.849 24.145",stroke:"url(#"+a+"4)",transform:"rotate(-180 89.791 42.146)"}})]),t("g",{attrs:{transform:"translate(31 105)","fill-rule":"nonzero"}},[t("rect",{attrs:{fill:"url(#"+a+"5)",width:"98",height:"34",rx:"2"}}),t("rect",{attrs:{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.114"}}),t("rect",{attrs:{fill:"url(#"+a+"6)",x:"15",y:"12",width:"18",height:"6",rx:"1.114"}})])])])}},r=(0,s.Y)("empty"),l=r[0],c=r[1],u=["error","search","default"],h=l({props:{imageSize:[Number,String],description:String,image:{type:String,default:"default"}},methods:{genImageContent:function(){var t=this.$createElement,i=this.slots("image");if(i)return i;if("network"===this.image)return t(n);var e=this.image;return-1!==u.indexOf(e)&&(e="https://img01.yzcdn.cn/vant/empty-image-"+e+".png"),t("img",{attrs:{src:e}})},genImage:function(){var t=this.$createElement,i={width:(0,o._)(this.imageSize),height:(0,o._)(this.imageSize)};return t("div",{class:c("image"),style:i},[this.genImageContent()])},genDescription:function(){var t=this.$createElement,i=this.slots("description")||this.description;if(i)return t("p",{class:c("description")},[i])},genBottom:function(){var t=this.$createElement,i=this.slots();if(i)return t("div",{class:c("bottom")},[i])}},render:function(){var t=arguments[0];return t("div",{class:c()},[this.genImage(),this.genDescription(),this.genBottom()])}})},77069:function(t,i,e){e.d(i,{$U:function(){return c},BS:function(){return d},CS:function(){return f},D6:function(){return h},DG:function(){return u},J$:function(){return l},O2:function(){return n},OX:function(){return m},RR:function(){return r},Rv:function(){return g},Tu:function(){return v},a9:function(){return o},bl:function(){return a}});var s=e(63793);const o=t=>(0,s.A)({url:"api/sellerGoods!info.action",method:"post",params:t}),a=t=>(0,s.A)({url:"/api/evaluation!list.action",method:"post",params:t}),n=t=>(0,s.A)({url:"api/seller!info.action",method:"post",params:t}),r=t=>(0,s.A)({url:"api/order!submit.action",method:"post",params:t}),l=t=>(0,s.A)({url:"api/order!pay.action",method:"post",params:t}),c=t=>(0,s.A)({url:"api/order!info.action",method:"post",params:t}),u=t=>(0,s.A)({url:"/seller/version!register.action",method:"post",params:t}),h=t=>(0,s.A)({url:"api/uploadimg!execute.action",method:"post",data:t}),d=t=>(0,s.A)({url:"api/kyc!get.action",method:"post",params:t}),m=t=>(0,s.A)({url:"api/keepGoods!add.action",method:"post",params:t}),g=t=>(0,s.A)({url:"api/keepGoods!del.action",method:"post",params:t}),f=t=>(0,s.A)({url:"api/evaluation!countType.action",method:"post",params:t}),v=t=>(0,s.A)({url:"api/sellerGoods!recommend_like.action",method:"post",params:t})},77965:function(t,i,e){e.d(i,{Y:function(){return s}});var s={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},80932:function(t,i,e){var s=e(4250),o=e.n(s),a=e(55685),n=e(83462),r=e(33448),l=e(72741),c=e(48499),u=e(21465),h=e(90622),d=e(77965),m=(0,a.Y)("stepper"),g=m[0],f=m[1],v=600,p=200;function _(t,i){return String(t)===String(i)}i.A=g({mixins:[d.Y],props:{value:null,theme:String,integer:Boolean,disabled:Boolean,allowEmpty:Boolean,inputWidth:[Number,String],buttonSize:[Number,String],asyncChange:Boolean,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,decimalLength:[Number,String],name:{type:[Number,String],default:""},min:{type:[Number,String],default:1},max:{type:[Number,String],default:1/0},step:{type:[Number,String],default:1},defaultValue:{type:[Number,String],default:1},showPlus:{type:Boolean,default:!0},showMinus:{type:Boolean,default:!0},showInput:{type:Boolean,default:!0},longPress:{type:Boolean,default:!0}},data:function(){var t,i=null!=(t=this.value)?t:this.defaultValue,e=this.format(i);return _(e,this.value)||this.$emit("input",e),{currentValue:e}},computed:{minusDisabled:function(){return this.disabled||this.disableMinus||this.currentValue<=+this.min},plusDisabled:function(){return this.disabled||this.disablePlus||this.currentValue>=+this.max},inputStyle:function(){var t={};return this.inputWidth&&(t.width=(0,n._)(this.inputWidth)),this.buttonSize&&(t.height=(0,n._)(this.buttonSize)),t},buttonStyle:function(){if(this.buttonSize){var t=(0,n._)(this.buttonSize);return{width:t,height:t}}}},watch:{max:"check",min:"check",integer:"check",decimalLength:"check",value:function(t){_(t,this.currentValue)||(this.currentValue=this.format(t))},currentValue:function(t){this.$emit("input",t),this.$emit("change",t,{name:this.name})}},methods:{check:function(){var t=this.format(this.currentValue);_(t,this.currentValue)||(this.currentValue=t)},formatNumber:function(t){return(0,u.ZV)(String(t),!this.integer)},format:function(t){return this.allowEmpty&&""===t||(t=this.formatNumber(t),t=""===t?0:+t,t=(0,h.y)(t)?this.min:t,t=Math.max(Math.min(this.max,t),this.min),(0,r.C8)(this.decimalLength)&&(t=t.toFixed(this.decimalLength))),t},onInput:function(t){var i=t.target.value,e=this.formatNumber(i);if((0,r.C8)(this.decimalLength)&&-1!==e.indexOf(".")){var s=e.split(".");e=s[0]+"."+s[1].slice(0,this.decimalLength)}_(i,e)||(t.target.value=e),e===String(+e)&&(e=+e),this.emitChange(e)},emitChange:function(t){this.asyncChange?(this.$emit("input",t),this.$emit("change",t,{name:this.name})):this.currentValue=t},onChange:function(){var t=this.type;if(this[t+"Disabled"])this.$emit("overlimit",t);else{var i="minus"===t?-this.step:+this.step,e=this.format((0,u.LF)(+this.currentValue,i));this.emitChange(e),this.$emit(t)}},onFocus:function(t){this.disableInput&&this.$refs.input?this.$refs.input.blur():this.$emit("focus",t)},onBlur:function(t){var i=this.format(t.target.value);t.target.value=i,this.emitChange(i),this.$emit("blur",t),(0,l.B)()},longPressStep:function(){var t=this;this.longPressTimer=setTimeout(function(){t.onChange(),t.longPressStep(t.type)},p)},onTouchStart:function(){var t=this;this.longPress&&(clearTimeout(this.longPressTimer),this.isLongPress=!1,this.longPressTimer=setTimeout(function(){t.isLongPress=!0,t.onChange(),t.longPressStep()},v))},onTouchEnd:function(t){this.longPress&&(clearTimeout(this.longPressTimer),this.isLongPress&&(0,c.wo)(t))},onMousedown:function(t){this.disableInput&&t.preventDefault()}},render:function(){var t=this,i=arguments[0],e=function(i){return{on:{click:function(e){e.preventDefault(),t.type=i,t.onChange()},touchstart:function(){t.type=i,t.onTouchStart()},touchend:t.onTouchEnd,touchcancel:t.onTouchEnd}}};return i("div",{class:f([this.theme])},[i("button",o()([{directives:[{name:"show",value:this.showMinus}],attrs:{type:"button"},style:this.buttonStyle,class:f("minus",{disabled:this.minusDisabled})},e("minus")])),i("input",{directives:[{name:"show",value:this.showInput}],ref:"input",attrs:{type:this.integer?"tel":"text",role:"spinbutton",disabled:this.disabled,readonly:this.disableInput,inputmode:this.integer?"numeric":"decimal",placeholder:this.placeholder,"aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.currentValue},class:f("input"),domProps:{value:this.currentValue},style:this.inputStyle,on:{input:this.onInput,focus:this.onFocus,blur:this.onBlur,mousedown:this.onMousedown}}),i("button",o()([{directives:[{name:"show",value:this.showPlus}],attrs:{type:"button"},style:this.buttonStyle,class:f("plus",{disabled:this.plusDisabled})},e("plus")]))])}})},82653:function(t,i,e){e.r(i),e.d(i,{default:function(){return x}});var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"CommodityDetails"},[i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("详情"),"left-arrow":""},on:{"click-left":t.onClickLeft}},[i("div",{staticClass:"tab-wrap",attrs:{slot:"title"},slot:"title"},[i("van-tabs",{attrs:{"line-height":t.langIsAr?0:"3px"},on:{change:t.handleTabsChange},model:{value:t.tab_index,callback:function(i){t.tab_index=i},expression:"tab_index"}},t._l(t.tab_nav_list,function(t,e){return i("van-tab",{key:e,attrs:{title:t}})}),1)],1)]),i("div",{staticStyle:{width:"100%",height:"46px"},attrs:{id:"product"}}),i("div",{staticClass:"banner-product"},[i("van-swipe",{ref:"swiperRef",staticStyle:{direction:"ltr"},attrs:{autoplay:t.swiperWaitTime},on:{change:t.handleChangeSwiper},scopedSlots:t._u([{key:"indicator",fn:function(){return[i("ul",{staticClass:"indicators indicator"},t._l(t.imageList,function(e,s){return i("li",{key:s,class:{active:t.checkActive(s)}})}),0)]},proxy:!0}])},t._l(t.imageList,function(e,s){return i("van-swipe-item",{key:s,staticClass:"swipe-item"},[i("img",{staticClass:"img",attrs:{src:e},on:{click:function(i){return t.ImagePreview({images:t.imageList,startPosition:s})}}})])}),1)],1),i("div",{staticClass:"product-info-wrap"},[i("div",{staticClass:"product-name"},[t._v(t._s(t.goods_info.name))]),i("div",{staticClass:"price-box"},[i("div",{staticClass:"product-price"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("单价")))]),i("span",{staticClass:"money"},[t._v(" $"+t._s(t.priceFormat(t.goods_info.discountPrice)?t.priceFormat(t.goods_info.discountPrice):t.priceFormat(t.goods_info.sellingPrice))+" ")])]),t.originalPrice?i("div",{staticClass:"product-sellingPrice"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("原价")))]),i("span",{staticClass:"money"},[t._v("$"+t._s(t.priceFormat(t.originalPrice)))])]):t._e(),i("div",{staticClass:"product-sold"},[t._v(t._s(t.$t("销量"))+" "+t._s(t.priceFormatInt(t.goods_info.soldNum)))])]),t.goods_info?.canSelectAttributes?.goodAttrs.length?i("div",{staticClass:"sku_box"},[i("div",{staticClass:"attributes_box"},t._l(t.goods_info?.canSelectAttributes?.goodAttrs,function(e,s){return i("div",{key:s,staticClass:"attributes"},[e?.attrName?i("div",{staticClass:"p_title"},[t._v(t._s(t.currentSkuTitle[s]))]):t._e(),e?.attrName?i("ul",t._l(e.attrValues,function(e,o){return i("li",{key:o,class:[e.attrValueId==t.activeAttrs[s]&&"active",e?.icon&&"img_box",e.disabled&&"disabled"],on:{click:function(i){return t.handleToggle(e,s,e.disabled)}}},[e?.icon?i("img",{attrs:{src:e.iconImg,alt:""}}):i("span",[t._v(t._s(e.attrValueName))])])}),0):t._e()])}),0)]):t._e(),i("div",{staticClass:"product-line-item"},[i("div",{staticClass:"left"},[t._v(t._s(t.$t("发货")))]),i("div",{staticClass:"right"},[t._v(" "+t._s(t.$t("商品下单后，24小时内发货。如下单存在物流管控，订单可能被延时发货，请留意订单物流信息或联系客服"))+" ")])]),i("div",{staticClass:"product-line-item"},[i("div",{staticClass:"left"},[t._v(t._s(t.$t("运费")))]),i("div",{staticClass:"right",on:{click:function(i){t.isShippingShow=!0}}},[t._v(" "+t._s(0==t.goods_info.freightAmount?t.$t("免运费"):`$${t.goods_info.freightAmount?t.priceFormat(t.goods_info.freightAmount):"0.00"}`)+" "),i("div",{staticClass:"right-icon image_reversed"})])]),i("div",{staticClass:"product-line-item"},[i("div",{staticClass:"left"},[t._v(t._s(t.$t("税费")))]),i("div",{staticClass:"right",on:{click:function(i){t.isShippingShow=!0}}},[t._v("$"+t._s(t.goods_info.goodsTax?t.priceFormat(t.goods_info.goodsTax):"0.00"))])]),i("div",{attrs:{id:"Evaluation"}}),i("div",{staticClass:"product-line-item"},[i("div",{staticClass:"left"},[t._v(t._s(t.$t("已选数量")))]),i("div",{staticClass:"right"},[i("van-stepper",{attrs:{"disable-input":!0,max:t.maxBuyNum,integer:""},model:{value:t.bugNum,callback:function(i){t.bugNum=i},expression:"bugNum"}})],1)])]),i("div",{staticClass:"Evaluation"},[i("div",{staticClass:"nav-item",on:{click:t.jumpAllReviews}},["Inchoi"!=t.itemName?i("div",{staticClass:"left"},[t._v(" "+t._s(t.$t("用户评价"))+"("+t._s(t.evaluationNum>99?"99+":t.evaluationNum)+") ")]):i("div",{staticClass:"left"},[t._v(t._s(t.$t("用户评价")))]),t._m(0)]),i("div",{staticClass:"sort"},[i("span",{class:[t.isEn&&"en_span",-2===t.sort_index&&"active"],on:{click:function(i){t.sort_index=-2}}},[t._v(" "+t._s(t.$t("有图"))+" ("+t._s(t.havePicture>99?"99+":t.havePicture)+") ")]),i("span",{class:[t.isEn&&"en_span",1===t.sort_index&&"active"],on:{click:function(i){t.sort_index=1}}},[t._v(" "+t._s(t.$t("好评"))+" ("+t._s(t.positiveComments>99?"99+":t.positiveComments)+") ")]),i("span",{class:[t.isEn&&"en_span",2===t.sort_index&&"active"],on:{click:function(i){t.sort_index=2}}},[t._v(" "+t._s(t.$t("中评"))+" ("+t._s(t.mediumReview>99?"99+":t.mediumReview)+") ")]),i("span",{class:[t.isEn&&"en_span",3===t.sort_index&&"active"],on:{click:function(i){t.sort_index=3}}},[t._v(" "+t._s(t.$t("差评"))+" ("+t._s(t.negativeComment>99?"99+":t.negativeComment)+") ")])]),i("div",{staticClass:"reviews-list"},[t._l(t.EvaluationInfo,function(s,o){return i("div",{key:o,staticClass:"sheet-item"},[i("div",{staticClass:"top"},[i("img",{staticClass:"img",attrs:{src:e(96485)(`./${s.avatar}.png`)}}),i("div",{staticClass:"name-title"},[t._v(" "+t._s(s.userName)+" ")])]),i("div",{staticClass:"mid"},[i("van-rate",{staticClass:"rate-wrap",attrs:{"allow-half":"",size:15,color:t.mainColor,"void-icon":"star","void-color":"#eee",readonly:""},model:{value:s.rating,callback:function(i){t.$set(s,"rating",i)},expression:"item.rating"}}),i("span",[t._v(t._s(t.$t("订单已完成")))])],1),i("p",{staticClass:"reviews"},[t._v(t._s(s.content||t.$t("用户未发表评论")))]),i("div",{staticClass:"comment_image"},t._l(s.images,function(e,o){return i("div",{key:o},[e?i("img",{attrs:{src:e,alt:""},on:{click:function(i){return t.ImagePreview({images:s.images,startPosition:o})}}}):t._e()])}),0),i("div",{staticClass:"btm_date"},[s?.countryName&&!["Inchoi","GreenMall"].includes(t.itemName)?i("span",[t._v(" "+t._s(s.countryName)+" >> ")]):t._e(),i("span",[t._v(" "+t._s(s.evaluationTime?t.formatZoneDate(s.evaluationTime):t.formatZoneDate(s.createTime))+" ")])])])}),0==t.EvaluationInfo.length?i("van-empty",{attrs:{description:t.$t("暂无数据")}}):t._e()],2),i("div",{staticClass:"centent"},[t._v(t._s(t.EvaluationInfo.content))])]),i("div",{staticClass:"details-wrap"},[i("div",{staticClass:"shop-wrap"},[i("div",{staticClass:"shop-info"},[i("div",{staticClass:"left"},[i("div",{staticClass:"shop-logo"},[i("img",{attrs:{src:t.SellerInfo.avatar}})]),i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[t._v(" "+t._s(t.SellerInfo.name?.length>27?t.SellerInfo.name.slice(0,27)+"...":t.SellerInfo.name)+" ")]),i("div",{staticClass:"title"},[t._v(t._s(t.$t("好评率"))+": "+t._s(Math.floor(100*t.SellerInfo.highOpinion)||100)+"%")])])]),i("div",{staticClass:"right",on:{click:t.jumpShop}},[t._v(t._s(t.$t("访问商店")))])]),i("div",{staticClass:"shop-bottom"},[i("div",{staticClass:"item"},[i("div",{staticClass:"text"},[t._v(t._s(t.goods_info.seller?t.goods_info.seller.sellerGoodsNum:100))]),i("div",{staticClass:"title"},[t._v(t._s(t.$t("所有产品")))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"text"},[t._v(t._s((+t.goods_info.seller?.fake||0)+(+t.goods_info.seller?.focusNum||0)))]),i("div",{staticClass:"title"},[t._v(t._s(t.$t("关注")))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"text"},[t._v(t._s((+t.goods_info.seller?.soldNum||0)+(+t.goods_info.seller?.fakeSoldNum||0)))]),i("div",{staticClass:"title"},[t._v(t._s(t.$t("销售量")))])])])]),t.recommendedGoods?.length?i("div",{staticClass:"recommended_product"},[i("div",{staticClass:"rd_title"},[t._v(t._s(t.$t("推荐商品")))]),i("ul",t._l(t.recommendedGoods,function(e,s){return i("li",{key:s,on:{click:function(i){return t.getSellerGoodsInfo(e.id)}}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:e.imgUrl1||t.$defaultGoodsImage,alt:""}})]),i("div",{staticClass:"rd_right"},[i("span",{staticClass:"nowrap2"},[t._v(t._s(t.$textOmit(e.name,26)))]),i("span",[t._v("$"+t._s(t.priceFormat(e?.discountPrice||e.sellingPrice)))])])])}),0)]):t._e(),i("div",{staticClass:"shop-description-title",attrs:{id:"details"}},[t._v(t._s(t.$t("产品描述")))]),i("div",{staticClass:"shop-description-text",domProps:{innerHTML:t._s(t.goods_info.des)},on:{click:function(i){t.isshow=!0}}}),i("div",{staticClass:"details-centent",domProps:{innerHTML:t._s(t.goods_info.imgDes)}}),t.goods_info.des||t.goods_info.imgDes?t._e():i("van-empty",{attrs:{description:t.$t("暂无数据")}}),t.likeGoods?.length?i("div",{staticClass:"may_like"},[i("div",{staticClass:"ml_title"},[t._v(t._s(t.$t("猜你喜欢")))]),i("div",{staticClass:"ml_list"},t._l(t.likeGoods,function(e,s){return i("div",{key:s,staticClass:"list-item commodity",on:{click:function(i){return t.getSellerGoodsInfo(e.id)}}},[i("div",{staticClass:"commodity-img"},[i("img",{attrs:{src:e.imgUrl1||t.$defaultGoodsImage,alt:""}})]),i("div",{staticClass:"money padd-15"},[t._v("$"+t._s(t.priceFormat(e.discountPrice||e.sellingPrice)))]),i("div",{staticClass:"text padd-15"},[t._v(t._s(t.$t("销量"))+" "+t._s(t.priceFormatInt(e.soldNum)))]),i("div",{staticClass:"titlename padd-15 nowrap2"},[t._v(t._s(t.$textOmit(e.name)))])])}),0)]):t._e()],1),i("div",{staticClass:"buy-bottom-fiexd"},[i("div",{staticClass:"fiexd-left"},[i("div",{staticClass:"item",on:{click:t.addKeepGoods}},[i("div",{staticClass:"icon",class:[1==t.goods_info.isKeep?"collect-check-icon":"collect-icon"]}),i("div",{staticClass:"text"},[t._v(t._s(t.$t(t.collectTitle)))])]),i("div",{staticClass:"item",on:{click:function(i){return t.openCustomer()}}},[i("div",{staticClass:"icon kefu-icon"}),i("div",{staticClass:"text"},[t._v(t._s("FamilyMart"==t.itemName?t.$t("联系商家"):t.$t("客服")))])]),i("div",{staticClass:"item",on:{click:function(i){t.isCard=t.productPropertiesShow=!0}}},[i("div",{staticClass:"icon gouwuc-icon"},[t.$ls.get("productList")?i("div",{staticClass:"tips"},[t._v(t._s(t.$ls.get("productList").length))]):t._e()]),i("div",{staticClass:"text"},[t._v(t._s(t.$t("购物车")))])])]),i("div",{staticClass:"fiexd-right",on:{click:function(i){t.productPropertiesShow=!0,t.isCard=!1}}},[i("p",[t._v(" $"+t._s(t.priceFormat(t.$operation(t.goods_info.discountPrice,t.bugNum,"times"))||t.priceFormat(t.$operation(t.goods_info.sellingPrice,t.bugNum,"times")))+" ")]),i("p",[t._v(t._s(t.$t("立即购买")))])])]),i("van-popup",{style:{height:"35%"},attrs:{closeable:"",position:"bottom"},model:{value:t.isShippingShow,callback:function(i){t.isShippingShow=i},expression:"isShippingShow"}},[i("div",{staticClass:"pop-header-title"},[t._v(t._s(t.$t("运费说明")))]),i("div",{staticClass:"centent-wrap"},[i("p",[t._v(t._s(t.$t("1、跨境商品运费构成：运费=派送费+长途运费+送货费;")))]),i("p",[t._v(t._s(t.$t("2、如不满足包邮条件，按实际收取运费产品")))]),i("p",[t._v(t._s(t.$t("3、最终解释权归平台所有；")))])])]),i("transition",{attrs:{name:"fade"}},[i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isShowTopBtn,expression:"isShowTopBtn"}],staticClass:"to_top",attrs:{"class-prefix":"icon",name:"huidaodingbu"},on:{click:function(i){return t.toTop(0)}}})],1),i("van-popup",{style:{height:"40%"},attrs:{round:"",position:"bottom",closeable:""},model:{value:t.cardShow,callback:function(i){t.cardShow=i},expression:"cardShow"}},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("添加购物车")))]),i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"left"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.imageList[0]}})]),i("div",{staticClass:"goods_info"},[i("div",{staticClass:"name"},[t._v(" "+t._s(t.goods_info.name?.length>27?t.goods_info.name.slice(0,27)+"...":t.goods_info.name)+" ")]),i("div",{staticClass:"money"},[t._v("$"+t._s(t.priceFormat(t.goods_info.discountPrice)||t.priceFormat(t.goods_info.sellingPrice)))])])]),i("div",{staticClass:"right"},[i("van-stepper",{attrs:{"disable-input":!0,max:t.maxBuyNum,integer:""},model:{value:t.bugNum,callback:function(i){t.bugNum=i},expression:"bugNum"}})],1)]),i("div",{staticClass:"card-but"},[i("van-button",{staticClass:"but",attrs:{type:"primary",block:""},on:{click:t.addCart}},[t._v(" "+t._s(t.$t("确定"))+" ")])],1)]),i("van-popup",{staticClass:"product_properties",attrs:{position:"bottom",closeable:"",round:""},model:{value:t.productPropertiesShow,callback:function(i){t.productPropertiesShow=i},expression:"productPropertiesShow"}},[t.isCard?i("div",{staticClass:"cart_title"},[t._v(t._s(t.$t("添加购物车")))]):t._e(),i("div",{staticClass:"p_top"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.currentCoverImg||t.goods_info.imgUrl1||t.$defaultGoodsImage,alt:""},on:{click:function(i){return t.ImagePreview([t.currentCoverImg||t.goods_info.imgUrl1])}}})]),i("div",{staticClass:"t_right"},[i("span",{staticClass:"price"},[t._v(" $"+t._s(t.priceFormat(t.$operation(t.goods_info.discountPrice,t.bugNum,"times"))||t.priceFormat(t.$operation(t.goods_info.sellingPrice,t.bugNum,"times")))+" ")]),i("div",{staticClass:"num_box"},[i("div",[t._v(" "+t._s(t.$t("已选"))+": "),t._l(t.currentSkuTitle,function(e){return i("span",{key:e},[t._v(t._s(e))])})],2),i("span",[t._v(t._s(t.$t("数量"))+": ×"+t._s(t.bugNum))])])])]),i("div",{staticClass:"attributes_box"},[t._l(t.goods_info?.canSelectAttributes?.goodAttrs,function(e,s){return i("div",{key:s,staticClass:"attributes"},[e?.attrName?i("div",{staticClass:"p_title"},[t._v(t._s(t.currentSkuTitle[s]))]):t._e(),e?.attrName?i("ul",t._l(e.attrValues,function(e,o){return i("li",{key:o,class:[e.attrValueId==t.activeAttrs[s]&&"active",e?.icon&&"img_box",e.disabled&&"disabled"],on:{click:function(i){return t.handleToggle(e,s,e.disabled)}}},[e?.icon?i("img",{attrs:{src:e.iconImg,alt:""}}):i("span",[t._v(t._s(e.attrValueName))])])}),0):t._e()])}),i("div",{staticClass:"count_box"},[i("span",[t._v(t._s(t.$t("数量"))+":")]),i("van-stepper",{attrs:{"disable-input":!0,max:t.maxBuyNum,integer:""},model:{value:t.bugNum,callback:function(i){t.bugNum=i},expression:"bugNum"}})],1)],2),i("div",{staticClass:"sure"},[i("van-button",{staticClass:"btn",attrs:{disabled:t.btnDisabled,type:"primary",block:""},on:{click:t.handleSubmit}},[t._v(" "+t._s(t.$t("确定"))+" ")])],1)]),i("Footer"),t.isLoading?i("div",{staticClass:"loading_box"},[i("van-loading",{attrs:{"text-color":"#0094ff"}})],1):t._e()],1)},o=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"right"},[i("div",{staticClass:"right-icon image_reversed"})])}],a=(e(69437),e(46579)),n=(e(74884),e(91981)),r=(e(63212),e(96874)),l=(e(48041),e(54365)),c=(e(22278),e(80932)),u=(e(93093),e(75187)),h=(e(83239),e(36749)),d=(e(36933),e(77235)),m=(e(64258),e(31864)),g=(e(1751),e(29689)),f=(e(96356),e(162)),v=(e(16443),e(90689)),p=(e(37302),e(76411)),_=(e(90247),e(85432)),b=(e(44114),e(18111),e(22489),e(30531),e(7588),e(61701),e(18237),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(77069)),C=(e(60945),e(23808)),S=e(66290),y=e(94348),$={data(){return{formatZoneDate:C.Q9,priceFormatInt:C.Ag,itemName:"TikTokMall",mainColor:"#f89900",sort_index:"",goods_info:{},tab_nav_list:[this.$t("商品"),this.$t("评价"),this.$t("详情")],tab_index:0,swiperWaitTime:5e3,imageList:[],isShippingShow:!1,isShowTopBtn:!1,EvaluationInfo:[],SellerInfo:{},sellerGoodsId:"",cartNum:0,bugNum:1,evaluationNum:0,collectTitle:"",cardShow:!1,isCard:!1,attributesIndex:[],Token:"",isWatch:!0,productPropertiesShow:!1,activeAttrs:[],allSkus:[],currentSkuTitle:[],currentSkuId:"-1",attrsIdSkuId:[],defaultSku:[],defaultAvatar:e(65315),ImagePreview:_.A,isLoading:!1,isEn:"en"==(0,C.c7)("lang"),havePicture:"0",mediumReview:"0",negativeComment:"0",positiveComments:"0",recommendedGoods:[],likeGoods:[],currentCoverImg:"",defaultImageList:[],btnDisabled:!0,originalPrice:0,maxBuyNum:localStorage.getItem("maxBuyNum")||500}},computed:{langIsAr(){return"ar"==localStorage.getItem("lang")}},components:{Footer:S.A,[_.A.name]:_.A,[p.A.name]:p.A,[v.A.name]:v.A,[f.A.name]:f.A,[g.A.name]:g.A,[m.A.name]:m.A,[d.A.name]:d.A,[h.A.name]:h.A,[u.A.name]:u.A,[c.A.name]:c.A,[l.A.name]:l.A,[r.A.name]:r.A,[n.A.name]:n.A,[a.A.Component.name]:a.A.Component},created(){setTimeout(()=>{window.scrollTo(0,0)},50);let t=this.$route.query?.lang;if(t){switch(t){case"zh-CN":t="cn";break;case"zh-TW":case"CN":t="tw";break;case"en-US":t="en";break;default:t="en";break}sessionStorage.setItem("backPath","/"),t!==localStorage.getItem("lang")&&(localStorage.setItem("lang",t),location.reload())}if(this.sellerGoodsId=this.$route.query.sellerGoodsId,this.sellerGoodsId&&(this.getSellerGoodsInfo(),this.getEvaluationList()),this.$ls.get("productList")){let t=this.$ls.get("productList");this.cartNum=t.reduce(function(t,i){return t+i.count},0)}this.$ls.on("productList",t=>{t.length>0&&(this.cartNum=t.reduce(function(t,i){return t+i.count},0))}),(0,b.CS)({goodId:this.$route.query.sellerGoodsId}).then(t=>{const{havePicture:i,mediumReview:e,negativeComment:s,positiveComments:o}=t;this.havePicture=i,this.mediumReview=e,this.negativeComment=s,this.positiveComments=o}),this.Token=localStorage.getItem("item")},mounted(){window.addEventListener("scroll",this.handleScroll)},methods:{async requestRecommendedProduct(){const t={sellerId:this.SellerInfo?.id,pageNum:1};this.likeGoods=await(0,b.Tu)({...t,pageSize:4,type:1}),this.recommendedGoods=await(0,b.Tu)({...t,pageSize:8,type:2})},handleTabsChange(t){this.tab_index=t,this.toTop(t)},handleToggle(t,i,e,s){if(e)return;const o=new Set,a=this.goods_info?.canSelectAttributes?.goodAttrs,n=JSON.parse(JSON.stringify(this.activeAttrs));a.length===this.activeAttrs.length&&a.forEach((e,s)=>{s!=i&&e.attrValues.forEach((e,a)=>{e.attrValueId!==t.attrValueId&&(n[s]=e.attrValueId,this.getSkusAndPrice(!0,n)||(o.add(e.attrValueId),this.$set(this.activeAttrs,i,t.attrValueId)))})}),this.allSkus.flatMap(t=>t.attrs).filter(i=>i.hidden&&i.attrValueId!==t.attrValueId).forEach(t=>o.add(t.attrValueId)),a.forEach(t=>{t.attrValues.forEach(t=>{t.disabled=o.has(t.attrValueId)})}),this.$set(this.activeAttrs,i,t.attrValueId),this.getSkusAndPrice(),o.clear(),this.$forceUpdate(),!s&&this.handleToggle(t,i,e,!0)},getSkusAndPrice(t,i){let e={};this.allSkus.forEach(t=>{const i=t.attrs.map(t=>t.attrValueId).join(",");e[i]||(e[i]={title:t.attrs.map(t=>t.attrName&&t.attrValueName?`${t.attrName}: ${t.attrValueName}`:""),coverImg:t.coverImg,discountPrice:t.discountPrice,sellingPrice:t.sellingPrice,skuId:t.skuId,img:t?.img||this.defaultImageList,hidden:t.hidden,price:t.price})});const s=t?i.join(","):this.activeAttrs.join(",");if(!e[s]||t)return 0===Object.keys(e).length?this.btnDisabled=!1:this.btnDisabled=!0,e[s];this.currentSkuTitle=e[s].title,this.goods_info.discountPrice=e[s].discountPrice||e[s].sellingPrice,this.currentSkuId=e[s].skuId,this.currentCoverImg=e[s].coverImg,this.imageList=e[s].img,this.btnDisabled=!1,this.originalPrice=e[s].discountPrice?e[s].price:0},handleSubmit(){this.getSkusAndPrice(),this.isCard?this.addCart():this.openPay()},handleScroll(){if(this.isShowTopBtn=(document.documentElement.scrollTop||document.body.scrollTop)>500,!this.isWatch)return;let t=this.$el.querySelector("#Evaluation").offsetTop-50,i=this.$el.querySelector("#details").offsetTop-50,e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;e<=t?this.tab_index=0:e>=t&&e<=i?this.tab_index=1:e>=i&&(this.tab_index=2)},priceFormat(t){return(0,C.XV)(t)},addCart(){if((0,C.W5)()){if(0==this.goods_info?.isShelf)return void this.$notifyWarn(this.$t("该商品已下架"));this.productPropertiesShow=this.cardShow=!1;let i=[];if("{}"==JSON.stringify(this.goods_info))return void y.log("商品数据有误,无法添加");if(this.goods_info.count=this.bugNum,this.goods_info.skuId=this.currentSkuId,this.goods_info.coverImg=this.currentCoverImg,this.goods_info.tempId=(new Date).getTime(),this.$ls.get("productList")){i=this.$ls.get("productList")||[];let e=!0;try{i.forEach(t=>{if(t.id==this.goods_info.id&&t.skuId==this.goods_info.skuId)throw t.count+=this.bugNum,this.cartNum+=this.bugNum,this.$notify(this.$t("购物车添加成功"),"success"),e=!1,"跳出添加"})}catch(t){this.$ls.set("productList",i),this.$ls.remove("cartList")}if(e){if(""==this.goods_info.storeName)return this.$notify(this.$t("购物车添加失败, 请返回重试"));i.push(this.goods_info),this.$ls.set("productList",i),this.cartNum=i.reduce(function(t,i){return t+i.count},0),this.$notify(this.$t("购物车添加成功"),"success"),this.$ls.remove("cartList")}}else{if(""==this.goods_info.storeName)return this.$notify(this.$t("购物车添加失败, 请返回重试"));i.push(this.goods_info),this.$ls.set("productList",i),this.cartNum=i.reduce(function(t,i){return t+i.count},0),this.$notify(this.$t("购物车添加成功"),"success"),this.$ls.remove("cartList")}}else this.productPropertiesShow=this.cardShow=!1,this.$notifyWarn(this.$t("请先登录")),this.$router.push("/login")},getSellerGoodsInfo(t){this.collectTitle=this.$t("收藏"),this.$toast.loading(),t&&(this.activeAttrs=[],this.allSkus=[],this.goods_info={},this.imageList=this.defaultImageList=[],scrollTo({top:0,left:0,behavior:"smooth"}));let i={sellerGoodsId:t||this.sellerGoodsId,skuId:this.$route.query?.skuId||null};(0,b.a9)(i).then(t=>{if(this.$nextTick(()=>{this.goods_info=t,this.getSkusAndPrice()}),t.canSelectAttributes?.goodAttrs?.length){t.canSelectAttributes.goodAttrs.forEach(t=>{this.activeAttrs.push(t.attrValues[0].attrValueId)}),this.allSkus=t.canSelectAttributes.skus;const i=t.canSelectAttributes.goodAttrs.map(t=>t.attrId);this.allSkus.forEach(t=>{t.attrs=t.attrs.sort((t,e)=>i.indexOf(t.attrId)-i.indexOf(e.attrId))})}for(let i=0;i<10;i++)t[`imgUrl${i+1}`]&&this.defaultImageList.push(t[`imgUrl${i+1}`]);this.imageList.length||(this.imageList=this.defaultImageList),this.getSellerInfo(t.seller.id),1==this.goods_info.isKeep?this.collectTitle=this.$t("已收藏"):this.collectTitle=this.$t("收藏"),t.canSelectAttributes?.goodAttrs||t.discountPrice&&(this.originalPrice=t.sellingPrice),this.$toast.clear()})},getEvaluationList(){let t={sellerGoodsId:this.sellerGoodsId,pageNum:1,pageSize:1,evaluationType:this.sort_index};(0,b.bl)(t).then(t=>{t.pageList.length>0?(this.EvaluationInfo=t.pageList.slice(0,5),this.EvaluationInfo=this.EvaluationInfo.map(t=>{const i=[t.imgUrl1,t.imgUrl2,t.imgUrl3,t.imgUrl4,t.imgUrl5,t.imgUrl6,t.imgUrl7,t.imgUrl8,t.imgUrl9];return{...t,avatar:t.avatar||Math.floor(20*Math.random()),images:i.filter(t=>!!t)}}),this.evaluationNum=t.evaluationNum):this.EvaluationInfo=[]})},addKeepGoods(){if(!(0,C.W5)())return this.$notifyWarn(this.$t("请先登录")),void this.$router.push("/login");if(1==this.goods_info.isKeep){let t={sellerGoodsId:this.sellerGoodsId};(0,b.Rv)(t).then(()=>{this.collectTitle=this.$t("收藏"),this.goods_info.isKeep=0,(0,n.A)(this.$t("取消成功"))})}else{let t={sellerGoodsId:this.sellerGoodsId};(0,b.OX)(t).then(()=>{this.collectTitle=this.$t("已收藏"),this.goods_info.isKeep=1,(0,n.A)(this.$t("收藏成功"))})}},jumpAllReviews(){this.$router.push({path:"/allReviews",query:{sellerGoodsId:this.sellerGoodsId}})},getSellerInfo(t){let i={sellerId:t};(0,b.O2)(i).then(t=>{this.SellerInfo=t,this.goods_info.storeName=t.name,this.isLoading=!1,(0,C.W5)()&&this.requestRecommendedProduct()}).catch(t=>{y.log("err ::->",t),this.isLoading=!1})},checkActive(t){return t===this.current},handleChangeSwiper(t){this.current=t},onClickLeft(){const t=sessionStorage.getItem("backPath");t?(this.$router.replace("/"),sessionStorage.removeItem("backPath")):this.$router.go(-1)},toTop(t){this.isWatch=!1,setTimeout(()=>this.isWatch=!0,1e3),this.tab_index=t,0===t?this.$el.querySelector("#product").scrollIntoView({block:"start",behavior:"smooth"}):1===t?this.$el.querySelector("#Evaluation").scrollIntoView({block:"start",behavior:"smooth"}):this.$el.querySelector("#details").scrollIntoView({block:"start",behavior:"smooth"})},jumpShop(){sessionStorage.removeItem("shopState"),this.$router.push(`/shop?sellerId=${this.SellerInfo.id}&index=0`)},openPay(){if(!(0,C.W5)())return this.productPropertiesShow=!1,this.$notifyWarn(this.$t("请先登录")),void this.$router.push("/login");0!=this.goods_info?.isShelf?(localStorage.setItem("sellerId",this.goods_info.sellerId),localStorage.setItem("storeName",this.goods_info.storeName),this.goods_info.tempId=(new Date).getTime(),this.$router.push({path:"/orderComnfirmation",query:{skuId:this.currentSkuId,type:1,goodsInfo:JSON.stringify(this.goods_info),bugNum:this.bugNum,isCart:0,currentCoverImg:this.currentCoverImg}})):this.$notifyWarn(this.$t("该商品已下架"))},openCustomer(){localStorage.setItem("sellerId",this.goods_info.sellerId),localStorage.setItem("storeName",this.goods_info.storeName),(0,C.W5)()?(sessionStorage.setItem("shopName",this.SellerInfo.name),this.$router.push({path:`/customerServiceIndex?goodsId=${this.goods_info.id}`})):(this.$notifyWarn(this.$t("请先登录")),this.$router.push("/login"))}},watch:{bugNum(t){this.cartNum=t},sort_index(){this.getEvaluationList()},productPropertiesShow(t){t&&(this.swiperWaitTime=5e3)}},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)},destroyed(){this.$ls.off("productList")}},w=$,I=e(81656),A=(0,I.A)(w,s,o,!1,null,"738ea5a1",null),x=A.exports},83560:function(){},85432:function(t,i,e){e.d(i,{A:function(){return x}});var s=e(51137),o=e(66848),a=(e(18111),e(61701),e(55685)),n=(0,a.Y)("image-preview"),r=n[0],l=n[1],c=e(20105),u=e(28722),h=e(2879),d=e(96874),m=e(77235),g=e(21465),f=e(48499),v=e(76060),p=e(90689),_=e(36749);function b(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var C,S={mixins:[u.B],props:{src:String,show:Boolean,active:Number,minZoom:[Number,String],maxZoom:[Number,String],rootWidth:Number,rootHeight:Number},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}},computed:{vertical:function(){var t=this.rootWidth,i=this.rootHeight,e=i/t;return this.imageRatio>e},imageStyle:function(){var t=this.scale,i={transitionDuration:this.zooming||this.moving?"0s":".3s"};if(1!==t){var e=this.moveX/t,s=this.moveY/t;i.transform="scale("+t+", "+t+") translate("+e+"px, "+s+"px)"}return i},maxMoveX:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight/this.imageRatio:this.rootWidth;return Math.max(0,(this.scale*t-this.rootWidth)/2)}return 0},maxMoveY:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight:this.rootWidth*this.imageRatio;return Math.max(0,(this.scale*t-this.rootHeight)/2)}return 0}},watch:{active:"resetScale",show:function(t){t||this.resetScale()}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{resetScale:function(){this.setScale(1),this.moveX=0,this.moveY=0},setScale:function(t){t=(0,g.y1)(t,+this.minZoom,+this.maxZoom),t!==this.scale&&(this.scale=t,this.$emit("scale",{scale:this.scale,index:this.active}))},toggleScale:function(){var t=this.scale>1?1:2;this.setScale(t),this.moveX=0,this.moveY=0},onTouchStart:function(t){var i=t.touches,e=this.offsetX,s=void 0===e?0:e;this.touchStart(t),this.touchStartTime=new Date,this.fingerNum=i.length,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.moving=1===this.fingerNum&&1!==this.scale,this.zooming=2===this.fingerNum&&!s,this.zooming&&(this.startScale=this.scale,this.startDistance=b(t.touches))},onTouchMove:function(t){var i=t.touches;if(this.touchMove(t),(this.moving||this.zooming)&&(0,f.wo)(t,!0),this.moving){var e=this.deltaX+this.startMoveX,s=this.deltaY+this.startMoveY;this.moveX=(0,g.y1)(e,-this.maxMoveX,this.maxMoveX),this.moveY=(0,g.y1)(s,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===i.length){var o=b(i),a=this.startScale*o/this.startDistance;this.setScale(a)}},onTouchEnd:function(t){var i=!1;(this.moving||this.zooming)&&(i=!0,this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(i=!1),t.touches.length||(this.zooming&&(this.moveX=(0,g.y1)(this.moveX,-this.maxMoveX,this.maxMoveX),this.moveY=(0,g.y1)(this.moveY,-this.maxMoveY,this.maxMoveY),this.zooming=!1),this.moving=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale())),(0,f.wo)(t,i),this.checkTap(),this.resetTouchStatus()},checkTap:function(){var t=this;if(!(this.fingerNum>1)){var i=this.offsetX,e=void 0===i?0:i,s=this.offsetY,o=void 0===s?0:s,a=new Date-this.touchStartTime,n=250,r=5;e<r&&o<r&&a<n&&(this.doubleTapTimer?(clearTimeout(this.doubleTapTimer),this.doubleTapTimer=null,this.toggleScale()):this.doubleTapTimer=setTimeout(function(){t.$emit("close"),t.doubleTapTimer=null},n))}},onLoad:function(t){var i=t.target,e=i.naturalWidth,s=i.naturalHeight;this.imageRatio=s/e}},render:function(){var t=arguments[0],i={loading:function(){return t(p.A,{attrs:{type:"spinner"}})}};return t(_.A,{class:l("swipe-item")},[t(v.A,{attrs:{src:this.src,fit:"contain"},class:l("image",{vertical:this.vertical}),style:this.imageStyle,scopedSlots:i,on:{load:this.onLoad}})])}},y=r({mixins:[u.B,(0,c.i)({skipToggleEvent:!0}),(0,h.x)(function(t){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0)})],props:{className:null,closeable:Boolean,asyncClose:Boolean,overlayStyle:Object,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},transition:{type:String,default:"van-fade"},showIndex:{type:Boolean,default:!0},swipeDuration:{type:[Number,String],default:300},startPosition:{type:[Number,String],default:0},overlayClass:{type:String,default:l("overlay")},closeIcon:{type:String,default:"clear"},closeOnPopstate:{type:Boolean,default:!0},closeIconPosition:{type:String,default:"top-right"}},data:function(){return{active:0,rootWidth:0,rootHeight:0,doubleClickTimer:null}},mounted:function(){this.resize()},watch:{startPosition:"setActive",value:function(t){var i=this;t?(this.setActive(+this.startPosition),this.$nextTick(function(){i.resize(),i.$refs.swipe.swipeTo(+i.startPosition,{immediate:!0})})):this.$emit("close",{index:this.active,url:this.images[this.active]})}},methods:{resize:function(){if(this.$el&&this.$el.getBoundingClientRect){var t=this.$el.getBoundingClientRect();this.rootWidth=t.width,this.rootHeight=t.height}},emitClose:function(){this.asyncClose||this.$emit("input",!1)},emitScale:function(t){this.$emit("scale",t)},setActive:function(t){t!==this.active&&(this.active=t,this.$emit("change",t))},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:l("index")},[this.slots("index",{index:this.active})||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,i=this.slots("cover");if(i)return t("div",{class:l("cover")},[i])},genImages:function(){var t=this,i=this.$createElement;return i(m.A,{ref:"swipe",attrs:{lazyRender:!0,loop:this.loop,duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators,indicatorColor:"white"},class:l("swipe"),on:{change:this.setActive}},[this.images.map(function(e){return i(S,{attrs:{src:e,show:t.value,active:t.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:t.rootWidth,rootHeight:t.rootHeight},on:{scale:t.emitScale,close:t.emitClose}})})])},genClose:function(){var t=this.$createElement;if(this.closeable)return t(d.A,{attrs:{role:"button",name:this.closeIcon},class:l("close-icon",this.closeIconPosition),on:{click:this.emitClose}})},onClosed:function(){this.$emit("closed")},swipeTo:function(t,i){this.$refs.swipe&&this.$refs.swipe.swipeTo(t,i)}},render:function(){var t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterLeave:this.onClosed}},[this.shouldRender?t("div",{directives:[{name:"show",value:this.value}],class:[l(),this.className]},[this.genClose(),this.genImages(),this.genIndex(),this.genCover()]):null])}}),$=e(33448),w={loop:!0,value:!0,images:[],maxZoom:3,minZoom:1/3,onClose:null,onChange:null,className:"",showIndex:!0,closeable:!1,closeIcon:"clear",asyncClose:!1,transition:"van-fade",getContainer:"body",overlayStyle:null,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},I=function(){C=new(o["default"].extend(y))({el:document.createElement("div")}),document.body.appendChild(C.$el),C.$on("change",function(t){C.onChange&&C.onChange(t)}),C.$on("scale",function(t){C.onScale&&C.onScale(t)})},A=function(t,i){if(void 0===i&&(i=0),!$.S$){C||I();var e=Array.isArray(t)?{images:t,startPosition:i}:t;return(0,s.A)(C,w,e),C.$once("input",function(t){C.value=t}),C.$once("closed",function(){C.images=[]}),e.onClose&&(C.$off("close"),C.$once("close",e.onClose)),C}};A.Component=y,A.install=function(){o["default"].use(y)};var x=A},90247:function(t,i,e){e(76952),e(69176),e(98992),e(22795),e(19523),e(65270),e(45396),e(84698),e(96002),e(83560)},93093:function(t,i,e){e(76952),e(69176),e(98992),e(22795),e(65270)}}]);