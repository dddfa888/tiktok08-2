"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[4358],{32451:function(t,a,e){e.r(a),e.d(a,{default:function(){return g}});e(44114);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"page-content"},[t.currentData?a("cancel-dialog",{attrs:{"dialog-show":t.cancelShow,"dialog-data":t.currentData},on:{"update:dialogShow":function(a){t.cancelShow=a},"update:dialog-show":function(a){t.cancelShow=a},done:()=>t.$router.back()}}):t._e(),t.currentData?a("reminds-dialog",{attrs:{"dialog-show":t.remindShow,"dialog-data":t.currentData},on:{"update:dialogShow":function(a){t.remindShow=a},"update:dialog-show":function(a){t.remindShow=a}}}):t._e(),a("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("订单详情"),"left-arrow":""},on:{"click-left":()=>t.$router.push({path:"/order",dir:"left",query:{type:t.$route.query.index}})}}),a("div",{staticStyle:{width:"100%",height:"46px"}}),t.currentData?a("div",{staticClass:"info-content"},[a("div",{staticClass:"order-info-content"},[a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("流水号"))+"：")]),a("div",[a("div",{staticClass:"copy",on:{click:function(a){return t.copyHandle(t.currentData.id)}}},[a("span",{staticClass:"nowrap",staticStyle:{width:"200px"}},[t._v(t._s(t.currentData.id))]),a("img",{attrs:{src:t.copyIcon,alt:""}})]),a("p",{staticClass:"tips"},[t._v(t._s(t.$formatZoneDate(t.currentData.createTime)))])])]),a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("收件地址"))+"：")]),a("div",[a("p",[t._v(" "+t._s(t.currentData.goodType="--")+" "+t._s(t.currentData.goodType="--")+" "+t._s(t.currentData.goodType="--")+" ")]),a("p",[t._v(t._s(t.currentData.goodType="--"))]),a("p",[t._v(t._s(t.currentData.goodType="--"))]),a("p",[t._v(t._s(t.currentData.contacts))]),a("p",[t._v(" "+t._s(t.currentData.phone?.indexOf("|")>-1?t.currentData.phone.split("|")[1]:t.currentData.phone)+" ")])])]),a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("商品数量"))+"：")]),a("div",[t._v(t._s(t.goodsTotalNum))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("订单总额"))+"：")]),a("div",{staticClass:"money"},[t._v(" $"+t._s(t.priceFormat(t.totalPrice+t.currentData.tax+t.currentData.fees))+" ")])]),a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("税费"))+"：")]),a("div",{staticClass:"money"},[t._v("$"+t._s(t.currentData.tax?t.priceFormat(t.currentData.tax):"0.00"))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("运费"))+"：")]),a("div",{staticClass:"money"},[t._v("$"+t._s(t.currentData.fees?t.priceFormat(t.currentData.fees):"0.00"))])]),a("div",{staticClass:"item"},[a("p",{staticClass:"p80"},[t._v(t._s(t.$t("总金额"))+"：")]),a("div",{staticClass:"money"},[t._v(" $"+t._s(t.priceFormat(t.$plus(t.$plus(t.totalPrice,t.currentData.tax),t.currentData.fees)))+" ")])])]),t.currentData?a("div",{staticClass:"goods-info-content"},t._l(t.goodsData,function(e,s){return a("div",{key:s,staticClass:"order-info-content"},[a("div",{staticClass:"goods-item",on:{click:function(a){return t.repeatPurchase(e)}}},[a("div",{staticClass:"poster"},[a("img",{attrs:{src:e.goodsIcon,alt:""}})]),a("div",{staticClass:"name"},[a("div",{staticClass:"title"},[t._v(t._s(e.goodsName))]),e.attributes?a("div",{},t._l(e.attributes,function(e,s){return e.attrName&&e.attrValue?a("span",{key:s,staticClass:"attribute"},[t._v(" "+t._s(e.attrName)+":"+t._s(e.attrValue))]):t._e()}),0):t._e()])]),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("数量"))+"：")]),a("div",[t._v(t._s(e.goodsNum))])]),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("单价"))+"：")]),a("div",{staticClass:"money"},[t._v("$"+t._s(t.priceFormat(e.goodsReal)))])]),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("总价"))+"：")]),a("div",{staticClass:"money"},[t._v(" $"+t._s(t.priceFormat(t.$operation(e.goodsReal,e.goodsNum,"times")))+" ")])]),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("税费"))+"：")]),a("div",{staticClass:"money"},[t._v("$"+t._s(e.tax?t.priceFormat(e.tax):"0.00"))])]),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("运费"))+"：")]),a("div",{staticClass:"money"},[t._v("$"+t._s(e.fees?t.priceFormat(e.fees):"0.00"))])]),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("总计"))+"：")]),a("div",{staticClass:"money"},[t._v(" "+t._s(t.priceFormat(e.goodsReal*e.goodsNum+e.tax+e.fees))+" ")])])])}),0):t._e()]):t._e(),t.currentData&&-1!==Number(t.currentData.status)?a("div",{staticClass:"page-footer"},[0===Number(t.currentData.status)?a("div",{staticClass:"btn",on:{click:function(a){t.cancelShow=!0}}},[t._v(" "+t._s(t.$t("取消订单"))+" ")]):t._e(),0===Number(t.currentData.status)?a("div",{staticClass:"btn color",on:{click:function(a){return t.openPeddingPay(t.currentData)}}},[t._v(" "+t._s(t.$t("立即付款"))+" ")]):t._e(),1===Number(t.currentData.status)?a("div",{staticClass:"btn color",on:{click:function(a){return t.remindHandle(t.currentData)}}},[t._v(" "+t._s(t.$t("提醒发货"))+" ")]):t._e(),3===Number(t.currentData.status)?a("div",{staticClass:"btn",on:{click:function(a){return t.openPage("/orderRefund",{id:t.currentData.id,a:t.currentData.prizeReal})}}},[t._v(" "+t._s(t.$t("申请退货"))+" ")]):t._e(),3===Number(t.currentData.status)?a("div",{staticClass:"btn color",on:{click:function(a){return t.orderPick(t.currentData)}}},[t._v(" "+t._s(t.$t("确认收货"))+" ")]):t._e(),Number(t.currentData.status)>0?a("div",{staticClass:"btn",on:{click:function(a){return t.openPage("/order/logistics",{id:t.currentData.id})}}},[t._v(" "+t._s(t.$t("查看物流"))+" ")]):t._e(),4===Number(t.currentData.status)?a("div",{staticClass:"btn",on:{click:function(a){return t.openPage("/orderEvaluate",{id:t.currentData.id})}}},[t._v(" "+t._s(t.$t("立即评价"))+" ")]):t._e(),6===Number(t.currentData.status)?a("div",{staticClass:"tips"},[Boolean(t.$route.query.returnStatus)?t._e():a("span",[t._v(t._s(t.$t("未退款"))+" ")]),1===Number(t.$route.query.returnStatus)?a("span",{staticClass:"running"},[t._v(t._s(t.$t("退款中")))]):t._e(),2===Number(t.$route.query.returnStatus)?a("span",{staticClass:"success"},[t._v(t._s(t.$t("退款成功")))]):t._e(),3===Number(t.$route.query.returnStatus)?a("span",{staticClass:"fail"},[t._v(t._s(t.$t("退款失败")))]):t._e()]):t._e()]):t._e()],1)},r=[],i=(e(69437),e(46579)),o=(e(74884),e(91981)),n=(e(64258),e(31864)),c=(e(18111),e(7588),e(93836)),d=e(18861),u=e(23808),l=e(97797),_=e(94348),p={name:"OrderDetails",components:{[n.A.name]:n.A,[o.A.name]:o.A,[i.A.name]:i.A,CancelDialog:c.A,RemindsDialog:d.A},data(){return{copyIcon:e(35550),cancelShow:!1,remindShow:!1,currentData:null,orderId:null,totalPrice:0,goodsData:[],timezone:""}},computed:{goodsTotalNum(){let t=0;return this.goodsData.forEach(a=>{t+=a.goodsNum}),t}},mounted(){this.$nextTick(()=>{const{id:t}=this.$route.query;t?(this.orderId=t,this.getDataInfo(),this.getOrderGoods()):((0,o.A)(this.$t("订单号不存在")),setTimeout(()=>{this.$router.back()},1500))}),this.timezone=localStorage.getItem("timeZone")},methods:{repeatPurchase(t){if(1!=t?.isShelf||1!=t?.isValid)return this.$notify(this.$t("该商品已下架"),"warning");this.$router.push("/CommodityDetails?sellerGoodsId="+t.goodsId)},time(t){let a=this.dayjs;return a().tz(this.timezone).format(t)},priceFormat(t){return(0,u.XV)(t)},copyHandle(t){this.$copyText(t).then(()=>{(0,o.A)(this.$t("复制成功"))},()=>{(0,o.A)(this.$t("复制失败"))})},getDataInfo(){o.A.loading({duration:0,forbidClick:!0}),(0,l.f_)({orderId:this.orderId,type:1}).then(t=>{_.log(t,"=====res"),this.currentData=t.orderInfo,o.A.clear()}).catch(()=>{o.A.clear()})},getOrderGoods(){(0,l.X2)({orderId:this.orderId}).then(t=>{_.log("res======",t),this.goodsData=t.pageList||[],this.goodsData.forEach(t=>{this.totalPrice+=t.goodsReal*t.goodsNum,"虚拟商品"==t.goodType&&(this.currentData.goodType="virtual")})})},openPeddingPay(t){const a=[{orderList:t.id}];this.$router.push({path:"/PendingPayment",query:{orderList:JSON.stringify(a),total:this.$operation(t.discountPrice,t.goodsCount,"times")||this.$operation(t.priceReal,t.goodsCount,"times")}})},remindHandle(t){const a=localStorage.getItem("remindStore")?JSON.parse(localStorage.getItem("remindStore")):[];a.includes(t.id)?(0,o.A)(this.$t("该订单已提醒过啦~")):this.remindShow=!0},openPage(t,a){const e={path:t};a&&(e.query=a),this.$router.push(e)},orderPick(t){i.A.confirm({title:this.$t("提示"),message:this.$t("确认收货吗？"),confirmButtonText:this.$t("确认"),cancelButtonText:this.$t("取消")}).then(()=>{o.A.loading({duration:0,message:this.$t("提交中"),forbidClick:!0});const a={orderId:t.id};(0,l.xw)(a).then(()=>{o.A.clear(),this.currentData=null,this.getDataInfo()}).catch(()=>{o.A.clear()})}).catch(()=>{_.log("cancel")})}}},m=p,v=e(81656),h=(0,v.A)(m,s,r,!1,null,"1d7a78d4",null),g=h.exports}}]);