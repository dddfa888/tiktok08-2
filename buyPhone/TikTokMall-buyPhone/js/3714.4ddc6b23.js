"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[3714],{73714:function(t,s,i){i.r(s),i.d(s,{default:function(){return f}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page-content",staticStyle:{"min-height":"100vh"}},[s("nationality-list",{ref:"controlChild",attrs:{title:t.$t("选择区域码")},on:{getName:function(s){return t.getName(arguments)}}}),s("Vcode",{staticStyle:{direction:"ltr"},attrs:{imgs:[t.img1,t.img2,t.img3,t.img4,t.img5],show:t.show,canvasHeight:200,sliderText:t.$t("拖动滑块以完成拼图"),successText:t.$t("验证通过!"),failText:t.$t("验证失败,请重试")},on:{success:t.onSuccess,close:function(s){t.show=!1}}}),s("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("手机绑定"),"left-arrow":""},on:{"click-left":t.onClickLeft}}),s("div",{staticClass:"h46",staticStyle:{width:"100%"}}),s("div",{staticClass:"form-content"},[s("div",{staticClass:"form-item"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("手机号")))]),s("div",{staticClass:"input-content"},[s("el-input",{attrs:{placeholder:t.$t("请输入手机号"),maxlength:"20",clearable:""},model:{value:t.formData.phone,callback:function(s){t.$set(t.formData,"phone",s)},expression:"formData.phone"}},[s("div",{attrs:{slot:"prepend"},on:{click:t.openNational},slot:"prepend"},[s("p",[t._v(" +"),s("span",[t._v(t._s(t.dialCode))]),s("img",{staticClass:"icon",attrs:{src:t.triangleDown,alt:""}})])])])],1)]),s("div",{staticClass:"form-item"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("登录密码")))]),s("div",{staticClass:"input-content"},[s("el-input",{attrs:{placeholder:t.$t("请输入登录密码"),maxlength:"20",clearable:"","show-password":""},model:{value:t.formData.password,callback:function(s){t.$set(t.formData,"password",s)},expression:"formData.password"}})],1)]),s("div",{staticClass:"submit-btn",on:{click:t.submitVertify}},[t._v(t._s(t.$t("提交")))])])],1)},a=[],o=(i(74884),i(91981)),n=(i(44114),i(94363)),l=i.n(n),c=i(33860),h=i(34931),r=i(97797),d=i(94348),A={name:"BindPhone",components:{NationalityList:c.A,Vcode:l()},data(){return{img1:i(57125),img2:i(29294),img3:i(28791),img4:i(6648),img5:i(44129),triangleDown:i(90894),show:!1,pageDiaCode:!1,dialCode:localStorage.getItem("dialCode")||1,codeBtnTxt:this.$t("收取验证码"),count:60,interval:null,btnDisabled:!1,formData:{phone:"",verifcode:"",password:""}}},created(){(0,r.ZW)().then(t=>{d.log(t.phone),this.formData.phone=t.phone})},methods:{onClickLeft(){this.$router.push({path:"/Setting",dir:"left"})},onSuccess(){this.submitHandle(),this.show=!1},getName(t){this.pageDiaCode?(this.dialCode=t[2],localStorage.setItem("dialCode",this.dialCode)):this.pageDiaCode=!0},openNational(){this.$refs.controlChild.open()},getCode(){if(""===this.formData.phone)return void(0,o.A)(this.$t("请输入手机号"));{const t=/^[0-9]+[0-9]*$/;if(!t.test(this.formData.phone))return void(0,o.A)(this.$t("手机号格式有误"))}o.A.loading({duration:0,message:this.$t("发送中"),forbidClick:!0});const t={target:`${this.dialCode} ${this.formData.phone}`};(0,h.$4)(t).then(()=>{o.A.success(this.$t("发送成功")),this.timerFn()}).catch(t=>{o.A.clear()})},timerFn(){this.codeBtnTxt=`${this.$t("再次获取")} ${this.count} s`,this.btnDisabled=!0,this.interval=setInterval(()=>{1===this.count?(this.count=60,this.codeBtnTxt=this.$t("再次获取"),this.btnDisabled=!1,clearInterval(this.interval)):(this.count-=1,this.codeBtnTxt=`${this.$t("再次获取")} ${this.count} s`)},1e3)},submitVertify(){if(""!==this.formData.phone){{const t=/^[0-9]+[0-9]*$/;if(!t.test(this.formData.phone))return void(0,o.A)(this.$t("手机号格式有误"))}""!==this.formData.password?this.show=!0:(0,o.A)(this.$t("请输入登录密码"))}else(0,o.A)(this.$t("请输入手机号"))},submitHandle(){o.A.loading({duration:0,message:this.$t("提交中"),forbidClick:!0});const t={...this.formData,phone:`${this.dialCode} ${this.formData.phone}`};(0,r.uF)(t).then(async()=>{o.A.success(this.$t("绑定成功")),await this.$store.dispatch("getUserInfo"),this.onClickLeft()}).catch(t=>{o.A.clear()})}}},m=A,p=i(81656),u=(0,p.A)(m,e,a,!1,null,"24acee30",null),f=u.exports},90894:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAATCAYAAACDW21BAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD3SURBVHgB3ZI9DoJAEEZn4QJaQucNNITE0tLWI3gC4xHsLD2Ona0F4B6BCryCBeBMgdkM2WWRxcKXwA6zP182PIB/R9AriqILDgf4AaItMPSGwwamRXptVVXVvmmaHCaCzsaMnVCbcRwv67qmm87AMRi2kFLmvtosiuIZBMFLCLEFh+B5xyzLrlT7fLIsy3sYhnMs1+AADDslSXL+fOsWOpJIpmm6UhuebuVYiVpJeF+YNo2RqJWE933Tpm8lUiUZFEgMlYhL0pkHSywl6kjC8cCSPol0knCsb0iYJNJJwun9hyo6iUySjAokuER9kjiDJMLnAQN5AwgPjbeTqmD3AAAAAElFTkSuQmCC"}}]);