"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[7150],{47150:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"service-box",style:t.isApp?{height:"93%"}:null},[e("div",{staticClass:"back",on:{click:function(e){return t.$router.go(-1)}}}),e("iframe",{ref:"frame",class:[this.localIsList&&"local_list"],attrs:{src:t.serviceUrl,frameborder:"0",width:"100%",height:"100%"}})])},o=[],r=(s(63212),s(96874)),a=(s(44114),s(93518)),l={name:"CustomerService",data(){return{isFirstRequest:!0,token:"",serviceUrl:"",pageHeight:"",lang:"",sellerId:"",storeName:"",isApp:!!window.plus,path:"",localIsList:!1,isShowIcon:!1}},components:{[r.A.name]:r.A},computed:{...(0,a.L8)({userInfo:"userInfo"})},mounted(){this.init(),window.addEventListener("message",t=>{"back"==t.data&&this.$router.push("/")})},methods:{onClickLeft(){this.$router.push("/")},onClickRight(){const t={NODE_ENV:"production",VUE_APP_FOOTER_COLOR:"#f89900",VUE_APP_ITEM_NAME:"TikTokMall",VUE_APP_MAIN_COLOR:"#f89900",BASE_URL:"./"}.VUE_APP_IS_APP?this.$store.state.multiItem["TikTokMall"].app_url:location.origin;this.$refs.frame.contentWindow.postMessage("toContacts",t)},init(){this.token=localStorage.getItem("token"),this.lang=localStorage.getItem("lang"),this.pageHeight=document.documentElement.clientHeight-44,this.sellerId=this.$route.query?.path?"":localStorage.getItem("sellerId"),this.storeName=this.$route.query?.path?"":localStorage.getItem("storeName");const t=this.$route.query?.path?this.$t("消息"):sessionStorage.getItem("shopName"),e=this.$route.query?.goodsId,s={NODE_ENV:"production",VUE_APP_FOOTER_COLOR:"#f89900",VUE_APP_ITEM_NAME:"TikTokMall",VUE_APP_MAIN_COLOR:"#f89900",BASE_URL:"./"}.VUE_APP_IS_APP?this.$store.state.multiItem["TikTokMall"].app_url:location.origin,i=this.sellerId?`?partyid=${this.sellerId}&name=${this.storeName}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px`:`?token=${this.token}&lang=${this.lang}&height=100%`;this.serviceUrl=`${s}/chat/#/h5/${this.$route.query?.path||"message"}/yellow${i}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar||1}${t&&"&shopName="+t}${e&&"undefined"!=e?"&productId="+e:""}`}}},n=l,h=s(81656),u=(0,h.A)(n,i,o,!1,null,"89f44142",null),c=u.exports},63212:function(t,e,s){s(76952),s(98992),s(22795)}}]);