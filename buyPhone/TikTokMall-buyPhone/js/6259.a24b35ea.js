"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[6259],{5431:function(t,i,a){a.r(i),a.d(i,{default:function(){return m}});var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"recharge",staticStyle:{"min-height":"100vh"}},[i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:"Hive"==t.itemName?t.$t("加值"):t.$t("充值"),"left-arrow":"","right-text":t.$t("记录")},on:{"click-left":t.onClickLeft,"click-right":t.onClick1}}),i("div",{staticClass:"h46",staticStyle:{width:"100%"}}),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("区块链网络")))]),i("div",{staticClass:"duoxuan"},t._l(t.tongdao,function(a,n){return i("div",{key:n,staticClass:"xuan1",class:t.tongdao_xuanzhong.blockchain_name===a.blockchain_name?"xuanzhong":"weixuan",on:{click:function(i){return t.tongdao_qiehuan(a)}}},[t._v(t._s(a.blockchain_name)+" "),t.tongdao_xuanzhong.blockchain_name===a.blockchain_name?i("van-icon",{staticClass:"xuanzhong-img rtl_selected",attrs:{"class-prefix":"icon",name:"xuanzejiaobiao"}}):t._e()],1)}),0),i("div",{staticClass:"qrcode",staticStyle:{display:"flex","justify-content":"center","margin-top":"20px",width:"100%",float:"left"}},[i("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas"}}),i("img",{staticStyle:{width:"150px",height:"150px"},attrs:{src:t.imgUrl}})]),i("div",{staticClass:"baocunerweima"},[i("div",{staticClass:"baocunerweima-buuon",on:{click:t.baocunhaibao}},[t._v(t._s(t.$t("保存二维码")))])]),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("充值地址")))]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.tongdao_xuanzhong.address))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11",staticStyle:{color:"var(--main-color)"},on:{click:function(i){return t.copyData(t.tongdao_xuanzhong.address)}}},[t._v(t._s(t.$t("复制"))+" ")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.$t("充值数量")))]),i("div",{staticClass:"shuru"},[i("el-input",{attrs:{placeholder:t.$t("请输入充值数量"),type:"number",clearable:""},on:{input:t.handleInput},model:{value:t.it.input1,callback:function(i){t.$set(t.it,"input1",i)},expression:"it.input1"}})],1),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("预计到账"))+"("+t._s(t.$t("当前汇率"))+" 1 : "+t._s(t.tongdao_xuanzhong.fee>1?t.priceFormat(t.tongdao_xuanzhong.fee):t.tongdao_xuanzhong.fee)+")")]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.priceFormat(t.it.input1*t.tongdao_xuanzhong.fee)))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11"},[t._v("USDT")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("上传图片（上传支付详情截图）")))]),i("div",{staticClass:"shangchaun",staticStyle:{"margin-left":"15px",width:"100%",float:"left"}},[i("van-uploader",{attrs:{multiple:"","max-count":1,"preview-size":"120px","after-read":t.afterRead,accept:".png,.jpg,.jpeg"},model:{value:t.fileList,callback:function(i){t.fileList=i},expression:"fileList"}})],1),i("div",{staticClass:"tijiao"},[i("div",{staticClass:"tijiao2",on:{click:t.biaodan_tijiao}},[t._v(t._s(t.$t("提交")))])])],1)},e=[],s=(a(74884),a(91981)),o=(a(99809),a(51785)),c=(a(63212),a(96874)),h=(a(44114),a(78420)),l=a(23808),u=a(97797),r={data(){return{priceFormat:l.XV,itemName:"TikTokMall",data:{},codes:"",tongdao_xuanzhong:{},imgUrl:null,tongdao:[],it:{input1:""},fileList:[],shangchuanurl:"",session_token:""}},components:{QRCode:h,[c.A.name]:c.A,[o.A.name]:o.A},created(){this.zhifutongdao()},methods:{handleInput(){this.it.input1=this.it.input1.replace(/[^\d.]/g,""),this.it.input1=this.it.input1.replace(/\.{2,}/g,"."),this.it.input1=this.it.input1.replace(/^\./g,""),this.it.input1=this.it.input1.replace(".","$#$").replace(/\./g,"").replace("$#$","."),["BTC","ETH"].includes(this.$route.query.type)?(this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,10}).*$/,"$1$2.$3"),this.it.input1=this.it.input1.replace(/^\D*(\d{0,10}(?:\.\d{0,10})?).*$/g,"$1")):this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,2}).*$/,"$1$2.$3")},biaodan_tijiao(){var t=this;""!==this.it.input1?""!==this.shangchuanurl?(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)<this.tongdao_xuanzhong.recharge_limit_min?(0,s.A)(t.$t("充值价值不得小于最小限额")+this.tongdao_xuanzhong.recharge_limit_min+"usdt"):(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)>this.tongdao_xuanzhong.recharge_limit_max?(0,s.A)(t.$t("充值价值不得大于最大限额")+this.tongdao_xuanzhong.recharge_limit_max+"usdt"):(0,u.Tx)({}).then(t=>{this.session_token=t.session_token,this.chongzhitijiao()}):(0,s.A)(t.$t("请上传图片")):(0,s.A)(t.$t("请输入充值数量"))},chongzhitijiao(){var t={session_token:this.session_token,amount:this.it.input1,from:"123",blockchain_name:this.tongdao_xuanzhong.blockchain_name,img:this.shangchuanurl,coin:this.tongdao_xuanzhong.coin,channel_address:this.tongdao_xuanzhong.address,tx:"123"};s.A.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""}),(0,u._v)(t).then(t=>{s.A.clear(),(0,s.A)(this.$t("提交成功")),this.it.input1="",this.fileList=[],this.shangchuanurl="",this.$router.push("/SubmitCompleted?path=rechargeRecord")}).catch(t=>{s.A.clear()})},tongdao_qiehuan(t){this.tongdao_xuanzhong=t,this.useqrcode1()},zhifutongdao(){(0,u._5)({}).then(t=>{for(var i=0;i<t.length;i++)t[i]["coin"]===this.$route.query.type&&this.tongdao.push(t[i]);this.tongdao_xuanzhong=this.tongdao[0],this.useqrcode1()})},afterRead(t){s.A.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""});let i=new FormData;i.append("file",t.file),i.append("moduleName","recharge"),(0,u.VR)(i).then(t=>{s.A.clear(),this.shangchuanurl=t}).catch(function(t){s.A.clear(),(0,s.A)(this.$t("添加失败")),this.fileList=[]})},copyData(t){this.$copyText(t).then(t=>{(0,s.A)(this.$t("复制成功"))},function(t){(0,s.A)(this.$t("复制失败"))})},copyData2(t){this.$copyText(t).then(t=>{},function(t){})},useqrcode1(){let t=document.getElementById("canvas"),i=this.tongdao_xuanzhong.address;h.toCanvas(t,i,function(t){}),this.saveImg()},baocunhaibao(){let t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png"),this.getUrlBase64(this.imgUrl).then(t=>{let i=document.createElement("a");i.href=t,i.download="qrCode.png",i.click()})},getUrlBase64(t){return new Promise(i=>{let a=document.createElement("canvas"),n=a.getContext("2d"),e=new Image;e.crossOrigin="Anonymous",e.src=t,e.onload=function(){a.height=300,a.width=300,n.drawImage(e,0,0,300,300);let t=a.toDataURL("image/png");a=null,i(t)}})},saveImg(){let t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png")},onClickLeft(){this.$router.push({path:"/rechargeList",dir:"left"})},onClick1(){this.$router.push({path:"/rechargeRecord"})}}},d=r,g=a(81656),p=(0,g.A)(d,n,e,!1,null,"5aa36d25",null),m=p.exports},63212:function(t,i,a){a(76952),a(98992),a(22795)}}]);